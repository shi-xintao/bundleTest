{"version":3,"sources":["assets/bundles/pictureBookList/script/bookList/pictureBookItem.ts","assets/bundles/pictureBookList/script/bookList/pictureBookList.ts"],"names":["EventSystem_1","require","enum_1","event_1","userDataManager_1","_a","cc","_decorator","ccclass","property","pictureBookItem","_super","__extends","_this","apply","this","arguments","item","lock","spriteFrame_arr","lessonType","isLock","prototype","onLoad","start","setItemFrame","init","data","bookInfo","UserDataManager","instance","getPicAndGameLockState","PicAndGameLockState","unlock","active","getComponent","Sprite","spriteFrame","id","onClick","default","emit","STATE_TO_PICTURE_BOOK","STATE_TO_HALL","open","close","__decorate","Node","SpriteFrame","Component","exports","config_1","pictureBookItem_1","pictureBookList","itemPrefab","listNode","initList","bookData","PICTURE_BOOK_LIST_CONFIG","forEach","element","bookItem","instantiate","pictureBookItemComponent","addChild","onBackClick","onDestroy","Prefab"],"mappings":"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","sourcesContent":["import EventSystem from \"../../../../kit/system/event/EventSystem\";\nimport { CHAPTER_STATE, PicAndGameLockState } from \"../../../../Script/config/enum\";\nimport { STATE_TO_HALL, STATE_TO_LESSON, STATE_TO_PICTURE_BOOK } from \"../../../../Script/config/event\";\nimport { UserDataManager } from \"../../../../Script/manager/userDataManager\";\nimport { bookListItem, oneBookData } from \"./bookListItem\";\nconst {ccclass, property} = cc._decorator;\n@ccclass\nexport default class pictureBookItem extends cc.Component implements bookListItem{\n\n    @property(cc.Node)\n    item: cc.Node = null;\n\n    @property(cc.Node)\n    lock: cc.Node = null;\n\n    @property(cc.SpriteFrame)\n    spriteFrame_arr: cc.SpriteFrame[] = [];\n    \n    private bookInfo: any;\n    public lessonType:number =  0      //0解锁 1未解锁\n    public isLock:boolean = false\n\n    public onLoad () {\n       \n    }\n\n    public start () {\n\n    }\n\n    public setItemFrame(){\n        \n    }\n\n    public init(data:oneBookData){\n        this.bookInfo = data\n        this.lessonType = UserDataManager.instance.getPicAndGameLockState()\n        this.isLock = (this.lessonType == PicAndGameLockState.unlock)\n        this.lock.active = !this.isLock\n        this.item.getComponent(cc.Sprite).spriteFrame = this.spriteFrame_arr[this.bookInfo.id]\n    }\n\n    public onClick(): void {\n        if(this.isLock)  //解锁\n        {\n            //进入对应绘本\n            EventSystem.emit(STATE_TO_PICTURE_BOOK, this.bookInfo);\n        }else{   //返回到大厅\n            EventSystem.emit(STATE_TO_HALL)\n        }\n    }\n\n    public open(): void {\n        \n    }\n    public close(): void {\n\n    }\n    // update (dt) {}\n}\n","import EventSystem from \"../../../../kit/system/event/EventSystem\";\nimport { PICTURE_BOOK_LIST_CONFIG } from \"../../../../Script/config/config\";\nimport { STATE_TO_HALL } from \"../../../../Script/config/event\";\nimport { oneBookData } from \"./bookListItem\";\nimport pictureBookItem from \"./pictureBookItem\";\nconst { ccclass, property } = cc._decorator;\n@ccclass\nexport default class pictureBookList extends cc.Component {\n\n    @property(cc.Prefab)\n    public itemPrefab: cc.Prefab = null;\n\n    @property(cc.Node)\n    public listNode: cc.Node = null;\n\n    public onLoad() {\n        this.initList()\n    }\n\n    public start() {\n\n    }\n\n    public initList() {\n        // 加载绘本列表\n        let bookData: any = PICTURE_BOOK_LIST_CONFIG;\n        bookData.forEach((element: oneBookData) => {\n            let bookItem: cc.Node = cc.instantiate(this.itemPrefab);\n            let pictureBookItemComponent: pictureBookItem = bookItem.getComponent<pictureBookItem>(pictureBookItem);\n            pictureBookItemComponent.init(element);\n            this.listNode.addChild(bookItem);\n        });\n    }\n\n    public onBackClick(): void {\n        EventSystem.emit(STATE_TO_HALL);\n    }\n\n    onDestroy() {\n\n    }\n}\n"],"file":"index.js"}