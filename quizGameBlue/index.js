window.__require=function e(n,t,i){function o(a,u){if(!t[a]){if(!n[a]){var s=a.split("/");if(s=s[s.length-1],!n[s]){var c="function"==typeof __require&&__require;if(!u&&c)return c(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var p=t[a]={exports:{}};n[a][0].call(p.exports,function(e){return o(n[a][1][e]||e)},p,p.exports,e,n,t,i)}return t[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<i.length;a++)o(i[a]);return o}({QuizGameBlueConfig:[function(e,n,t){"use strict";var i;cc._RF.push(n,"dfc74FCTL1A+I8Z3In/BxRL","QuizGameBlueConfig"),Object.defineProperty(t,"__esModule",{value:!0}),t.round2WrongConfig=t.round2CorrectConfig=t.round1CorrectConfig=t.SpineType=t.EleSpineName=void 0,function(e){e.Walk="walk2",e.WalkWithGun="walk",e.Chuiqi="chuiqi",e.Chailiwu="chai li wu",e.chuipaopao="chuipaopao",e.chuipaopao2="chuipaopao2",e.chuipaopao2Huai="chuipaopao2-huai",e.daiji="daiji",e.gaoxing="gaoxing",e.ku="ku",e.kunhuo="kunhuo",e.kunhuo2="kunhuo2",e.qidai="qidai",e.zhanshi="zhanshi",e.zhanshi2="zhanshi2",e.naqiang="naqiang",e.kunhuoGun="kunhuo-kan",e.kunhuoGun1="kunhuo2-kan",e.kan="kan"}(i=t.EleSpineName||(t.EleSpineName={})),function(e){e.ce="xiang-ce",e.zheng="xiang-zhengmian"}(t.SpineType||(t.SpineType={}));var o=[{name:i.Chailiwu,loop:!1},{name:i.zhanshi,loop:!1},{name:i.zhanshi2,loop:!0,duration:3}];t.round1CorrectConfig=o,i.Chailiwu,i.zhanshi,i.zhanshi2;var r=[{name:i.chuipaopao,loop:!1},{name:i.chuipaopao2,loop:!0,duration:2}];t.round2CorrectConfig=r;var a=[{name:i.chuipaopao,loop:!1},{name:i.chuipaopao2Huai,loop:!1},{name:i.kunhuoGun,loop:!1},{name:i.kunhuoGun1,loop:!0,duration:2}];t.round2WrongConfig=a,cc._RF.pop()},{}],QuizGameBlue:[function(e,n,t){"use strict";cc._RF.push(n,"c7650XNGAZPcq4FDqTvUswr","QuizGameBlue");var i,o=this&&this.__extends||(i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])})(e,n)},function(e,n){function t(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),r=this&&this.__decorate||function(e,n,t,i){var o,r=arguments.length,a=r<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,t,i);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(r<3?o(a):r>3?o(n,t,a):o(n,t))||a);return r>3&&a&&Object.defineProperty(n,t,a),a},a=this&&this.__awaiter||function(e,n,t,i){return new(t||(t=Promise))(function(o,r){function a(e){try{s(i.next(e))}catch(n){r(n)}}function u(e){try{s(i.throw(e))}catch(n){r(n)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(a,u)}s((i=i.apply(e,n||[])).next())})},u=this&&this.__generator||function(e,n){var t,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function u(e){return function(n){return s([e,n])}}function s(r){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=n.call(e,a)}catch(u){r=[6,u],i=0}finally{t=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var s=e("./../../../common/utils/SpineUtils"),c=e("../../../common/structure/CompEnum"),p=e("../../../kit/manager/ResourcesManager"),l=e("../../../kit/system/audio/AudioManager"),h=e("../../templateGame/scripts/TemplateGameBase"),d=e("./QuizGameBlueConfig"),f=cc._decorator,m=f.ccclass,S=f.property,y=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.eleSpine=null,n.cakeSpine=null,n.idlePosNode=null,n.iconOpen=null,n.decBox=null,n.decZhuozi=null,n.guidHand=null,n.targetPos1=null,n.selectTargetNode=null,n.selectCorrect=!1,n.guidFun=null,n}return o(n,e),n.prototype.start=function(){this.eleSpine.node.zIndex=100,this.roundNodeArr[2].zIndex=110,this.decBox.zIndex=101},n.prototype.guidRound12=function(){this.roundNodeArr[this.curRoundIndex].children.map(function(e){cc.tween(e).call(function(){}).to(.15,{scale:1.1}).to(.15,{scale:.9}).to(.15,{scale:1.1}).to(.15,{scale:1}).start()})},n.prototype.openAniStart=function(){return a(this,void 0,void 0,function(){var e=this;return u(this,function(n){switch(n.label){case 0:switch(cc.log(" openAniStart =====this.curRoundIndex: ",this.curRoundIndex),this.curRoundIndex){case 0:return[3,1];case 1:return[3,3];case 2:return[3,4]}return[3,6];case 1:return[4,this.playOpenAniStart1()];case 2:return n.sent(),this.guidFun=this.guidRound12.bind(this),this.schedule(this.guidFun,5),[3,8];case 3:return this.playEleAnimation(d.EleSpineName.daiji,!0,1),this.guidFun=this.guidRound12.bind(this),this.schedule(this.guidFun,5),[3,8];case 4:return this.decBox.active=!0,[4,this.playOpenAniStart3()];case 5:return n.sent(),this.scheduleOnce(function(){e.guidHand.active=!1},2),[3,8];case 6:return this.decZhuozi.active=!0,[4,this.playOpenAniStart4()];case 7:return n.sent(),[3,8];case 8:return this.roundStateTypeChanged(c.RoundStateType.RoundOpenAniComplete),[2]}})})},n.prototype.endAniStart=function(){return a(this,void 0,void 0,function(){var e,n,t,i=this;return u(this,function(o){switch(o.label){case 0:switch(console.log(" endAniStart  ===this.curRoundIndex: ",this.curRoundIndex),this.curRoundIndex){case 0:case 1:return[3,1];case 2:return[3,8];case 3:return[3,15]}return[3,26];case 1:return[4,this.changeSpine(d.SpineType.ce)];case 2:return o.sent(),this.playEleAnimation(d.EleSpineName.Walk,!0,-1),[4,this.move2TargetPos(2,cc.v3(this.targetPos1.x,this.eleSpine.node.y))];case 3:return o.sent(),[4,this.changeSpine(d.SpineType.zheng)];case 4:return o.sent(),e=0==this.curRoundIndex?"jiqiren":"huoche",this.eleSpine.setSkin(e),this.selectCorrect?[4,new Promise(function(e){d.round1CorrectConfig[1].func=function(){i.selectTargetNode.active=!1;var e=cc.instantiate(i.iconOpen);e.parent=i.selectTargetNode.parent;var n=i.selectTargetNode.position;e.position=n.add(cc.v3(78))},s.SpineUtils.playSpineAniByConfig(i.eleSpine,d.round1CorrectConfig).then(function(){return e()})})]:[3,7];case 5:return o.sent(),[4,new Promise(function(e){i.eleMove2TargetPosWithAni(d.EleSpineName.Walk,1.5,i.idlePosNode.position,d.EleSpineName.daiji).then(function(){e()})})];case 6:return o.sent(),[3,7];case 7:return[3,27];case 8:return this.decBox.active=!1,this.eleSpine.setSkin("shuiqiang"),1!=this.curRoundResult.win?[3,10]:[4,new Promise(function(e){s.SpineUtils.playSpineAniByConfig(i.eleSpine,d.round2CorrectConfig).then(function(){return e()})})];case 9:return o.sent(),[3,12];case 10:return[4,new Promise(function(e){s.SpineUtils.playSpineAniByConfig(i.eleSpine,d.round2WrongConfig).then(function(){return e()})})];case 11:o.sent(),o.label=12;case 12:return[4,new Promise(function(e){i.eleMove2TargetPosWithAni(d.EleSpineName.WalkWithGun,1.5,i.idlePosNode.position,d.EleSpineName.daiji).then(function(){return e()})})];case 13:return o.sent(),[4,this.playEleAnimation(d.EleSpineName.daiji,!1,1)];case 14:return o.sent(),[3,27];case 15:return 1!=this.curRoundResult.win?[3,20]:[4,this.changeSpine(d.SpineType.ce)];case 16:return o.sent(),[4,this.playEleAnimation(d.EleSpineName.Chuiqi,!1,-1)];case 17:return o.sent(),this.cakeSpine.setAnimation(0,"lazhu-mie",!1),this.cakeSpine.addAnimation(0,"lazhu-mie2",!0),[4,this.changeSpine(d.SpineType.zheng)];case 18:return o.sent(),n=[{name:d.EleSpineName.gaoxing,loop:!0,duration:3}],[4,new Promise(function(e){s.SpineUtils.playSpineAniByConfig(i.eleSpine,n).then(function(){return e()})})];case 19:return o.sent(),[3,25];case 20:return[4,this.changeSpine(d.SpineType.ce)];case 21:return o.sent(),[4,this.playEleAnimation(d.EleSpineName.Chuiqi,!1,-1)];case 22:return o.sent(),this.cakeSpine.setAnimation(0,"lazhu-fei",!1),[4,this.changeSpine(d.SpineType.zheng)];case 23:return o.sent(),t=[{name:d.EleSpineName.kunhuo,loop:!1},{name:d.EleSpineName.kunhuo2,loop:!0,duration:3}],[4,new Promise(function(e){s.SpineUtils.playSpineAniByConfig(i.eleSpine,t).then(function(){return e()})})];case 24:o.sent(),o.label=25;case 25:case 26:return[3,27];case 27:return console.log(" endAniStart  ===this.curRoundIndex: 1111",this.curRoundIndex),this.roundStateTypeChanged(c.RoundStateType.RoundEndAniComplete),[2]}})})},n.prototype.startAudioCallFunc=function(){cc.log("QuizGameBlue start record!"),this.startRecordAudio("\u84dd\u8272")},n.prototype.onRecordResult=function(e){cc.log("onRecordResult ===== ",e),"ResultCb"==e.data.eventName&&(e.data.success?this.roundStateTypeChanged(c.RoundStateType.RoundComplete,{win:1}):this.roundStateTypeChanged(c.RoundStateType.RoundComplete,{win:0}))},n.prototype.playOpenAniStart1=function(){var e=this;return new Promise(function(n){e.eleMove2TargetPosWithAni(d.EleSpineName.Walk,3,e.idlePosNode.position,d.EleSpineName.daiji).then(function(){n()})})},n.prototype.playOpenAniStart3=function(){var e=this;return new Promise(function(n){return a(e,void 0,void 0,function(){var e,t;return u(this,function(i){switch(i.label){case 0:return this.eleSpine.setSkin("shuiqiang"),[4,this.playEleAnimation(d.EleSpineName.naqiang,!1,1)];case 1:return i.sent(),[4,this.changeSpine(d.SpineType.ce)];case 2:return i.sent(),e=this.decBox.position,t=this.eleSpine.node.x>e.x?1:-1,this.playEleAnimation(d.EleSpineName.WalkWithGun,!0,t),[4,this.move2TargetPos(2,cc.v3(e.x,this.eleSpine.node.y))];case 3:return i.sent(),[4,this.changeSpine(d.SpineType.zheng)];case 4:return i.sent(),[4,this.playEleAnimation(d.EleSpineName.kan,!1,t)];case 5:return i.sent(),this.playEleAnimation(d.EleSpineName.daiji,!0,1),n(),[2]}})})})},n.prototype.playOpenAniStart4=function(){var e=this;return new Promise(function(n){return a(e,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return this.eleSpine.setSkin("moren"),[4,this.playEleAnimation(d.EleSpineName.daiji,!1,1)];case 1:return e.sent(),this.playEleAnimation(d.EleSpineName.daiji,!0,1),n(),[2]}})})})},n.prototype.eleMove2TargetPosWithAni=function(e,n,t,i){return a(this,void 0,void 0,function(){var o;return u(this,function(r){switch(r.label){case 0:return[4,this.changeSpine(d.SpineType.ce)];case 1:return r.sent(),o=this.eleSpine.node.x>t.x?1:-1,this.playEleAnimation(e,!0,o),[4,this.move2TargetPos(n,t)];case 2:return r.sent(),[4,this.changeSpine(d.SpineType.zheng)];case 3:return r.sent(),this.playEleAnimation(i,!0,1),[2]}})})},n.prototype.playEleAnimation=function(e,n,t){var i=this;if(void 0===n&&(n=!0),void 0===t&&(t=1),!n)return new Promise(function(o){i.eleSpine.node.scaleX=t;var r=i.eleSpine.setAnimation(0,e,n);i.eleSpine.setTrackCompleteListener(r,function(){o()})});Promise.resolve().then(function(){i.eleSpine.node.scaleX=t,i.eleSpine.setAnimation(0,e,n)})},n.prototype.changeSpine=function(e){var n=this;return new Promise(function(t){p.default.instance.loadRes("quizGameBlue","spine/"+e,p.ResourceType.Normal,sp.SkeletonData,function(e,i){if(e)return cc.error(e),void t();n.eleSpine.skeletonData=i,t()})})},n.prototype.move2TargetPos=function(e,n){var t=this;return void 0===e&&(e=1),new Promise(function(i){cc.tween(t.eleSpine.node).to(e,{position:n}).call(function(){i()}).start()})},n.prototype.itemTouchCall=function(e,n){this.unschedule(this.guidFun);var t=e.currentTarget;this.selectTargetNode=t;var i=t.parent.convertToWorldSpaceAR(t.position);this.targetPos1=this.node.convertToNodeSpaceAR(i);var o=Number(n);this.selectCorrect=0==o,console.log(" ====this.selectCorrect: ",this.selectCorrect," n: ",o),0==o?(l.default.playEffect("quizGameBlue","audios/game_right"),this.roundStateTypeChanged(c.RoundStateType.RoundComplete,{win:1})):(l.default.playEffect("quizGameBlue","audios/game_error"),this.roundStateTypeChanged(c.RoundStateType.RoundComplete,{win:0})),this.roundNodeArr[this.curRoundIndex].children.map(function(e){var n=e.getComponent(cc.Button);n&&(n.interactable=!1)}),this.roundNodeArr[this.curRoundIndex].children.map(function(e){e!=t&&(e.active=!1)})},r([S({type:sp.Skeleton,displayName:"\u5927\u8c61\u52a8\u753b"})],n.prototype,"eleSpine",void 0),r([S({type:sp.Skeleton,displayName:"\u86cb\u7cd5\u52a8\u753b"})],n.prototype,"cakeSpine",void 0),r([S({type:cc.Node,displayName:"\u5927\u8c61\u5f85\u673a\u4f4d\u7f6e"})],n.prototype,"idlePosNode",void 0),r([S(cc.Node)],n.prototype,"iconOpen",void 0),r([S(cc.Node)],n.prototype,"decBox",void 0),r([S(cc.Node)],n.prototype,"decZhuozi",void 0),r([S(cc.Node)],n.prototype,"guidHand",void 0),r([m],n)}(h.default);t.default=y,cc._RF.pop()},{"../../../common/structure/CompEnum":void 0,"../../../kit/manager/ResourcesManager":void 0,"../../../kit/system/audio/AudioManager":void 0,"../../templateGame/scripts/TemplateGameBase":void 0,"./../../../common/utils/SpineUtils":void 0,"./QuizGameBlueConfig":"QuizGameBlueConfig"}]},{},["QuizGameBlue","QuizGameBlueConfig"]);