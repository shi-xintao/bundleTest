window.__require=function t(e,i,n){function o(s,a){if(!i[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){return o(e[s][1][t]||t)},h,h.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<n.length;s++)o(n[s]);return o}({DragableLetter:[function(t,e,i){"use strict";cc._RF.push(e,"e210b+wGqRPD7KWNJ4+oCgA","DragableLetter");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function s(t){try{c(n.next(t))}catch(e){r(e)}}function a(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var i,n,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var c=t("./DroppableLetter"),l=t("./FloatMain"),h=t("./FloatUtil"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.initPos=cc.Vec2.ZERO,e.currPos=cc.Vec2.ZERO,e.dropArea=[],e.letter="",e.lastPos=cc.Vec2.ZERO,e}return o(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.dropArea.push(cc.find("btn_c",this.node.parent).getComponent(c.default)),this.dropArea.push(cc.find("btn_d",this.node.parent).getComponent(c.default)),this.letter=cc.find("l",this.node).getComponent(cc.Label).string},e.prototype.onTouchBegan=function(){l.default.instance.canDrag&&(l.default.instance.hand.hide(),this.currPos.x=this.node.x,this.currPos.y=this.node.y,this.initPos.x=this.node.x,this.initPos.y=this.node.y)},e.prototype.onTouchMove=function(t){if(l.default.instance.canDrag){var e=t.getDeltaX(),i=t.getDeltaY();this.currPos.x+=e,this.currPos.y+=i,this.node.x=this.currPos.x,this.node.y=this.currPos.y}},e.prototype.onTouchEnd=function(t){return s(this,void 0,void 0,function(){var e,i,n;return a(this,function(o){switch(o.label){case 0:if(!l.default.instance.canDrag)return[2];t.getLocationX(),t.getLocationY(),e=0,o.label=1;case 1:return e<this.dropArea.length?(i=this.dropArea[e],n=h.default.convertToNodeSpace(this.node.parent,i.node.parent,this.node.x,this.node.y),i.node.getBoundingBox().contains(n)?this.letter!=i.letter?[3,2]:("C"==this.letter?l.default.instance.playVoice("Big C"):"c"==this.letter?l.default.instance.playVoice("Small c"):"D"==this.letter?l.default.instance.playVoice("Big D"):"d"==this.letter&&l.default.instance.playVoice("Small d"),i.put(this),[2]):[3,4]):[3,5];case 2:return l.default.instance.playVoice("wrong"),[4,l.default.instance.shakeBtnByNode(this.node)];case 3:o.sent(),o.label=4;case 4:return e++,[3,1];case 5:return this.goBack(),[2]}})})},e.prototype.goBack=function(){return s(this,void 0,void 0,function(){var t=this;return a(this,function(){return[2,new Promise(function(e){cc.tween(t.node).to(.3,{x:t.lastPos.x,y:t.lastPos.y}).call(function(){e()}).start()})]})})},e.poses=[cc.v2(-250,93.153),cc.v2(-150,93.153),cc.v2(-50,93.153),cc.v2(50,93.153),cc.v2(150,93.153),cc.v2(250,93.153)],r([d(cc.Vec2)],e.prototype,"lastPos",void 0),r([p],e)}(cc.Component);i.default=f,cc._RF.pop()},{"./DroppableLetter":"DroppableLetter","./FloatMain":"FloatMain","./FloatUtil":"FloatUtil"}],DroppableLetter:[function(t,e,i){"use strict";cc._RF.push(e,"71842vvhKZAXLZ7eIwV4F5Y","DroppableLetter");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function s(t){try{c(n.next(t))}catch(e){r(e)}}function a(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var i,n,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var c=t("./FloatMain"),l=t("./FloatUtil"),h=t("./Unit"),u=cc._decorator,p=u.ccclass,d=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.poses=[cc.v2(0,37),cc.v2(-45,-31),cc.v2(45,-31)],e.usages=[0,0,0],e.other=null,e.letter="",e}return o(e,t),e.prototype.put=function(t){return s(this,void 0,void 0,function(){var e,i,n,o;return a(this,function(r){switch(r.label){case 0:e=0,r.label=1;case 1:return e<this.usages.length?0!=this.usages[e]?[3,5]:(i=l.default.convertToNodeSpace(this.node,this.node.parent,this.poses[e]),[4,this.moveTo(t,i)]):[3,6];case 2:return r.sent(),this.usages[e]=1,this.isCompleted()?((n=c.default.instance).canDrag=!1,n.currResolve?(o=n.currResolve,n.currResolve=null,console.log("answer is right, continue>>>>>"),[4,n.tigo.play(h.default.TIGO_HAPPY)]):[3,4]):[3,4];case 3:r.sent(),o(),r.label=4;case 4:return[3,6];case 5:return e++,[3,1];case 6:return[2]}})})},e.prototype.isCompleted=function(){return this.isFull()&&this.other.isFull()},e.prototype.isFull=function(){for(var t=!0,e=0;e<this.usages.length;e++)if(0==this.usages[e]){t=!1;break}return t},e.prototype.moveTo=function(t,e){return s(this,void 0,void 0,function(){return a(this,function(){return[2,new Promise(function(i){cc.tween(t.node).to(.2,{x:e.x,y:e.y}).call(function(){i()}).start()})]})})},e.prototype.reset=function(){for(var t=0;t<this.usages.length;t++)this.usages[t]=0},e.prototype.onLoad=function(){},e.prototype.start=function(){},r([p],e)}(cc.Component));i.default=d,cc._RF.pop()},{"./FloatMain":"FloatMain","./FloatUtil":"FloatUtil","./Unit":"Unit"}],FloatMain:[function(t,e,i){"use strict";cc._RF.push(e,"9ae25dyss9MXqobA/2e2cpV","FloatMain");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function s(t){try{c(n.next(t))}catch(e){r(e)}}function a(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var i,n,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var c=t("./DragableLetter"),l=t("./DroppableLetter"),h=t("./FloatUtil"),u=t("./Unit"),p=t("../../common/Tigo"),d=t("../../common/GameData"),f=t("../../common/mic/recordAin"),g=t("../../common/notifierCenter"),y=t("../../../kit/system/audio/AudioManager"),_=t("../../common/hand/HandEn"),b=cc._decorator,v=b.ccclass,m=b.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.map=null,e.board=null,e.highlight=null,e.btn_c=null,e.btn_d=null,e.boat=null,e.black_mask=null,e.trumpet=null,e.tip=null,e.tigoInMap=null,e.tigoInBoat=null,e.tigoOnSnail=null,e.monster1=null,e.monster2=null,e.monster3=null,e.snail=null,e.box1=null,e.box=null,e.tigo=null,e.boardPosY=666,e.screenSize=null,e.screenRealSize=null,e.screenScaledSize=null,e.isDev=!1,e.currStage=1,e.big_letter=null,e.mapRight=0,e.mapLeft=0,e.barLeft=-205,e.barRight=205,e.bgLeft=0,e.bgRight=0,e.cursor=null,e.farBg=null,e.currMapScale=1,e.ui=null,e.mic=null,e.reward=null,e.gid=1,e.coin=null,e.hand=null,e.currTime=0,e.canDrag=!1,e.currBigLetterDestPos=null,e.isBoardShowing=!1,e.currAnswer="C",e.currResolve=null,e.tweenBtnC=null,e.tweenBtnD=null,e.isFollow=!1,e.currFollowUnit=null,e.timer_drag=0,e.timer_drag_callback=null,e.timer_select=0,e.timer_select_callback=null,e.record_num=0,e.wrongNum=0,e.currAction="",e.currWord="",e}var i;return o(e,t),i=e,e.prototype.init=function(){window.webframe||(window.webframe={}),window.webframe.Notify||(window.webframe.Notify=new g.default),window.webframe.Notify.listen("callCocos_data",this.receiveAppData,this,!1),i.instance=this,this.board=this.getNodeFromMap("board"),this.btn_c=cc.find("btn_c",this.board),this.btn_d=cc.find("btn_d",this.board),this.hand=cc.find("handen",this.board).getComponent(_.default),this.hand.mask.active=!1,this.hand.node.active=!1,this.trumpet=cc.find("voice",this.board),this.highlight=cc.find("blur_small",this.board);var t=this.getNodeFromMap("p_born");this.screenRealSize=cc.size(cc.Canvas.instance.designResolution.width,cc.Canvas.instance.designResolution.height),this.currMapScale=this.screenRealSize.height/this.map.height,this.map.scale=this.currMapScale;var e=this.screenRealSize.width/this.screenRealSize.height*this.map.height;this.screenSize=cc.size(e,this.map.height),console.log("screen size:"+this.screenSize.width+","+this.screenSize.height),this.map.x=0,this.mapLeft=0,this.mapRight=this.map.width-this.screenSize.width,this.farBg=cc.find("far_bg",this.node),this.farBg.scale=this.currMapScale,this.bgLeft=-this.farBg.width+this.screenSize.width,this.bgRight=0,this.farBg.x=this.bgRight,this.switchTigo(this.tigoInMap),this.tigo.node.x=t.x,this.black_mask.opacity=0,this.tip.node.opacity=0,this.boat.opacity=0,this.snail.node.opacity=0;var n=this.getNodeFromMap("p_boat1");this.boat.x=n.x;var o=this.getNodeFromMap("p_snail1");this.snail.node.x=o.x,this.tigoInBoat.node.active=!1,this.tigoOnSnail.node.active=!1,this.big_letter=cc.find("big_letter",this.board).getComponent(cc.Label),this.big_letter.node.active=!1;var r=cc.find("ui",this.node),s=cc.find("progress_bar",r);if(this.cursor=cc.find("cursor",s),!this.isDev){for(var a=0;a<this.map.children.length;a++)(c=this.map.children[a]).name.startsWith("p_")&&(cc.find("bg",c).active=!1);for(a=0;a<this.boat.children.length;a++)(c=this.boat.children[a]).name.startsWith("p_")&&(cc.find("bg",c).active=!1);for(a=0;a<this.snail.node.children.length;a++)(c=this.snail.node.children[a]).name.startsWith("p_")&&(cc.find("bg",c).active=!1);for(a=0;a<this.board.children.length;a++){var c;(c=this.board.children[a]).name.startsWith("p_")&&(cc.find("bg",c).active=!1)}}this.ui=cc.find("ui",this.node),this.mic=cc.find("mic",this.board),this.reward=cc.find("reward",this.ui).getComponent(u.default),this.coin=cc.find("coin_mid",this.ui).getComponent(u.default)},e.prototype.onDisable=function(){window.webframe&&window.webframe.Notify.ignore("callCocos_data",this.receiveAppData,this,!1)},e.prototype.fixScreen=function(){},e.prototype.sleep=function(t){return s(this,void 0,void 0,function(){var e=this;return a(this,function(){return this.currTime=Date.now(),[2,new Promise(function(i){e.scheduleOnce(function(){i()},t)})]})})},e.prototype.switchTigo=function(t){this.tigo&&(this.tigo.node.active=!1),t.node.active=!0,this.tigo=t},e.prototype.getNodeFromMap=function(t){return cc.find(t,this.map)},e.prototype.answerQuestion=function(t){return s(this,void 0,void 0,function(){var e=this;return a(this,function(){return[2,new Promise(function(i){return s(e,void 0,void 0,function(){var e,n,o,r,p,d,f,g,y,_,b,v,m,w,S,x,T,M,E,O,C,F,D,N,R,I,k,A,P,L,B,G,V=this;return a(this,function(j){switch(j.label){case 0:for(e=function(){return s(V,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this.big_letter.node.active=!1,[4,this.showBoard(!1)];case 1:return t.sent(),i(),[2]}})})},n=cc.find("Cc",this.btn_c),o=cc.find("Dd",this.btn_d),this.enableBtns(!1),r=this.currStage>=1&&this.currStage<=4,cc.find("voice",this.board).active=r,k=0;k<6;k++)(_=cc.find("bletter"+(k+1),this.board)).active=5==this.currStage||6==this.currStage,p=c.default.poses[k],_.x=p.x,_.y=p.y,_.opacity=255;if((d=cc.find("drag_area",this.board)).active=5==this.currStage||6==this.currStage,d.opacity=255,f=cc.find("lc",this.board),g=cc.find("ld",this.board),d.active?(f.active=!0,g.active=!0):(f.active=!1,g.active=!1),1==this.currStage)this.big_letter.string="C",n.getComponent(cc.RichText).string="<color=#F4AC5E>Cc</color>",o.getComponent(cc.RichText).string="<color=#F4AC5E>Dd</color>";else if(2==this.currStage)this.big_letter.string="D",n.getComponent(cc.RichText).string="<color=#F4AC5E>Cc</color>",o.getComponent(cc.RichText).string="<color=#F4AC5E>Dd</color>";else if(3==this.currStage)this.big_letter.string="c",n.getComponent(cc.RichText).string="<color=#F4AC5E>c</c><color=#f4c46a>ow</color>",o.getComponent(cc.RichText).string="<color=#F4AC5E>d</c><color=#f4c46a>og</color>";else if(4==this.currStage)this.big_letter.string="d",n.getComponent(cc.RichText).string="<color=#F4AC5E>c</c><color=#f4c46a>arrot</color>",o.getComponent(cc.RichText).string="<color=#F4AC5E>d</c><color=#f4c46a>uck</color>";else if(5==this.currStage){for(d.active=!1,this.canDrag=!1,this.big_letter.string="",n.getComponent(cc.RichText).string="",o.getComponent(cc.RichText).string="",y=["C","C","c","C","c","c"],f.getComponent(cc.Label).string="C",g.getComponent(cc.Label).string="c",f.active=!0,f.opacity=74,g.active=!0,g.opacity=74,k=0;k<6;k++)_=cc.find("bletter"+(k+1),this.board),cc.find("l",_).getComponent(cc.Label).string=y[k],_.x=c.default.poses[k].x,_.y=c.default.poses[k].y,_.getComponent(c.default).lastPos=c.default.poses[k],_.getComponent(c.default).letter=y[k];(b=this.btn_c.getComponent(l.default)).reset(),b.letter="C",(v=this.btn_d.getComponent(l.default)).reset(),v.letter="c",b.other=v,v.other=b,cc.find("voice",this.board).active=!1}else if(6==this.currStage){for(d.active=!1,d.opacity=255,this.canDrag=!1,this.big_letter.string="",n.getComponent(cc.RichText).string="",o.getComponent(cc.RichText).string="",y=["d","d","D","D","d","D"],f.getComponent(cc.Label).string="D",g.getComponent(cc.Label).string="d",f.active=!0,f.opacity=74,g.active=!0,g.opacity=74,k=0;k<6;k++)_=cc.find("bletter"+(k+1),this.board),cc.find("l",_).getComponent(cc.Label).string=y[k],_.x=c.default.poses[k].x,_.y=c.default.poses[k].y,_.getComponent(c.default).lastPos=c.default.poses[k],_.getComponent(c.default).letter=y[k];(b=this.btn_c.getComponent(l.default)).reset(),b.letter="D",(v=this.btn_d.getComponent(l.default)).reset(),v.letter="d",b.other=v,v.other=b,cc.find("voice",this.board).active=!1}else 7==this.currStage?(this.big_letter.string="C",n.getComponent(cc.RichText).string="Cc",o.getComponent(cc.RichText).string="",m=cc.find("p_center",this.board),this.btn_c.x=m.x,this.btn_d.active=!1,this.btn_c.y=m.y+90,this.highlight.y=this.btn_c.y,this.wrongNum=0,this.currWord="see"):8==this.currStage&&(this.big_letter.string="d",n.getComponent(cc.RichText).string="Dd",o.getComponent(cc.RichText).string="",m=cc.find("p_center",this.board),this.btn_c.x=m.x,this.btn_c.y=m.y+90,this.btn_d.active=!1,this.highlight.y=this.btn_c.y,this.wrongNum=0,this.currWord="dee");return[4,this.showBoard(!0)];case 1:return j.sent(),this.playTrumpet("voice"),1!=this.currStage?[3,5]:[4,this.playVoice("listen and click")];case 2:return j.sent(),[4,this.sleep(1)];case 3:return j.sent(),[4,this.playVoice("C")];case 4:return j.sent(),[3,23];case 5:return 2!=this.currStage?[3,9]:[4,this.playVoice("listen and click")];case 6:return j.sent(),[4,this.sleep(1)];case 7:return j.sent(),[4,this.playVoice("D")];case 8:return j.sent(),[3,23];case 9:return 3!=this.currStage?[3,11]:[4,this.playVoice('find the "c" in the words')];case 10:return j.sent(),[3,23];case 11:return 4!=this.currStage?[3,13]:[4,this.playVoice('find the "d" in the words')];case 12:return j.sent(),[3,23];case 13:return 5!=this.currStage?[3,15]:[4,this.playVoice("Drag and drop")];case 14:return j.sent(),[3,23];case 15:return 6!=this.currStage?[3,17]:[4,this.playVoice("Drag and drop")];case 16:return j.sent(),[3,23];case 17:return 7!=this.currStage?[3,19]:[4,this.playVoice("Listen and say, C.")];case 18:return j.sent(),[3,23];case 19:return 8!=this.currStage?[3,21]:[4,this.playVoice("Listen and say, D.")];case 20:return j.sent(),[3,23];case 21:return[4,this.playVoice("listen and click")];case 22:j.sent(),j.label=23;case 23:return this.playTrumpet("voice_end"),[4,this.waitingForAnswer(t)];case 24:return j.sent(),w=.5,1!=this.currStage&&2!=this.currStage?[3,26]:(this.highlight.active=!1,[4,this.hideBoard(w)]);case 25:return j.sent(),A=cc.find("p_center",this.board),P=this.getNodeFromMap("p_letter"+this.currStage),L=h.default.convertToNodeSpace(this.map,this.board,P.x,P.y),B=cc.find("p_l"+this.currStage,this.board),this.big_letter.node.x=B.x,this.big_letter.node.y=B.y,this.big_letter.node.active=!0,this.big_letter.node.opacity=255,1==this.currStage?((S=cc.find("unit_C",this.big_letter.node).getComponent(u.default)).play("idle2"),this.big_letter.string="",this.big_letter.node.scale=.1,S.node.active=!0,cc.tween(this.big_letter.node).to(w,{x:A.x}).delay(1).to(w,{x:L.x,y:L.y,scale:1}).call(function(){V.playVoice("blink"),S.play("shan")}).delay(.5).call(function(){S.node.active=!1,e()}).start()):((x=cc.find("unit_D",this.big_letter.node).getComponent(u.default)).play("idle2"),this.big_letter.string="",this.big_letter.node.scale=.1,x.node.active=!0,cc.tween(this.big_letter.node).to(w,{x:A.x}).delay(1).to(w,{x:L.x,y:L.y}).call(function(){V.playVoice("blink"),x.play("shan")}).delay(.5).call(function(){x.node.active=!1,e()}).start()),[3,32];case 26:return 3!=this.currStage&&4!=this.currStage?[3,28]:(this.highlight.active=!1,[4,this.hideBoard(w)]);case 27:return j.sent(),A=cc.find("p_center",this.board),P=this.getNodeFromMap("p_letter"+this.currStage),L=h.default.convertToNodeSpace(this.map,this.board,P.x,P.y),B=cc.find("p_l"+this.currStage,this.board),this.big_letter.node.x=B.x,this.big_letter.node.y=B.y,this.big_letter.node.active=!0,this.big_letter.node.opacity=255,T=null,3==this.currStage?((T=cc.find("unit_c",this.big_letter.node).getComponent(u.default)).play("idle2"),this.big_letter.string="",this.big_letter.node.scale=.1,T.node.active=!0):((T=cc.find("unit_d",this.big_letter.node).getComponent(u.default)).play("idle2"),this.big_letter.string="",this.big_letter.node.scale=.1,T.node.active=!0),cc.tween(this.big_letter.node).to(w,{x:A.x}).delay(1).to(w,{x:L.x,y:L.y}).call(function(){V.playVoice("blink"),T.play("shan")}).delay(.5).call(e).start(),[3,32];case 28:return 5!=this.currStage&&6!=this.currStage?[3,30]:(this.highlight.active=!1,this.big_letter.node.active=!1,[4,this.hideBoard(w)]);case 29:for(j.sent(),M=cc.find("p_center",this.board),P=this.getNodeFromMap("p_letter"+this.currStage),E=h.default.convertToNodeSpace(this.map,this.board,P.x,P.y),O=!1,C=function(){O||(O=!0,e())},F=null,D=null,N=!1,5==this.currStage?((F=cc.find("unit_C",this.big_letter.node).getComponent(u.default)).play("idle2"),this.big_letter.string="",this.big_letter.node.scale=.1,F.node.active=!0,D=function(){0==N&&(N=!0,V.big_letter.node.x=M.x,V.big_letter.node.y=M.y,V.big_letter.node.active=!0,cc.tween(V.big_letter.node).delay(1).to(w,{x:E.x,y:E.y}).call(function(){V.playVoice("blink"),F.play("shan")}).delay(.5).call(function(){C()}).start())}):((F=cc.find("unit_D",this.big_letter.node).getComponent(u.default)).play("idle2"),this.big_letter.string="",this.big_letter.node.scale=.1,F.node.active=!0,D=function(){0==N&&(N=!0,V.big_letter.node.x=M.x,V.big_letter.node.y=M.y,V.big_letter.node.active=!0,cc.tween(V.big_letter.node).delay(1).to(w,{x:E.x,y:E.y,scaleX:.3,scaleY:.4}).call(function(){V.playVoice("blink"),F.play("shan")}).delay(.5).call(function(){C()}).start())}),R=function(t){var e=cc.find("bletter"+(t+1),I.board).getComponent(c.default);"C"!=e.letter&&"D"!=e.letter||cc.tween(e.node).to(w,{x:M.x,y:M.y}).call(function(){e.node.active=!1,D()}).start()},I=this,k=0;k<6;k++)R(k);return[3,32];case 30:return 7!=this.currStage&&8!=this.currStage?[3,32]:(this.highlight.active=!1,[4,this.hideBoard(w)]);case 31:j.sent(),A=cc.find("p_center",this.board),P=this.getNodeFromMap("p_letter"+this.currStage),L=h.default.convertToNodeSpace(this.map,this.board,P.x,P.y),B=A,this.big_letter.node.x=B.x,this.big_letter.node.y=B.y,this.big_letter.node.active=!0,this.big_letter.node.opacity=255,G=null,7==this.currStage?((G=cc.find("unit_c",this.big_letter.node).getComponent(u.default)).play("idle2"),this.big_letter.string="",this.big_letter.node.scale=.1,G.node.active=!0):((G=cc.find("unit_d",this.big_letter.node).getComponent(u.default)).play("idle2"),this.big_letter.string="",this.big_letter.node.scale=.1,G.node.active=!0),cc.tween(this.big_letter.node).to(w,{x:L.x,y:L.y,scale:7==this.currStage?.1:.5}).call(function(){V.playVoice("blink"),G.play("shan")}).delay(.5).call(e).start(),j.label=32;case 32:return[2]}})})})]})})},e.prototype.runStage1=function(){return s(this,void 0,void 0,function(){var t,e,i,n;return a(this,function(o){switch(o.label){case 0:return this.currStage=1,this.setHighlight(),[4,this.tigo.jumpTo(this.getNodeFromMap("p_start"))];case 1:return o.sent(),this.tigo.play(u.default.TIGO_IDLE,!0),this.followMap(!0,this.tigo.node),[4,this.tigo.walkTo(this.getNodeFromMap("p_dock"))];case 2:return o.sent(),this.tigo.play(u.default.TIGO_SCRATCH,!0),[4,this.sleep(1)];case 3:return o.sent(),this.followMap(!1),[4,this.moveMap(this.getNodeFromMap("p_boat_view").x)];case 4:return o.sent(),[4,this.answerQuestion("C")];case 5:return o.sent(),this.playVoice("appear"),[4,this.fade(this.boat,255,1.5)];case 6:return o.sent(),this.switchTigo(this.tigoInBoat),t=cc.find("p_on_land",this.boat),this.tigo.node.x=t.x,this.tigo.node.y=t.y,e=cc.find("p_in_boat",this.boat),[4,this.tigo.jumpTo(e)];case 7:return o.sent(),this.tigo.play(u.default.TIGO_IDLE,!0),this.followMap(!0,this.boat),y.default.playLoopEffect("Float","sound/SE_qihuanpiaoliu_03"),[4,this.moveTo(this.boat,this.getNodeFromMap("p_boat2").x)];case 8:return o.sent(),y.default.stopLoopEffect("sound/SE_qihuanpiaoliu_03"),i=cc.find("p_on_land2",this.boat),[4,this.tigo.jumpTo(i)];case 9:return o.sent(),this.switchTigo(this.tigoInMap),n=this.getNodeFromMap("p_landing1"),this.tigo.node.x=n.x,this.tigo.node.y=n.y,this.tigo.play(u.default.TIGO_IDLE,!0),[4,this.moveMap(this.tigo.node.x)];case 10:return o.sent(),[2]}})})},e.prototype.runStage2=function(){return s(this,void 0,void 0,function(){var t,e,i,n;return a(this,function(o){switch(o.label){case 0:return this.currStage=2,this.isDev?(t=this.getNodeFromMap("p_landing1"),this.tigo.node.x=t.x,this.tigo.node.y=t.y,this.followMap(!1),[4,this.moveMap(this.tigo.node.x)]):[3,2];case 1:o.sent(),o.label=2;case 2:return e=cc.find("p_c",this.board),i=cc.find("p_d",this.board),this.btn_c.x=e.x,this.btn_d.x=i.x,this.btn_c.opacity=255,this.btn_d.opacity=255,this.followMap(!0,this.tigo.node),this.setHighlight(),[4,this.tigo.walkTo(this.getNodeFromMap("p_vine"))];case 3:return o.sent(),this.tigo.play(u.default.TIGO_SCRATCH,!0),[4,this.sleep(1)];case 4:return o.sent(),this.followMap(!1),[4,this.moveMap(this.getNodeFromMap("p_vine_view").x)];case 5:return o.sent(),[4,this.answerQuestion("D")];case 6:return o.sent(),this.tigo.showVine(!0),this.playVoice("slide"),[4,this.tigo.play(u.default.TIGO_MOVE)];case 7:return o.sent(),[4,this.sleep(.3)];case 8:return o.sent(),this.tigo.showVine(!1),n=this.getNodeFromMap("p_vine1_land"),this.tigo.node.x=n.x,this.tigo.node.y=n.y,this.tigo.play(u.default.TIGO_IDLE,!0),[4,this.moveMap(n.x)];case 9:return o.sent(),[2]}})})},e.prototype.runStage3=function(){return s(this,void 0,void 0,function(){var t,e,i=this;return a(this,function(n){switch(n.label){case 0:return this.currStage=3,this.isDev?(t=this.getNodeFromMap("p_vine1_land"),this.tigo.node.x=t.x,this.tigo.node.y=t.y,this.followMap(!1),[4,this.moveMap(this.tigo.node.x)]):[3,2];case 1:n.sent(),n.label=2;case 2:return this.setHighlight(),e=this.getNodeFromMap("p_m1"),this.followMap(!0,this.tigo.node),[4,this.tigo.walkTo(e)];case 3:return n.sent(),this.tigo.play(u.default.TIGO_SCRATCH,!0),[4,this.sleep(1)];case 4:return n.sent(),this.followMap(!1),[4,this.moveMap(this.getNodeFromMap("p_m1_view").x)];case 5:return n.sent(),[4,this.answerQuestion("C")];case 6:return n.sent(),this.playVoice("wave"),this.tigo.play(u.default.TIGO_SHOOT1).then(function(){i.tigo.play(u.default.TIGO_IDLE,!0)}),[4,this.sleep(.5)];case 7:return n.sent(),this.playVoice("destroyed"),[4,this.monster1.play(u.default.MONSTER1_HITTED)];case 8:return n.sent(),this.playVoice("disappear"),[4,this.monster1.play(u.default.MONSTER1_DISAPPEAR)];case 9:return n.sent(),this.tigo.play(u.default.TIGO_IDLE,!0),[2]}})})},e.prototype.runStage4=function(){return s(this,void 0,void 0,function(){var t,e,i=this;return a(this,function(n){switch(n.label){case 0:return this.currStage=4,this.isDev?(t=this.getNodeFromMap("p_m1"),this.tigo.node.x=t.x,this.tigo.node.y=t.y,this.followMap(!1),[4,this.moveMap(this.getNodeFromMap("p_m1_view").x)]):[3,2];case 1:n.sent(),n.label=2;case 2:return this.setHighlight(),e=this.getNodeFromMap("p_m2"),this.followMap(!0,this.tigo.node),[4,this.tigo.walkTo(e)];case 3:return n.sent(),this.tigo.play(u.default.TIGO_SCRATCH,!0),[4,this.sleep(1)];case 4:return n.sent(),this.followMap(!1),[4,this.moveMap(this.getNodeFromMap("p_m2_view").x)];case 5:return n.sent(),[4,this.answerQuestion("D")];case 6:return n.sent(),this.playVoice("wave"),this.tigo.play(u.default.TIGO_SHOOT2).then(function(){i.tigo.play(u.default.TIGO_IDLE,!0)}),[4,this.sleep(.2)];case 7:return n.sent(),this.playVoice("destroyed"),[4,this.monster2.play(u.default.MONSTER2_HITTED)];case 8:return n.sent(),this.playVoice("disappear"),[4,this.monster2.play(u.default.MONSTER2_DISAPPEAR)];case 9:return n.sent(),this.tigo.play(u.default.TIGO_IDLE,!0),[2]}})})},e.prototype.runStage5=function(){return s(this,void 0,void 0,function(){var t,e;return a(this,function(i){switch(i.label){case 0:return this.currStage=5,this.isDev?(t=this.getNodeFromMap("p_m2"),this.tigo.node.x=t.x,this.tigo.node.y=t.y,this.followMap(!1),[4,this.moveMap(this.getNodeFromMap("p_m2_view").x)]):[3,2];case 1:i.sent(),i.label=2;case 2:return this.followMap(!0,this.tigo.node),this.setHighlight(),[4,this.sleep(1)];case 3:return i.sent(),[4,this.tigo.walkTo(this.getNodeFromMap("p_tree"))];case 4:return i.sent(),this.tigo.play(u.default.TIGO_SCRATCH,!0),[4,this.sleep(1)];case 5:return i.sent(),this.followMap(!1),[4,this.moveMap(this.getNodeFromMap("p_grab_view").x)];case 6:return i.sent(),[4,this.answerQuestion("C")];case 7:return i.sent(),this.playVoice("machine"),[4,this.tigo.play(u.default.TIGO_GRAB)];case 8:return i.sent(),[4,this.sleep(.3)];case 9:return i.sent(),e=this.getNodeFromMap("p_grab_land"),this.tigo.node.x=e.x,this.tigo.node.y=e.y,this.tigo.play(u.default.TIGO_IDLE,!0),[4,this.moveMap(e.x)];case 10:return i.sent(),[2]}})})},e.prototype.runStage6=function(){return s(this,void 0,void 0,function(){var t,e,i,n;return a(this,function(o){switch(o.label){case 0:return this.currStage=6,this.isDev?(t=this.getNodeFromMap("p_grab_land"),this.tigo.node.x=t.x,this.tigo.node.y=t.y,this.followMap(!1),[4,this.moveMap(this.getNodeFromMap("p_grab_land").x)]):[3,2];case 1:o.sent(),o.label=2;case 2:return this.setHighlight(),e=this.getNodeFromMap("p_stone"),this.followMap(!0,this.tigo.node),[4,this.tigo.walkTo(e)];case 3:return o.sent(),this.tigo.play(u.default.TIGO_SCRATCH,!0),[4,this.sleep(1)];case 4:return o.sent(),this.followMap(!1),[4,this.moveMap(this.getNodeFromMap("p_stone_view").x)];case 5:return o.sent(),this.tigo.play(u.default.TIGO_IDLE,!0),[4,this.answerQuestion("D")];case 6:return o.sent(),i=cc.find("stone_cover",this.map),this.playVoice("open"),[4,this.fade(i,0,2)];case 7:return o.sent(),n=this.getNodeFromMap("p_stone2"),[4,this.tigo.jumpTo(n)];case 8:return o.sent(),this.tigo.play(u.default.TIGO_IDLE,!0),[4,this.moveMap(this.tigo.node.x)];case 9:return o.sent(),[2]}})})},e.prototype.runStage7=function(){return s(this,void 0,void 0,function(){var t,e,i=this;return a(this,function(n){switch(n.label){case 0:return this.currStage=7,this.isDev?(t=this.getNodeFromMap("p_stone2"),this.tigo.node.x=t.x,this.tigo.node.y=t.y,this.followMap(!1),[4,this.moveMap(this.tigo.node.x)]):[3,2];case 1:n.sent(),n.label=2;case 2:return this.setHighlight(),e=this.getNodeFromMap("p_m3"),this.followMap(!0,this.tigo.node),[4,this.tigo.walkTo(e)];case 3:return n.sent(),this.tigo.play(u.default.TIGO_SCRATCH,!0),[4,this.sleep(1)];case 4:return n.sent(),this.followMap(!1),[4,this.moveMap(this.getNodeFromMap("p_m3_view").x)];case 5:return n.sent(),[4,this.answerQuestion("C")];case 6:return n.sent(),this.tigo.play(u.default.TIGO_SHOOT3).then(function(){i.tigo.play(u.default.TIGO_IDLE,!0)}),[4,this.sleep(.2)];case 7:return n.sent(),this.playVoice("destroyed"),[4,this.monster3.play(u.default.MONSTER3_HITTED)];case 8:return n.sent(),this.playVoice("disappear"),[4,this.monster3.play(u.default.MONSTER3_DISAPPEAR)];case 9:return n.sent(),this.tigo.play(u.default.TIGO_IDLE,!0),[2]}})})},e.prototype.runStage8=function(){return s(this,void 0,void 0,function(){var t,e,i,n,o,r;return a(this,function(s){switch(s.label){case 0:return this.currStage=8,this.isDev?(t=this.getNodeFromMap("p_m3"),this.tigo.node.x=t.x,this.tigo.node.y=t.y,this.followMap(!1),[4,this.moveMap(this.getNodeFromMap("p_m3_view").x)]):[3,2];case 1:s.sent(),s.label=2;case 2:return this.setHighlight(),e=this.getNodeFromMap("p_snail"),this.followMap(!0,this.tigo.node),[4,this.tigo.walkTo(e)];case 3:return s.sent(),this.tigo.play(u.default.TIGO_SCRATCH,!0),[4,this.sleep(1)];case 4:return s.sent(),[4,this.moveMap(this.getNodeFromMap("p_snail_view").x)];case 5:return s.sent(),[4,this.answerQuestion("D")];case 6:return s.sent(),[4,this.fade(this.snail.node,255,1.5)];case 7:return s.sent(),this.switchTigo(this.tigoOnSnail),i=cc.find("p_snail_land1",this.snail.node),this.tigo.node.x=i.x,this.tigo.node.y=i.y,n=cc.find("p_snail_ride",this.snail.node),[4,this.tigo.jumpTo(n)];case 8:return s.sent(),this.tigo.play(u.default.TIGO_IDLE,!0),this.followMap(!0,this.snail.node),y.default.playLoopEffect("Float","sound/SE_qihuanpiaoliu_03"),[4,this.moveTo(this.snail.node,this.getNodeFromMap("p_snail2").x)];case 9:return s.sent(),y.default.stopLoopEffect("sound/SE_qihuanpiaoliu_03"),o=cc.find("p_snail_land2",this.snail.node),[4,this.tigo.jumpTo(o)];case 10:return s.sent(),this.switchTigo(this.tigoInMap),r=this.getNodeFromMap("p_landing2"),this.tigo.node.x=r.x,this.tigo.play(u.default.TIGO_IDLE,!0),this.followMap(!1),[4,this.moveMap(this.tigo.node.x)];case 11:return s.sent(),this.followMap(!0,this.tigo.node),[4,this.tigo.walkTo(this.getNodeFromMap("p_box"))];case 12:return s.sent(),[4,this.box.play(u.default.BOX_OPENING)];case 13:return s.sent(),this.box.play(u.default.BOX_OPENED),y.default.playEffect("Float","sound/amazing"),[4,this.tigo.play(u.default.TIGO_SURPRISE,!0)];case 14:return s.sent(),this.tigo.play(u.default.TIGO_IDLE,!0),[2]}})})},e.prototype.enableBtns=function(t){this.btn_c.getComponent(cc.Button).enabled=t,this.btn_d.getComponent(cc.Button).enabled=t},e.prototype.start=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this.init(),[4,this.sleep(2)];case 1:return t.sent(),[4,this.runStage1()];case 2:return t.sent(),[4,this.runStage2()];case 3:return t.sent(),[4,this.runStage3()];case 4:return t.sent(),[4,this.runStage4()];case 5:return t.sent(),[4,this.runStage5()];case 6:return t.sent(),[4,this.runStage6()];case 7:return t.sent(),[4,this.runStage7()];case 8:return t.sent(),[4,this.runStage8()];case 9:return t.sent(),this.reward.node.active=!0,[4,this.reward.play("caidai")];case 10:return t.sent(),[4,this.sleep(1)];case 11:return t.sent(),this.coin.node.active=!0,y.default.playEffect("Float","sound/coin_large"),[4,this.coin.play("Animation")];case 12:return t.sent(),p.default.callAppToClose("replayOrNext",!0),[2]}})})},e.prototype.hideBoard=function(t){return s(this,void 0,void 0,function(){var e,i,n,o,r,s,l,h,u,p;return a(this,function(){for(e=cc.find("box",this.board),this.fade(e,0,t),this.highlight.active=!1,i=cc.find("btn_c",this.board),this.fade(i,0,t),n=cc.find("btn_d",this.board),this.fade(n,0,t),o=cc.find("voice",this.board),this.fade(this.black_mask,0,t/4),r=cc.find("drag_area",this.board),s=cc.find("lc",this.board),this.fade(s,0,t/4),l=cc.find("ld",this.board),this.fade(l,0,t/4),r.active=!1,this.mic.active=!1,h=0;h<6;h++)u=cc.find("bletter"+(h+1),this.board),"C"==(p=u.getComponent(c.default)).letter||"D"==p.letter||this.fade(u,t);return[2,this.fade(o,0,t)]})})},e.prototype.initBoard=function(){cc.find("box",this.board).opacity=255,this.highlight.active=!1,cc.find("btn_c",this.board).opacity=255,cc.find("btn_d",this.board).opacity=255,cc.find("voice",this.board).opacity=255},e.prototype.showBoard=function(t){return s(this,void 0,void 0,function(){var e,i,n=this;return a(this,function(){return e=0,i=123,t||(e=this.boardPosY,i=0),this.board.x=-this.map.x/this.currMapScale+this.screenSize.width/2,this.board.y=this.boardPosY,this.initBoard(),[2,new Promise(function(o){cc.tween(n.board).to(.5,{y:e},{easing:"backOut"}).call(function(){n.isBoardShowing=t,o()}).start(),n.fade(n.black_mask,i,.5)})]})})},e.prototype.getBtn=function(t){return"C"==t?this.btn_c:this.btn_d},e.prototype.scaleBtn=function(t){return cc.tween(t).to(.2,{scale:1.2},{easing:"sineOut"}).to(.2,{scale:1},{easing:"sineIn"}).to(.2,{scale:1.2},{easing:"sineOut"}).to(.2,{scale:1},{easing:"sineIn"}).start()},e.prototype.waitingForAnswer=function(t){return s(this,void 0,void 0,function(){var e,i,n=this;return a(this,function(){return this.canDrag=!0,this.currAnswer=t,this.currStage>=1&&this.currStage<=4?(this.enableBtns(!0),this.startSelectTimer(5,function(){n.tweenBtnC=n.scaleBtn(n.btn_c),n.tweenBtnD=n.scaleBtn(n.btn_d),n.startSelectTimer(6)})):5!=this.currStage&&6!=this.currStage||(e=cc.find("bletter1",this.board),i=this.btn_c,this.hand.playDragTo(e,i,!0)),this.currStage>=7&&this.currStage<=8&&this.record(this.currWord),[2,new Promise(function(t){n.currResolve=t})]})})},e.prototype.onVoice=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this.playTrumpet("voice"),[4,this.playVoice(this.currAnswer)];case 1:return t.sent(),this.playTrumpet("voice_end"),[2]}})})},e.prototype.onSelected=function(t,e){return s(this,void 0,void 0,function(){var t;return a(this,function(i){switch(i.label){case 0:return this.enableBtns(!1),this.setHighlight(e),this.timer_select=0,null!=this.tweenBtnC&&(this.tweenBtnC.stop(),this.tweenBtnC=null,this.btn_c.scale=1),null!=this.tweenBtnD&&(this.tweenBtnD.stop(),this.tweenBtnD=null,this.btn_d.scale=1),this.currAnswer==e?[3,2]:(this.playVoice("wrong"),[4,this.shakeBtn(e)]);case 1:return i.sent(),this.enableBtns(!0),this.startSelectTimer(5),[3,3];case 2:this.currResolve&&(t=this.currResolve,this.currResolve=null,console.log("answer is right, continue>>>>>"),this.playVoice("right"),this.tigo.play(u.default.TIGO_IDLE,!0),t()),i.label=3;case 3:return[2]}})})},e.prototype.setHighlight=function(t){if(t){this.highlight.active=!0;var e=this.getBtn(t);this.highlight.x=e.x}else this.highlight.active=!1},e.prototype.shakeBtn=function(t){return s(this,void 0,void 0,function(){var e;return a(this,function(){return e=this.getBtn(t),[2,this.shakeBtnByNode(e)]})})},e.prototype.shakeBtnByNode=function(t){return s(this,void 0,void 0,function(){var e;return a(this,function(){return e=t.x,[2,new Promise(function(i){cc.tween(t).to(.1,{x:e-10}).to(.1,{x:e+10}).to(.1,{x:e-10}).to(.1,{x:e+10}).to(.1,{x:e}).call(function(){i()}).start()})]})})},e.prototype.playTrumpet=function(t){this.trumpet.getComponent(cc.Animation).play(t)},e.prototype.stopTrumpet=function(){this.trumpet.getComponent(cc.Animation).stop()},e.prototype.followMap=function(t,e){this.currFollowUnit=e,this.isFollow=t},e.prototype.getSafeMapX=function(t){return t<this.screenSize.width/2&&(t=this.screenSize.width/2),t>this.map.width-this.screenSize.width/2&&(t=this.map.width-this.screenSize.width/2),t},e.prototype.walkMap=function(t){var e=(-(t=this.getSafeMapX(t))+this.screenSize.width/2)*this.currMapScale;e>this.map.x||(this.map.x=e)},e.prototype.moveMap=function(t){return s(this,void 0,void 0,function(){var e=this;return a(this,function(){return Math.abs(-this.map.x-t),this.currMapScale,u.default.walkSpeed,t=this.getSafeMapX(t),[2,new Promise(function(i){cc.tween(e.map).to(1,{x:(-t+e.screenSize.width/2)*e.currMapScale},{easing:"sineInOut"}).call(function(){i()}).start()})]})})},e.prototype.fade=function(t,e,i){return void 0===i&&(i=1),s(this,void 0,void 0,function(){return a(this,function(){return[2,new Promise(function(n){cc.tween(t).to(i,{opacity:e},{easing:"sineOut"}).call(function(){n()}).start()})]})})},e.prototype.startDragTimer=function(t,e){void 0===e&&(e=null),this.timer_drag=t,null!=e&&(this.timer_drag_callback=e)},e.prototype.startSelectTimer=function(t,e){void 0===e&&(e=null),this.timer_select=t,null!=e&&(this.timer_select_callback=e)},e.prototype.update=function(t){if(this.isFollow&&this.currFollowUnit&&this.walkMap(this.currFollowUnit.x),this.farBg){var e=(-this.map.x-this.mapLeft)/(this.mapRight-this.mapLeft),i=e*(this.barRight-this.barLeft)+this.barLeft;this.cursor.x=i,this.bgLeft,this.bgRight,this.farBg.x=this.bgRight-(this.farBg.width-this.screenSize.width)*e}this.timer_drag>0&&(this.timer_drag-=t,this.timer_drag<=0&&null!=this.timer_drag_callback&&(0,this.timer_drag_callback)()),this.timer_select>0&&(this.timer_select-=t,this.timer_select<=0&&null!=this.timer_select_callback&&(0,this.timer_select_callback)())},e.prototype.playVoice=function(t){return s(this,void 0,void 0,function(){var e=this;return a(this,function(){return this.playTrumpet("voice"),[2,new Promise(function(i){return s(e,void 0,void 0,function(){var e=this;return a(this,function(){switch(t){case"Big C":y.default.stopEffect(),y.default.playEffect("Float","sound/big C",function(){i()});break;case"Small c":y.default.stopEffect(),y.default.playEffect("Float","sound/small c",function(){i()});break;case"Big D":y.default.stopEffect(),y.default.playEffect("Float","sound/big D",function(){i()});break;case"Small d":y.default.stopEffect(),y.default.playEffect("Float","sound/small d",function(){i()});break;case"listen and click":y.default.playEffect("Float","sound/click and listen",function(){i()});break;case"Listen and say, C.":y.default.playEffect("Float","sound/listen and say",function(){e.scheduleOnce(function(){y.default.playEffect("Float","sound/C",function(){i()})},1)});break;case"Listen and say, D.":y.default.playEffect("Float","sound/listen and say",function(){e.scheduleOnce(function(){y.default.playEffect("Float","sound/D",function(){i()})},1)});break;case"C":y.default.playEffect("Float","sound/C",function(){i()});break;case"D":y.default.playEffect("Float","sound/D",function(){i()});break;case'find the "c" in the words':y.default.playEffect("Float","sound/find the C in the words",function(){i()});break;case'find the "d" in the words':y.default.playEffect("Float","sound/find the D in the words",function(){i()});break;case"Drag and drop":y.default.playEffect("Float","sound/drag and drop",function(){i()});break;case"blink":y.default.playEffect("Float","sound/SE_qihuanpiaoliu_01",function(){i()});break;case"appear":y.default.playEffect("Float","sound/SE_qihuanpiaoliu_02",function(){i()});break;case"water":y.default.playEffect("Float","sound/SE_qihuanpiaoliu_03",function(){i()});break;case"slide":y.default.playEffect("Float","sound/SE_qihuanpiaoliu_04",function(){i()});break;case"wave":y.default.playEffect("Float","sound/SE_qihuanpiaoliu_05",function(){i()});break;case"walk":y.default.playEffect("Float","sound/SE_qihuanpiaoliu_06",function(){i()});break;case"dart":y.default.playEffect("Float","sound/SE_qihuanpiaoliu_07",function(){i()});break;case"machine":y.default.playEffect("Float","sound/SE_qihuanpiaoliu_08",function(){i()});break;case"jump":y.default.playEffect("Float","sound/SE_qihuanpiaoliu_09",function(){i()});break;case"open":y.default.playEffect("Float","sound/SE_qihuanpiaoliu_10",function(){i()});break;case"destroyed":y.default.playEffect("Float","sound/SE_qihuanpiaoliu_11",function(){i()});break;case"disappear":y.default.playEffect("Float","sound/SE_qihuanpiaoliu_12",function(){i()});break;case"box":y.default.playEffect("Float","sound/SE_qihuanpiaoliu_13",function(){i()});break;case"wrong":y.default.playEffect("Float","sound/game_error",function(){i()});break;case"right":y.default.playEffect("Float","sound/SE_qihuanpiaoliu_01",function(){i()});break;default:y.default.playEffect("Float",t,function(){i()})}return[2]})})})]})})},e.prototype.showTip=function(t){this.tip.string=t,cc.tween(this.tip.node).to(.5,{opacity:255},{easing:"sineOut"}).delay(2).to(.5,{opacity:0},{easing:"sineOut"}).start()},e.prototype.moveTo=function(t,e){return s(this,void 0,void 0,function(){var i;return a(this,function(){return i=(e-t.x)/u.default.walkSpeed,[2,new Promise(function(n){cc.tween(t).parallel(cc.tween().to(i,{x:e}).call(function(){n()}),cc.tween().repeat(2,cc.tween().by(i/8,{y:-10},{easing:"sineOut"}).by(i/4,{y:20},{easing:"sineInOut"}).by(i/8,{y:-10},{easing:"sineIn"}))).start()})]})})},e.prototype.record=function(t){var e=this;console.log("record begin"),this.mic.active=!0,this.mic.getComponent(f.default).initeAniFun(3),this.currAction="",p.default.callAppToRecord(3e3,t),this.isDev&&this.scheduleOnce(function(){e.receiveAppData({action:"TiGoRecordFinish",param:{path:""}}),e.scheduleOnce(function(){e.receiveAppData({action:"TiGoVoiceEvaluationFinish",param:{code:"200",score:30}})},2)},3)},e.prototype.playRight=function(t){return s(this,void 0,void 0,function(){var e;return a(this,function(){return this.currResolve&&(e=this.currResolve,this.currResolve=null,console.log("answer is right, continue>>>>>"),this.tigo.play(u.default.TIGO_IDLE,!0),p.default.callAppToCollect(this.gid,1004,t),this.playVoice("right"),e()),[2]})})},e.prototype.playWrong=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this.wrongNum++,this.wrongNum>=3?(this.playRight(1),[2]):[4,this.playVoice("wrong")];case 1:return t.sent(),[4,this.sleep(1)];case 2:return t.sent(),this.record(this.currWord),[2]}})})},e.prototype.receiveAppData=function(t){switch(console.warn("offbus:receiveAppData  ====  "+JSON.stringify(t)),t.action){case"TiGoRecordFinish":if(""==this.currAction){this.currAction=t.action,p.default.callAppToResult(this.currWord,t.param.path);var e=Number(d.default.record_num);e+=1,d.default.record_num=e.toString(),console.warn("record finished >>>>>>>>>")}break;case"TiGoVoiceEvaluationFinish":"TiGoRecordFinish"==this.currAction&&(this.mic.active=!1,this.currAction=t.action,200==parseInt(t.param.code)?(console.warn("evaluation code 200 >>>>>>>>>"+this.currWord),parseInt(t.param.score)>0?this.playRight(parseInt(t.param.score)):this.playWrong()):(console.warn("evaluation failed >>>>>>>>>"+this.currWord),this.playWrong()))}},e.instance=null,r([m({type:cc.Node,displayName:"\u5730\u56fe"})],e.prototype,"map",void 0),r([m({type:cc.Node,displayName:"\u8239"})],e.prototype,"boat",void 0),r([m({type:cc.Node,displayName:"\u9ed1\u80cc\u666f"})],e.prototype,"black_mask",void 0),r([m({type:cc.Label,displayName:"tip"})],e.prototype,"tip",void 0),r([m({type:u.default,displayName:"tigo map"})],e.prototype,"tigoInMap",void 0),r([m({type:u.default,displayName:"tigo boat"})],e.prototype,"tigoInBoat",void 0),r([m({type:u.default,displayName:"tigo snail"})],e.prototype,"tigoOnSnail",void 0),r([m({type:u.default,displayName:"\u602a\u7269I"})],e.prototype,"monster1",void 0),r([m({type:u.default,displayName:"\u602a\u7269II"})],e.prototype,"monster2",void 0),r([m({type:u.default,displayName:"\u602a\u7269III"})],e.prototype,"monster3",void 0),r([m({type:u.default,displayName:"\u8717\u725b"})],e.prototype,"snail",void 0),r([m({type:cc.Node,displayName:"\u5b9d\u7bb11"})],e.prototype,"box1",void 0),r([m({type:u.default,displayName:"\u5b9d\u7bb1"})],e.prototype,"box",void 0),i=r([v],e)}(cc.Component);i.default=w,cc._RF.pop()},{"../../../kit/system/audio/AudioManager":void 0,"../../common/GameData":void 0,"../../common/Tigo":void 0,"../../common/hand/HandEn":void 0,"../../common/mic/recordAin":void 0,"../../common/notifierCenter":void 0,"./DragableLetter":"DragableLetter","./DroppableLetter":"DroppableLetter","./FloatUtil":"FloatUtil","./Unit":"Unit"}],FloatUtil:[function(t,e,i){"use strict";cc._RF.push(e,"4865ffv42lMYYWU6HfA2d0T","FloatUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.convertToNodeSpace=function(t,e,i,n){var o;return o="object"==typeof i?t.convertToWorldSpaceAR(i):t.convertToWorldSpaceAR(cc.v2(i,n)),e.convertToNodeSpaceAR(o)},t}();i.default=n,cc._RF.pop()},{}],Unit:[function(t,e,i){"use strict";cc._RF.push(e,"0b52a+78XFCLrTj56LVUVpf","Unit");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function s(t){try{c(n.next(t))}catch(e){r(e)}}function a(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var i,n,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var c=t("../../../kit/system/audio/AudioManager"),l=cc._decorator,h=l.ccclass,u=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e.anchor=null,e.vine=null,e.spine_name="",e.currResolve=null,e}var i;return o(e,t),i=e,e.prototype.onLoad=function(){var t=this;if(this.spine_name==i.NAME_TIGO){var e=this.spine.findSlot("tengtiao");this.vine=e.getAttachment(),this.showVine(!1)}this.showVine(!1),this.spine.setCompleteListener(function(){if(t.currResolve){var e=t.currResolve;t.currResolve=null,e()}})},e.prototype.start=function(){},e.prototype.play=function(t,e){return void 0===e&&(e=!1),s(this,void 0,void 0,function(){var i=this;return a(this,function(){return[2,new Promise(function(n){i.spine.setAnimation(0,t,e),i.currResolve=n})]})})},e.prototype.jumpTo=function(t){return s(this,void 0,void 0,function(){var e=this;return a(this,function(){return c.default.playEffect("Float","sound/SE_qihuanpiaoliu_09"),[2,new Promise(function(n){return s(e,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return cc.tween(this.node).delay(.3).to(.4,{x:t.x,y:t.y},{easing:"sineInOut"}).start(),[4,this.play(i.TIGO_JUMP,!1)];case 1:return e.sent(),n(),[2]}})})})]})})},e.prototype.walkTo=function(t){return s(this,void 0,void 0,function(){var e,n=this;return a(this,function(){return c.default.playLoopEffect("Float","sound/SE_qihuanpiaoliu_06"),e=(t.x-this.node.x)/i.walkSpeed,[2,new Promise(function(o){n.play(i.TIGO_WALK,!0),cc.tween(n.node).delay(.1).to(e,{x:t.x}).call(function(){c.default.stopLoopEffect("sound/SE_qihuanpiaoliu_06"),o()}).start()})]})})},e.prototype.showVine=function(t){if(this.spine_name==i.NAME_TIGO){var e=this.spine.findSlot("tengtiao");t?e.setAttachment(this.vine):e.setAttachment(null)}},e.NAME_TIGO="tigo",e.TIGO_HAPPY="happy",e.TIGO_IDLE="idle",e.TIGO_JUMP="jump",e.TIGO_MOVE="move",e.TIGO_SCRATCH="naotou",e.TIGO_SHOOT1="shoot1",e.TIGO_SHOOT2="shoot2",e.TIGO_SHOOT3="shoot3",e.TIGO_SURPRISE="surprise",e.TIGO_WALK="walk",e.TIGO_GRAB="zhua",e.MONSTER1_IDLE="daiji",e.MONSTER1_HITTED="hit",e.MONSTER1_DISAPPEAR="xiaoshi",e.MONSTER2_IDLE="daiji",e.MONSTER2_HITTED="beijida",e.MONSTER2_DISAPPEAR="xiaoshi",e.MONSTER3_IDLE="daiji_idle",e.MONSTER3_HITTED="shouji_idle",e.MONSTER3_DISAPPEAR="xiaoshi_idle",e.SNAIL_IDLE="idle",e.SNAIL_HAPPY="happy",e.SNAIL_SWIM="swim",e.BOX_CLOSED="idle2",e.BOX_OPENING="open",e.BOX_OPENED="idle1",e.JUMP_DUARATION=1,e.walkSpeed=400,r([u({type:sp.Skeleton,displayName:"spine"})],e.prototype,"spine",void 0),r([u({type:cc.Node,displayName:"\u53c2\u8003\u70b9"})],e.prototype,"anchor",void 0),r([u({displayName:"\u540d\u79f0"})],e.prototype,"spine_name",void 0),i=r([h],e)}(cc.Component);i.default=p,cc._RF.pop()},{"../../../kit/system/audio/AudioManager":void 0}]},{},["DragableLetter","DroppableLetter","FloatMain","FloatUtil","Unit"]);