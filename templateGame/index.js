window.__require=function t(e,o,n){function r(c,a){if(!o[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var p="function"==typeof __require&&__require;if(!a&&p)return p(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return r(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({ComponentBase:[function(t,e,o){"use strict";cc._RF.push(e,"b3b93VNoztAmr1fnmc0vz9F","ComponentBase");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameBase=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.initData=function(t){this.gameBase=t},i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],LevelIndicator:[function(t,e,o){"use strict";cc._RF.push(e,"273f6UiSY5DDYBciC3zYB/D","LevelIndicator");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.indicatorImgs=[],e.lineImgs=[],e.itemNode=null,e.lineNode=null,e.content=null,e.indicatorNodes=[],e.lineNodes=[],e.maxRound=-1,e}return r(e,t),e.prototype.initData=function(t){this.maxRound=t,this.initIndicator()},e.prototype.initIndicator=function(){for(var t=this,e=0;e<this.maxRound;e++){var o=cc.instantiate(this.itemNode);o.active=!0,o.parent=this.content,this.indicatorNodes.push(o)}this.indicatorNodes.reverse(),this.scheduleOnce(function(){t.content.getComponent(cc.Layout).enabled=!1,t.initLine()})},e.prototype.initLine=function(){for(var t=1;t<this.maxRound;t++){var e=cc.instantiate(this.lineNode);e.active=!0,e.parent=this.content,this.lineNodes.push(e),e.zIndex=cc.macro.MIN_ZINDEX,e.x=this.indicatorNodes[t].x-this.indicatorNodes[t].width/2-9,e.getComponent(cc.Sprite).spriteFrame=this.lineImgs[1]}},e.prototype.updateCurIndicator=function(t,e){var o=e?1:2;this.indicatorNodes[t].getComponent(cc.Sprite).spriteFrame=this.indicatorImgs[o],t>0&&(this.lineNodes[t-1].getComponent(cc.Sprite).spriteFrame=this.lineImgs[0])},i([s([cc.SpriteFrame])],e.prototype,"indicatorImgs",void 0),i([s([cc.SpriteFrame])],e.prototype,"lineImgs",void 0),i([s(cc.Node)],e.prototype,"itemNode",void 0),i([s(cc.Node)],e.prototype,"lineNode",void 0),i([s(cc.Node)],e.prototype,"content",void 0),i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],PuzzleComponent:[function(t,e,o){"use strict";cc._RF.push(e,"ca155Vp2ylPFLuPKtX7T6GP","PuzzleComponent");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../../common/structure/CompEnum"),a=t("../../scripts/ComponentBase"),s=cc._decorator,p=s.ccclass,u=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.puzzleCount=-1,e.bloodCount=3,e.puzzleItemNodes=[],e.puzzleDesNodes=[],e.bloodNodes=[],e}return r(e,t),e.prototype.onLoad=function(){this.initPuzzleDesNodes(),this.initPuzzleItem(),this.initDragEvent(),this.initBloodNode()},e.prototype.initPuzzleDesNodes=function(){for(var t=this.puzzleCount,e=1;e<=t;e++){var o=this.node.getChildByName("ptbg"+e);this.puzzleDesNodes.push(o)}},e.prototype.initPuzzleItem=function(){for(var t=1;t<=this.puzzleCount;t++){var e=this.node.getChildByName("dragItem"+t);this.puzzleItemNodes.push(e),e.originpos=e.position}},e.prototype.initBloodNode=function(){for(var t=1;t<=this.bloodCount;t++){var e=cc.find("heartContr/heartsp"+t,this.node);this.bloodNodes.push(e)}this.node.getChildByName("heartContr").getComponent(cc.Layout).enabled=!1},e.prototype.initDragEvent=function(){for(var t=0;t<this.puzzleItemNodes.length;t++){var e=this.puzzleItemNodes[t];e.on(cc.Node.EventType.TOUCH_START,this.onBegin,this),e.on(cc.Node.EventType.TOUCH_MOVE,this.onMove,this),e.on(cc.Node.EventType.TOUCH_END,this.onEnd,this),e.on(cc.Node.EventType.TOUCH_CANCEL,this.onCancel,this)}},e.prototype.gameOver=function(t){cc.log(" game over succ: "+t),this.offAllDragEvent(),this.gameBase.roundStateTypeChanged(c.RoundStateType.RoundComplete,{win:t?1:0})},e.prototype.onBegin=function(t){var e=t.target,o=t.getLocation();o=e.parent.convertToNodeSpaceAR(o),this._offsetPos=cc.v2(e.position.sub(cc.v3(o))),e.zIndex=cc.macro.MAX_ZINDEX},e.prototype.onMove=function(t){var e=t.target,o=t.getLocation();o=e.parent.convertToNodeSpaceAR(o),e.position=cc.v3(o.add(this._offsetPos)),this.checkDragRight(e)},e.prototype.checkDragRight=function(t,e){void 0===e&&(e=!1);var o=+t.name[t.name.length-1]-1;if(o>=0&&o<this.puzzleCount){var n=t.position,r=this.puzzleDesNodes[o].position;n.sub(r).len()<=50?e&&this.dragCorrect(t,r):e&&this.dragWrong(t)}else cc.error("drag error! name: "+t.name)},e.prototype.dragCorrect=function(t,e){t.position=e,t.scale=1.8,this.offTouchEvent(t);var o=this.puzzleItemNodes.indexOf(t);this.puzzleItemNodes.splice(o,1),this.gameBase.roundStateTypeChanged(c.RoundStateType.RoundProceeding),this.puzzleItemNodes.length<=0&&this.gameOver(!0)},e.prototype.dragWrong=function(t){t.position=t.originpos,this.bloodNodes.pop().destroy(),this.bloodNodes.length<=0&&this.gameOver(!1)},e.prototype.onEnd=function(t){var e=t.target;this.checkDragRight(e,!0),e.zIndex=1},e.prototype.onCancel=function(t){t.target.zIndex=1},e.prototype.offAllDragEvent=function(){for(var t=0;t<this.puzzleItemNodes.length;t++){var e=this.puzzleItemNodes[t];this.offTouchEvent(e)}},e.prototype.offTouchEvent=function(t){t.off(cc.Node.EventType.TOUCH_START),t.off(cc.Node.EventType.TOUCH_MOVE),t.off(cc.Node.EventType.TOUCH_END),t.off(cc.Node.EventType.TOUCH_CANCEL)},i([u({displayName:"\u62d6\u62fd\u5143\u7d20\u6570\u91cf"})],e.prototype,"puzzleCount",void 0),i([u({displayName:"\u5fc3\u7684\u6570\u91cf"})],e.prototype,"bloodCount",void 0),i([p],e)}(a.default);o.default=d,cc._RF.pop()},{"../../../../common/structure/CompEnum":void 0,"../../scripts/ComponentBase":"ComponentBase"}],TemplateGameBase:[function(t,e,o){"use strict";cc._RF.push(e,"d51deoEEOBKebgD6ev3k+1A","TemplateGameBase");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../common/scripts/ChapterGameComponent"),p=t("../../../common/structure/CompEnum"),u=t("../../../kit/manager/ResourcesManager"),d=t("../levelIndicator/scripts/LevelIndicator"),l=t("./ComponentBase"),h=cc._decorator,f=h.ccclass,y=h.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.roundNodeArr=[],e.curRoundIndex=0,e.MaxRoundIndex=4,e.curRoundResult=null,e.levelIndicator=null,e}return r(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.initLevelIndicator(),this.change2NextRound()},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},e.prototype.initLevelIndicator=function(){var t=this;u.default.instance.loadRes("templateGame","levelIndicator/prefab/levelIndicator",u.ResourceType.Normal,cc.Prefab,function(e,o){var n=cc.instantiate(o),r=cc.winSize;t.levelIndicator=n.getComponent(d.default),t.levelIndicator.initData(t.MaxRoundIndex),t.node.addChild(n),n.x=r.width/2-30,n.y=r.height/2-70})},e.prototype.roundStateTypeChanged=function(t,e){switch(t){case p.RoundStateType.RoundOpenAniStart:this.openAniStart();break;case p.RoundStateType.RoundOpenAniComplete:this.openAniComplete();break;case p.RoundStateType.RoundStart:this.roundStart();break;case p.RoundStateType.RoundProceeding:this.roundProceeding(e);break;case p.RoundStateType.RoundComplete:this.roundComplete(e);break;case p.RoundStateType.RoundEndAniStart:this.endAniStart();break;case p.RoundStateType.RoundEndAniComplete:this.endAniComplete()}},e.prototype.openAniStart=function(){},e.prototype.openAniComplete=function(){this.roundStateTypeChanged(p.RoundStateType.RoundStart)},e.prototype.roundStart=function(){if(this.curRoundIndex==this.MaxRoundIndex-1)this.startAudioCallFunc();else for(var t=0;t<this.roundNodeArr.length;t++)this.roundNodeArr[t].active=this.curRoundIndex===t},e.prototype.roundProceeding=function(){},e.prototype.roundComplete=function(t){this.curRoundResult=t,this.roundStateTypeChanged(p.RoundStateType.RoundEndAniStart,t)},e.prototype.endAniStart=function(){},e.prototype.endAniComplete=function(){this.updateRoundStateDisplay(),cc.log("===>>> curRoundIndex: "+this.curRoundIndex+"    MaxRoundIndex:"+this.MaxRoundIndex),this.curRoundIndex++,this.curRoundIndex>=this.MaxRoundIndex?this.gameEnd():this.change2NextRound()},e.prototype.startAudioCallFunc=function(){cc.warn(" \u5f00\u59cb\u8bed\u97f3\u6d4b\u8bc4\uff0c\u91cd\u5199startAudioCallFunc")},e.prototype.gameEnd=function(){cc.log("game end!")},e.prototype.change2NextRound=function(){return c(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.gameRoundInit()];case 1:return t.sent(),this.roundStateTypeChanged(p.RoundStateType.RoundOpenAniStart),[2]}})})},e.prototype.gameRoundInit=function(){for(var t=0;t<this.roundNodeArr.length;t++)this.roundNodeArr[t].active=!1;this.roundNodeArr[this.curRoundIndex]?this.roundNodeArr[this.curRoundIndex].getComponent(l.default).initData(this):cc.log("this.roundNodeArr[this.curRoundIndex] nil!  curRoundIndex: "+this.curRoundIndex+" ")},e.prototype.updateRoundStateDisplay=function(){this.levelIndicator.updateCurIndicator(this.curRoundIndex,!!this.curRoundResult.win)},i([y([cc.Node])],e.prototype,"roundNodeArr",void 0),i([f],e)}(s.default);o.default=m,cc._RF.pop()},{"../../../common/scripts/ChapterGameComponent":void 0,"../../../common/structure/CompEnum":void 0,"../../../kit/manager/ResourcesManager":void 0,"../levelIndicator/scripts/LevelIndicator":"LevelIndicator","./ComponentBase":"ComponentBase"}],chooseGame:[function(t,e,o){"use strict";cc._RF.push(e,"d796703O6ZCFaI4lWLDqiLC","chooseGame");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../../common/structure/CompEnum"),a=t("../../scripts/ComponentBase"),s=cc._decorator,p=s.ccclass,u=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.answerNumber=0,e}return r(e,t),e.prototype.start=function(){this.gameBase=this.node.parent.getComponent("QuziGamePanda")},e.prototype.itemTouchCall=function(t,e){var o=this,n=Number(e);cc.tween(this.node).to(.5,{opacity:0}).call(function(){o.answerNumber==n?o.gameBase.roundStateTypeChanged(c.RoundStateType.RoundComplete,{win:1}):o.gameBase.roundStateTypeChanged(c.RoundStateType.RoundComplete,{win:0})}).call(function(){o.node.destroy()}).start()},i([u({type:cc.Integer,displayName:"\u6b63\u786e\u9009\u9879"})],e.prototype,"answerNumber",void 0),i([p],e)}(a.default);o.default=d,cc._RF.pop()},{"../../../../common/structure/CompEnum":void 0,"../../scripts/ComponentBase":"ComponentBase"}],selectGame:[function(t,e,o){"use strict";cc._RF.push(e,"00adcik625DXbmQzXeC5qW1","selectGame");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../../common/structure/CompEnum"),a=t("../../scripts/ComponentBase"),s=cc._decorator,p=s.ccclass,u=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.heartsArr=[],e.answerItemsArr=[],e.rightTimes=0,e.wrongTiems=0,e}return r(e,t),e.prototype.start=function(){},e.prototype.itemTouchCall=function(t,e){var o=Number(e);if(t.target.active=!1,0==o){if(this.answerItemsArr[this.rightTimes].active=!0,this.rightTimes>=1)return void this.gameEnd(1);this.rightTimes+=1}else this.heartsArr[this.wrongTiems].active=!1,this.wrongTiems+=1,(2==this.wrongTiems&&0==this.rightTimes||3==this.wrongTiems)&&this.gameEnd(0)},e.prototype.gameEnd=function(t){var e=this;cc.tween(this.node).to(2,{y:900}).call(function(){e.gameBase.roundStateTypeChanged(c.RoundStateType.RoundComplete,{win:t})}).call(function(){e.node.destroy()}).start()},e.prototype.onEnable=function(){cc.tween(this.node).to(1,{y:0})},i([u({type:[cc.Node],displayName:"\u6b65\u6570\u6307\u793a\u5668"})],e.prototype,"heartsArr",void 0),i([u({type:[cc.Node],displayName:"\u4efb\u52a1\u6307\u793a\u5668"})],e.prototype,"answerItemsArr",void 0),i([p],e)}(a.default);o.default=d,cc._RF.pop()},{"../../../../common/structure/CompEnum":void 0,"../../scripts/ComponentBase":"ComponentBase"}]},{},["chooseGame","LevelIndicator","PuzzleComponent","ComponentBase","TemplateGameBase","selectGame"]);