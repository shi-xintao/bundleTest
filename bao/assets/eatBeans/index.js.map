{"version":3,"sources":["assets/bundles_en/eatBeans/scripts/EatBeansConfig.ts","assets/bundles_en/eatBeans/scripts/EatBeans.ts"],"names":["EATBEANS_SOUND_CONFIG","exports","ResourcesManager_1","require","AudioManager_1","TimerSystem_1","notifierCenter_1","Tigo_1","EatBeansConfig_1","_a","cc","_decorator","ccclass","property","BUNDLE_NAME","aniNameConfig","TIME_1","TIME_2","EatBeans","_super","__extends","_this","apply","this","arguments","smallcCount","smalldCount","bigcCount","bigdCount","clickItemPrefab","zimuCArr","zimuDArr","rightNode","rectNode","posNodeArr","spCSpine","spDSpine","shadingBg","clickBtn","handSpine","itemContent","caidaiSpine","jinbiSpine","bg","curZimu","clickItems","bigZimuCount","smallZimuCount","hasGuidUser","guildSoundTimer","prototype","onLoad","initUI","initNative","default","callAppToLoaded","start","fixBg","scheduleOnce","showZimuSpine","frameSize","winSize","designResolution","Canvas","instance","designSize","size","width","height","frameAspectRatio","screenSize","__assign","ratio","scale","x","y","addGuildSoundTimer","clearGuidHand","t","doOnce","isValid","node","active","clearTimer","window","webframe","Notify","listen","console","log","find","getComponent","Button","index","push","sp","Skeleton","zIndex","macro","MAX_ZINDEX","zimuNodeArr","pos","map","getChildByName","config","playZimuStartAni","sent","playZimuMoveAni","playEffect","clickandlisten","interactable","tween","repeatForever","delay","call","createClickItem","then","item","itemMoveAni","startCreateItem","zimuNode","jumpName","idleName","Promise","resolve","reject","zimuSound","C","D","spine","te","setAnimation","addAnimation","setTrackCompleteListener","entry","loopCount","SE_zimuchidou_05","SE_zimuchidou_04","to","res","position","changeClickItemAniState","pauseAllActions","randomClickItem","arr","ranIndex","getRandomNum","length","ranIconIndex","count","num","Math","floor","random","_res","instantiate","loadItemSprite","Sprite","spriteFrame","parent","name","split","loadRes","ResourceType","Normal","SpriteFrame","err","removeClickItem","destroy","onPickBtnClicked","targetRect","getBoundingBox","intersects","dealClickedItem","dealSpriteAni","resumeAllActions","add","v3","opt","includes","SE_zimuchidou_02","SE_zimuchidou_01","dealZimuAni","checkComplete","spineName","shadingNode_1","Tween","stopAllByTarget","spSpine","SE_zimuchidou_03","stopAllActions","gameOverAni","posX","aniName","gameOverSoundAndAni","playZimuEndAni","callAppToClose","nodeArr","indexOf","splice","pause","__decorate","Prefab","Node","Component"],"mappings":"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","sourcesContent":["\nexport enum EATBEANS_SOUND_CONFIG {\n    C = 'sound/C',\n    D = 'sound/D',\n    clickandlisten = 'sound/clickandlisten',\n    SE_zimuchidou_01 = 'sound/SE_zimuchidou_01', //尴尬\n    SE_zimuchidou_02 = 'sound/SE_zimuchidou_02', //爆炸\n    SE_zimuchidou_03 = 'sound/SE_zimuchidou_03', //饱嗝\n    SE_zimuchidou_04 = 'sound/SE_zimuchidou_04', //缩小\n    SE_zimuchidou_05 = 'sound/SE_zimuchidou_05', //跳跃\n    SE_zimuchidou_06 = 'sound/SE_zimuchidou_06', //传送带\n}","import { BUNDLE_NAME } from './../../../bundles/paint/src/paintConfig';\nimport ResourcesManager, { ResourceType } from \"../../../kit/manager/ResourcesManager\";\nimport AudioManager from \"../../../kit/system/audio/AudioManager\";\nimport TimerSystem from \"../../../kit/system/timer/TimerSystem\";\nimport NotifierCenter from \"../../common_en/notifierCenter\";\nimport Tigo from \"../../common_en/Tigo\";\nimport { EATBEANS_SOUND_CONFIG } from \"./EatBeansConfig\";\n\n\nconst {ccclass, property} = cc._decorator;\n\nconst BUNDLE_NAME = 'eatBeans';\n\nlet aniNameConfig = [\n    [\n        ['day5_1_BigC_idle', 'day5_1_BigC_JZ'],\n        ['day5_1_C_small_idle', 'day5_1_C_small_JZ'],\n    ],\n    [\n        ['day5_1_BigD_idle', 'day5_1_BigD_JZ'],\n        ['day5_1_D_small_idle', 'day5_1_D_small_JZ'],\n    ],\n]\n\nconst TIME_1 = 4, TIME_2 = 2.8;\n@ccclass\nexport default class EatBeans extends cc.Component {\n\n    smallcCount: number = 6;\n    smalldCount: number = 4;\n    bigcCount: number = 6;\n    bigdCount: number = 4;\n\n    @property(cc.Prefab)\n    clickItemPrefab:cc.Prefab = null;\n    @property([cc.Node])\n    zimuCArr: cc.Node[] = [];\n    @property([cc.Node])\n    zimuDArr: cc.Node[] = [];\n\n    rightNode:cc.Node = null;\n    rectNode:cc.Node = null;\n    posNodeArr:cc.Node[] = [];\n    spCSpine: sp.Skeleton = null;\n    spDSpine: sp.Skeleton = null;\n    shadingBg: cc.Node = null;\n    clickBtn:cc.Button = null;\n    handSpine: cc.Node = null;\n    itemContent: cc.Node = null;\n    caidaiSpine: sp.Skeleton = null;\n    jinbiSpine: sp.Skeleton = null;\n    bg: cc.Node = null;\n\n\n    curZimu:string = 'c';\n    clickItems:cc.Node[] = [];\n\n    bigZimuCount = 0;\n    smallZimuCount = 0;\n\n    hasGuidUser = false; //是否引导过用户\n    guildSoundTimer = null;\n    onLoad(){\n        this.initUI();\n        this.initNative();\n        Tigo.callAppToLoaded();\n    }\n\n    start(){\n        this.fixBg();\n        this.scheduleOnce(()=>{\n            this.showZimuSpine();\n        }, 3);\n    }\n    /**\n     * 适配背景图\n     */\n    fixBg() {\n        let frameSize: cc.Size = cc.winSize // 屏幕尺寸\n        let designResolution: cc.Size = cc.Canvas.instance.designResolution\n        // console.log(\" ====frameSize: \", frameSize);\n        // console.log(\" ====designResolution: \", designResolution);\n        \n        let designSize: cc.Size = cc.size(designResolution.width, designResolution.height)  // cc.Canvas.instance.designResolution\n        let frameAspectRatio: number = frameSize.width / frameSize.height\n        let screenSize: cc.Size = { ...designSize } as cc.Size\n        \n        // console.log(\" ====screenSize: \", screenSize);\n\n        let ratio: number = this.bg.width / this.bg.height\n        // console.log(\" ====ratio: \", ratio, \"   ===frameAspectRatio: \", frameAspectRatio);\n        if (ratio > frameAspectRatio) {\n            let width = this.bg.width * screenSize.height / this.bg.height\n            this.bg.width = width\n            this.bg.height = screenSize.height\n        } else {\n            let scale = frameSize.width / designSize.width;\n            this.bg.width = designSize.width * scale;\n            this.bg.height = designSize.height * scale;\n\n        }\n        // console.log(\" ====: \", this.bg.width, \"   ===frameAspectRatio: \", this.bg.height);\n\n        this.bg.x = 0\n        this.bg.y = 0\n    }\n\n    private addGuildSoundTimer() {\n        if (this.guildSoundTimer) {\n            this.clearGuidHand();\n        }\n        let t = 5;\n        this.guildSoundTimer = TimerSystem.instance.doOnce(t * 1000, () => {\n            if (!cc.isValid(this.node)) return;\n            this.handSpine.active = true;\n        }, this);\n    }\n\n    private clearGuidHand() {\n        this.handSpine.active = false;\n        TimerSystem.instance.clearTimer(this.guildSoundTimer);\n        this.guildSoundTimer = null;\n    }\n\n    initNative(){\n        window['webframe'] = {};\n        window.webframe.Notify = new NotifierCenter();\n\n\n        window.webframe.Notify.listen('callCocos_loaded', ()=>{\n            console.log(\" ===callCocos_loaded=== \");\n            \n        }, this, true);\n    }\n\n    initUI(){\n        this.rightNode = cc.find('right_node', this.node);\n        this.rectNode = cc.find('right_node/rect_node', this.node);\n        this.shadingBg = cc.find('right_node/bg2', this.node);\n        this.clickBtn = cc.find('right_node/button', this.node).getComponent(cc.Button);\n\n        for (let index = 1; index < 5; index++) {\n            let node = cc.find(`right_node/pos_${index}`, this.node);\n            this.posNodeArr.push(node);\n        }\n        this.itemContent = cc.find('right_node/item_content', this.node);\n        this.spCSpine = cc.find('right_node/sprite_node/c', this.node).getComponent(sp.Skeleton);\n        this.spDSpine = cc.find('right_node/sprite_node/d', this.node).getComponent(sp.Skeleton);\n        this.handSpine = cc.find('right_node/shou', this.node);\n        this.bg = cc.find('bg', this.node);\n        this.caidaiSpine = cc.find('spineNode', this.node).getComponent(sp.Skeleton);\n        this.jinbiSpine = cc.find('W4L2-SPINE-1', this.node).getComponent(sp.Skeleton);\n        this.handSpine.zIndex = cc.macro.MAX_ZINDEX;\n    }\n\n    async showZimuSpine(){\n        let zimuNodeArr = this.curZimu == 'c' ? this.zimuCArr : this.zimuDArr;\n        this.shadingBg.active = true;\n        let width = cc.winSize.width;\n        let pos = [130, - 130]\n        zimuNodeArr.map((node, index)=>{\n            node.x = -pos[index];\n            node.scale = 2;\n            node.active = true;\n            if (this.curZimu == 'd' && index == 1) {\n                node.getChildByName('spine').scale = 0.227;\n            }\n        })\n        \n        \n        let index = this.curZimu == 'c' ? 0 : 1;\n        let config = aniNameConfig[index]\n        await this.playZimuStartAni(zimuNodeArr[0], config[0][0], config[0][1]);\n        await this.playZimuStartAni(zimuNodeArr[1], config[1][0], config[1][1]);\n        this.shadingBg.active = false;\n        await this.playZimuMoveAni();\n        // clickandlisten音效TODO:\n        AudioManager.playEffect(BUNDLE_NAME, EATBEANS_SOUND_CONFIG.clickandlisten);\n        this.clickBtn.interactable = true;\n        this.smallZimuCount = 0;\n        this.bigZimuCount = 0;\n        if (this.hasGuidUser) {\n            cc.tween(this.node).repeatForever(\n                cc.tween(this.node).delay(1.8).call(() => {\n                    this.createClickItem().then((item: cc.Node) => {\n                        this.itemMoveAni(item);\n                    })\n                })\n            ).start();\n\n            //引导\n            this.addGuildSoundTimer();\n        }else{\n            this.startCreateItem();\n        }\n\n        // AudioManager.playLoopEffect(BUNDLE_NAME, EATBEANS_SOUND_CONFIG.SE_zimuchidou_06);\n        \n    }\n\n    //字母开场动画\n    playZimuStartAni(zimuNode: cc.Node, jumpName, idleName){\n        return new Promise<void>((resolve, reject) => {\n            let zimuSound = this.curZimu == 'c' ? EATBEANS_SOUND_CONFIG.C : EATBEANS_SOUND_CONFIG.D;\n            AudioManager.playEffect(BUNDLE_NAME, zimuSound, () => {\n                let spine = zimuNode.getChildByName('spine').getComponent(sp.Skeleton);\n                spine['curCount'] = 0;\n                let te = spine.setAnimation(0, jumpName, false);\n                spine.addAnimation(0, idleName, false);\n                spine.setTrackCompleteListener(te, (entry: sp.spine.TrackEntry, loopCount: number) => {\n                    resolve();\n                })\n                // 跳动音效TODO:\n                AudioManager.playEffect(BUNDLE_NAME, EATBEANS_SOUND_CONFIG.SE_zimuchidou_05);\n            });\n        })\n    }\n\n    playZimuMoveAni(){\n        return new Promise<void>((resolve, reject) => {\n            // 缩小音效TODO:\n            AudioManager.playEffect(BUNDLE_NAME, EATBEANS_SOUND_CONFIG.SE_zimuchidou_04);\n            let zimuNodeArr = this.curZimu == 'c' ? this.zimuCArr : this.zimuDArr;\n            cc.tween(zimuNodeArr[0])\n                .to(0.5, { x: this.spCSpine.node.x, y: -146, scale:1 })\n                .start();\n            if (this.curZimu == 'd') {\n                cc.tween(zimuNodeArr[1].getChildByName('spine'))\n                    .to(0.5, { scale: 0.2 })\n                    .start();\n            }\n            cc.tween(zimuNodeArr[1])\n                .to(0.5, { x: this.spCSpine.node.x, y: 190, scale: 1 })\n                .call(() => {\n                    resolve();\n                })\n                .start();\n        });\n    }\n\n    startCreateItem(){\n        let res = `texture/icon_big_c5`\n        this.createClickItem(res).then((item:cc.Node)=>{\n            cc.tween(item)\n                .to(TIME_1, { position: this.posNodeArr[1].position })\n                .to(TIME_2/2, { position: this.rectNode.position })\n                .call(() => {\n                    this.changeClickItemAniState(true);\n                    this.node.pauseAllActions();\n                    // AudioManager.stopLoopEffect(BUNDLE_NAME, EATBEANS_SOUND_CONFIG.SE_zimuchidou_06);\n                    this.handSpine.active = true;\n\n                    this.addGuildSoundTimer();\n                })\n                .start();\n            \n            cc.tween(this.node).repeatForever(\n                cc.tween(this.node).delay(1.8).call(() => {\n                    this.createClickItem().then((item: cc.Node) => {\n                        this.itemMoveAni(item);\n                    })\n                })\n            ).start();\n        });\n    }\n\n    randomClickItem():string{\n        let res = `texture/icon_jimu`\n        let arr = ['big', 'big', 'small', 'small', 'daoju'];\n\n        if (this.smallZimuCount>=3) {\n            arr = ['big', 'big', 'daoju'];\n        }else if (this.bigZimuCount >= 3) {\n            arr = ['small', 'small', 'daoju'];\n        }\n\n        // arr = ['big', 'big', 'small', 'small'];\n        let ranIndex = this.getRandomNum(arr.length)-1;\n        let ranIconIndex\n        \n        if (arr[ranIndex] == 'big') {\n            let count = this.curZimu == 'c' ? this.bigcCount : this.bigdCount;\n            ranIconIndex = this.getRandomNum(count);\n            res = `texture/icon_big_${this.curZimu}${ranIconIndex}`;\n        } else if (arr[ranIndex] == 'small') {\n            let count = this.curZimu == 'c' ? this.smallcCount : this.smalldCount;\n            ranIconIndex = this.getRandomNum(count);\n            res = `texture/icon_small_${this.curZimu}${ranIconIndex}`;\n        }else{\n            ranIconIndex = this.getRandomNum(2);\n            res = `texture/icon_daoju_${ranIconIndex}`\n        }\n\n        // cc.log(` ==== >>>${arr[ranIndex]}   res: ${res}`)\n        return res;\n    }\n\n    // 随机 1-num\n    getRandomNum(num):number{\n        return Math.floor(Math.random() * num + 1);\n    }\n\n\n    async createClickItem(_res?:string){\n        let item = cc.instantiate(this.clickItemPrefab);\n        let res = _res || this.randomClickItem();\n        let sp = await this.loadItemSprite(res);\n        item.getComponent(cc.Sprite).spriteFrame = sp;\n        item.parent = this.itemContent;\n        item.position = this.posNodeArr[0].position;\n        item.name = res.split('/')[1];\n        if (item.name == 'icon_daoju_1') {\n            item.scale = 0.8;\n        }\n        this.clickItems.push(item);\n        return item;\n    }\n\n    loadItemSprite(res:string){\n        return new Promise<cc.SpriteFrame>((resolve, reject) => {\n            ResourcesManager.instance.loadRes(BUNDLE_NAME, res, ResourceType.Normal, cc.SpriteFrame, (err: Error, sp: cc.SpriteFrame)=>{\n                resolve(sp);\n            } );\n            \n        });\n    }\n\n    itemMoveAni(item:cc.Node){\n        cc.tween(item)\n            .to(TIME_1, { position: this.posNodeArr[1].position})\n            .to(TIME_2, { position: this.posNodeArr[2].position })\n            .to(TIME_1, { position: this.posNodeArr[3].position })\n            .call(()=>{\n                this.removeClickItem(item);\n                item.destroy();\n            })\n            .start();\n\n    }\n\n    //点击食物按钮\n    onPickBtnClicked(){\n        this.addGuildSoundTimer();\n        let targetRect = this.rectNode.getBoundingBox();\n        for (let index = 0; index < this.clickItems.length; index++) {\n            const item = this.clickItems[index];\n            if (targetRect.intersects(item.getBoundingBox())) {\n                this.dealClickedItem(item);\n                this.dealSpriteAni(item.name);\n                break\n            }\n        }\n\n        if (!this.hasGuidUser) {\n            this.hasGuidUser = true;\n            this.handSpine.active = false;\n            this.changeClickItemAniState(false);\n            this.node.resumeAllActions();\n            // AudioManager.playLoopEffect(BUNDLE_NAME, EATBEANS_SOUND_CONFIG.SE_zimuchidou_06);\n        }\n\n    }\n\n    dealClickedItem(item:cc.Node){\n        let spine = this.curZimu == 'c' ? this.spCSpine : this.spDSpine;\n        this.removeClickItem(item);\n        cc.tween(item)\n            .to(0.3, { position: spine.node.position.add(cc.v3(0, 60)), scale:0})\n            .call(()=>{\n                item.destroy();\n            })\n            .start();\n\n        // cc.log(item.name)  \n    }\n\n    dealSpriteAni(res:string){\n        let spine = this.curZimu == 'c' ? this.spCSpine : this.spDSpine;\n        let zimuSound = this.curZimu == 'c' ? EATBEANS_SOUND_CONFIG.C : EATBEANS_SOUND_CONFIG.D;\n        let te, opt\n        if (res.includes('daoju_2')) {\n            te = spine.setAnimation(0, 'zha', false)\n            opt = 'daoju_2';\n            // 爆炸音效TODO:\n            AudioManager.playEffect(BUNDLE_NAME, EATBEANS_SOUND_CONFIG.SE_zimuchidou_02)\n        } else if (res.includes('daoju_1')) {\n            te = spine.setAnimation(0, 'ganga', false)\n            opt = 'daoju_1';\n            // 阿哦音效TODO:\n            AudioManager.playEffect(BUNDLE_NAME, EATBEANS_SOUND_CONFIG.SE_zimuchidou_01)\n        }  else if (res.includes('small')) {\n            te = spine.setAnimation(0, 'chi', false)\n            opt = 'small';\n            this.smallZimuCount++;\n            this.scheduleOnce(()=>{\n                this.dealZimuAni(opt);\n            }, 0.5)\n            // 字母音效TODO:\n            AudioManager.playEffect(BUNDLE_NAME, zimuSound)\n        } else if (res.includes('big')) {\n            te = spine.setAnimation(0, 'chi', false)\n            opt = 'big';\n            this.bigZimuCount++;\n            this.scheduleOnce(() => {\n                this.dealZimuAni(opt);\n            }, 0.5)\n            // 字母音效TODO:\n            AudioManager.playEffect(BUNDLE_NAME, zimuSound)\n        }\n        \n        spine.addAnimation(0, 'idle', true);\n\n        this.checkComplete();\n    }\n    /**\n     * a)当食物被点击时，播放音频：“C”，同时对应大写|小写C字母亮一下（如图所示），\n     *  随后里面如图所示展示当前进度（每次长水1|3）（有动画），\n     * 同时被点击的食物则飞到精灵C处，且在飞过去的过程中，由1到0（0.5s），\n     * 到精灵C处，消失；精灵C播放咀嚼动画（+咀嚼音效）\n     * b)被点击的积木，飞到精灵C处，且在飞的过程中，由1到0（0.5s），到精灵C处，消失；\n     * 精灵C播放尴尬动画（+阿哦音效）\n     * 被点击的炸弹，飞到精灵C处，且在飞的过程中，由1到0（0.5s），到精灵C处，消失；精灵C播放爆炸动画（+爆炸音效）\n     */\n    dealZimuAni(opt:string){\n        // 咀嚼音效TODO:\n        // AudioManager.playEffect(BUNDLE_NAME, \"zimuSound\")\n        let zimuNodeArr = this.curZimu == 'c' ? this.zimuCArr : this.zimuDArr;\n        // 播放音频 TODO:\n        // AudioManager.playEffect(BUNDLE_NAME, 'sound/clickAndListen');\n\n        let aniNameConfig = [\n            [\n                ['day5_1_BigC_1', 'day5_1_BigC_2', 'day5_1_BigC_3',], //大C\n                ['day5_1_C_small_1', 'day5_1_C_small_2', 'day5_1_C_small_3',] //小C\n            ],\n            [\n                ['day5_1_BigD_1', 'day5_1_BigD_2', 'day5_1_BigD_3',], //大D\n                ['day5_1_D_small_1', 'day5_1_D_small_2', 'day5_1_D_small_3',] //小d\n            ],\n        ]\n        let index = this.curZimu == 'c' ? 0 : 1;\n        let config = aniNameConfig[index]\n        let zimuNode, spineName, count\n        if (opt == 'small') {\n            zimuNode = zimuNodeArr[1]\n            spineName = config[1][this.smallZimuCount-1];\n            count = this.smallZimuCount;\n        } else if (opt == 'big') {\n            zimuNode = zimuNodeArr[0]\n            spineName = config[0][this.bigZimuCount - 1];\n            count = this.bigZimuCount;\n        }\n        \n        // cc.log(`this.smallZimuCount:  ${this.smallZimuCount}`)\n        // cc.log(`this.bigZimuCount:  ${this.bigZimuCount}`)\n        // cc.log(`spineName:  ${spineName}`)\n        if (count > 3) {\n            return\n        }\n        // 字母周围图片亮\n        if (zimuNode) {\n            let shadingNode = zimuNode.getChildByName('shading');\n            if (count <= 3) {\n                shadingNode.active = true;\n                cc.Tween.stopAllByTarget(shadingNode);\n                cc.tween(shadingNode).delay(0.5).call(() => {\n                    shadingNode.active = false;\n                    // 字母动画\n                    let spine = zimuNode.getChildByName('spine').getComponent(sp.Skeleton);\n                    if (spineName) {\n                        let te = spine.setAnimation(0, spineName, false);\n                        if (count == 3) {\n                            spine.setTrackCompleteListener(te, ()=>{\n                                let spSpine = this.curZimu == 'c' ? this.spCSpine : this.spDSpine;\n                                spSpine.setAnimation(0, 'baoge', false)\n                                spine.addAnimation(0, 'idle', true);\n                                // 饱嗝音效TODO:\n                                AudioManager.playEffect(BUNDLE_NAME, EATBEANS_SOUND_CONFIG.SE_zimuchidou_03);\n                            });\n                        }\n                    }\n                    \n                }).start();\n            }else{\n                shadingNode.active = false;\n            }\n        }\n        \n    }\n\n    checkComplete(){\n        if (this.smallZimuCount >= 3 && this.bigZimuCount >= 3 ) {\n            this.clickBtn.interactable = false;\n            this.node.stopAllActions();\n            this.clearGuidHand();\n            // cc.log(`complete`)\n            this.scheduleOnce(() => {\n                // AudioManager.stopLoopEffect(BUNDLE_NAME, EATBEANS_SOUND_CONFIG.SE_zimuchidou_06);\n                if (this.curZimu == 'c') {\n                    // 字母精灵\n                    this.spCSpine.node.active = false;\n                    this.spDSpine.node.active = true;\n                    //字母\n                    this.zimuCArr.map(node => node.active = false);\n                    this.curZimu = 'd';\n                    this.showZimuSpine();\n                        \n                }else{\n                    this.gameOverAni()\n                }\n            }, 3);\n\n        }\n    }\n\n    gameOverAni(){\n        cc.log(`game over`)\n        this.shadingBg.active = true;\n        //字母\n        let width = cc.winSize.width;\n        // let posX = [width / 6 * 4 + 100 - width / 2, width / 6 * 4 - 100 - width / 2]\n        let posX = [- 100 - width / 6, 100 - width / 6]\n        let config = aniNameConfig[0]\n        this.zimuCArr.map((node: cc.Node, index) => {\n            node.y = index == 0 ? 0 : -56;\n            node.x = posX[index];\n            node.scale = 2;\n            // hide shading \n            node.getChildByName('shading').active = false;\n            node.active = true;\n            // ani\n            let spine = node.getChildByName('spine').getComponent(sp.Skeleton);\n            let aniName = config[index][1];\n            console.log(\" ====== aniName； \", aniName);\n            spine.setAnimation(0, aniName, true);\n\n        })\n        posX = [width / 6 - 100, width / 6 + 100]\n        config = aniNameConfig[1]\n        this.zimuDArr.map((node:cc.Node, index)=>{\n            node.y = index == 0 ? 0 : -41;\n            node.x = posX[index]+30\n            node.scale  = 2;\n            if (index == 1) {\n                node.getChildByName('spine').scale = 0.227;\n            }\n            // hide shading \n            node.getChildByName('shading').active = false;\n            node.active = true;\n            // ani\n            let spine = node.getChildByName('spine').getComponent(sp.Skeleton);\n            let aniName = config[index][1];\n            console.log(\" ====== aniName； \", aniName);\n            spine.setAnimation(0, aniName, true);\n        })\n\n        this.gameOverSoundAndAni();\n    }\n\n    async gameOverSoundAndAni(){\n        // 字母声音\n        await this.playZimuEndAni(this.zimuCArr, aniNameConfig[0], EATBEANS_SOUND_CONFIG.C);\n        await this.playZimuEndAni(this.zimuDArr, aniNameConfig[1], EATBEANS_SOUND_CONFIG.D);\n\n        this.caidaiSpine.node.active = true;\n        let te = this.caidaiSpine.setAnimation(0, 'caidai', false);\n        this.caidaiSpine.setTrackCompleteListener(te, (entry: sp.spine.TrackEntry, loopCount: number) => {\n            // window.webframe.Notify.trigger(\"entryMenu\", true);\n            \n            cc.log(`撒花结束`)\n            this.jinbiSpine.node.active = true;\n            this.jinbiSpine.setAnimation(0, 'Animation', true);\n            AudioManager.playEffect(BUNDLE_NAME, 'sound/coin_large')\n            this.scheduleOnce(()=>{\n                Tigo.callAppToClose(\"replayOrNext\", true);\n            }, 4);\n        })\n        \n    }\n\n    //\n    playZimuEndAni(nodeArr: cc.Node[], config, zimuSound) {\n        return new Promise<void>((resolve, reject) => {\n            \n            AudioManager.playEffect(BUNDLE_NAME, zimuSound, ()=>{\n                nodeArr.map((zimuNode, index) => {\n                    // 跳动音效TODO:\n                    AudioManager.playEffect(BUNDLE_NAME, EATBEANS_SOUND_CONFIG.SE_zimuchidou_05);\n                    let spine = zimuNode.getChildByName('spine').getComponent(sp.Skeleton);\n                    let te = spine.setAnimation(0, config[index][0], false);\n                    spine.addAnimation(0, config[index][1], false);\n                    spine.setTrackCompleteListener(te, (entry: sp.spine.TrackEntry, loopCount: number) => {\n                        resolve();\n                    })\n                })\n            });\n            \n        })\n    }\n\n    removeClickItem(item: cc.Node){\n        let index = this.clickItems.indexOf(item);\n        this.clickItems.splice(index, 1);\n        cc.Tween.stopAllByTarget(item);\n    }\n\n    changeClickItemAniState(pause:boolean){\n        for (let index = 0; index < this.clickItems.length; index++) {\n            const item = this.clickItems[index];\n            if (pause) {\n                item.pauseAllActions();\n            }else{\n                item.resumeAllActions();\n            }\n        }\n    }\n}\n"],"file":"index.js"}