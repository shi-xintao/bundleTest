{"version":3,"sources":["assets/bundles/video/videoCr.ts","assets/bundles/video/videoPlayerMgr.ts"],"names":["_a","cc","_decorator","ccclass","property","videoCr","_super","__extends","_this","apply","this","arguments","content","time","prototype","start","node","on","showControl","scheduleOnce","onEnable","active","unscheduleAllCallbacks","hide","show","console","log","schHide","__decorate","Node","Component","exports","default","events_1","require","kit_1","ClientModuleEnum_1","ClientTipsEnum_1","EventSystem_1","macro","ENABLE_TRANSPARENT_CANVAS","VideoPlayerMgr","video","progress","videoControl","slider","curTime","maxTime","pauseBtn","resumeBtn","handelBtn","isReady","progressMax","onLoad","regisEvent","getComponent","ProgressBar","checkNetWorkStatus","tips_type","net_work","kit","model","nativeInfo","getNetworkStatus","netWork","networkType","NETWORK_NO","TIPS_TYPE","NO_NETWORK","NETWORK_WIFI","NOT_WIFI","pause","params","tipsType","confirmCallback","play","cancelCallback","manager","Event","emit","consts","SHOW_COMMON_TIPS_POP","loadVideo","event","remoteURL","data","url","videoReady","videoLoaded","videoPlaying","videoPaused","videoCompleted","changeProgress","slideClickEnd","handelBtn_start","handelBtn_end","handelBtn_cancel","LIFE_CYCLE_BLOCK","videoPause","LIFE_CYCLE_PARAMS","LIFE_CYCLE_UNBLOCK","videoResume","LIFE_CYCLE_READY","setProgress","currentTime","string","secondToDate","getDuration","LIFE_CYCLE_COMPLETE","choose","VIDEO_MODULE_TO_CLIENT","type","VideoEventTransType","M2C_VIDEO_PLAY_PAUSE","M2C_VIDEO_PLAY_RESUME","result","m","Math","floor","s","update","dt","Number","isNaN","onDestroy","off","isValid","VideoPlayer","Slider","Label"],"mappings":"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","sourcesContent":["const {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class videoCr extends cc.Component {\n\n    @property(cc.Node)\n    content:cc.Node = null\n\n    time:number = 3\n\n    public start () {\n        this.node.on(\"touchend\",this.showControl,this);\n        this.scheduleOnce(()=>this.showControl(),this.time)\n    }\n\n    public onEnable(){\n        \n    }\n\n    public showControl(){\n        this.content.active = !this.content.active\n        this.unscheduleAllCallbacks()\n        this.scheduleOnce(()=>this.hide(),this.time)\n    }\n\n    public hide(){\n        if(this.content.active)\n        this.content.active = false\n    }\n\n    public show(){\n        this.content.active = true\n        this.unscheduleAllCallbacks()\n        console.log(\"重新计时========\")\n        this.scheduleOnce(()=>this.hide(),this.time)\n    }\n\n    public schHide(){\n        this.scheduleOnce(()=>this.hide(),this.time)\n    }\n}\n","import Events, { LIFE_CYCLE_BLOCK, LIFE_CYCLE_COMPLETE, LIFE_CYCLE_PARAMS, LIFE_CYCLE_READY, LIFE_CYCLE_UNBLOCK } from \"../../kit/events/events\";\nimport { kit } from \"../../kit/kit\";\nimport { VideoEventTransType } from \"../../kit/structure/ClientModuleEnum\";\nimport { commonTipsOptions } from \"../../kit/structure/ClientModuleInterface\";\nimport { TIPS_TYPE } from \"../../kit/structure/ClientTipsEnum\";\nimport EventSystem from \"../../kit/system/event/EventSystem\";\n\ncc.macro.ENABLE_TRANSPARENT_CANVAS = true;\nconst { ccclass, property } = cc._decorator;\n@ccclass\nexport default class VideoPlayerMgr extends cc.Component {\n\n    @property(cc.VideoPlayer)\n    public video: cc.VideoPlayer = null;\n\n    @property(cc.Node)\n    public progress: cc.Node = null\n\n    @property(cc.Node)\n    public videoControl: cc.Node = null\n\n    @property(cc.Slider)\n    public slider: cc.Slider = null;\n\n    @property(cc.Label)\n    public curTime: cc.Label = null;\n\n    @property(cc.Label)\n    public maxTime: cc.Label = null;\n\n    @property(cc.Node)\n    public pauseBtn: cc.Node = null\n\n    @property(cc.Node)\n    public resumeBtn: cc.Node = null\n\n    @property(cc.Node)\n    public handelBtn: cc.Node = null\n\n    public isReady: boolean = false\n    public progressMax: number = 0\n\n    public onLoad() {\n        this.regisEvent()\n        this.videoControl.active = false\n        this.progress.getComponent(cc.ProgressBar).progress = 0\n    }\n\n    public checkNetWorkStatus() {\n        let tips_type: string = \"\"\n        let net_work = kit.model.nativeInfo.getNetworkStatus()\n        if (net_work === kit.model.netWork.networkType.NETWORK_NO) {\n            tips_type = TIPS_TYPE.NO_NETWORK\n        } else if (net_work != kit.model.netWork.networkType.NETWORK_WIFI) {\n            tips_type = TIPS_TYPE.NOT_WIFI\n        } else {\n            return\n        }\n        this.video.pause()\n        let params: commonTipsOptions = {\n            tipsType: tips_type,\n            confirmCallback: () => { \n                this.video.play()\n            },\n            cancelCallback: () => {\n                kit.manager.Event.emit(\"back\");\n            },\n        }\n        kit.manager.Event.emit(kit.consts.Event.SHOW_COMMON_TIPS_POP, params);\n    }\n\n    public loadVideo(event) {\n        // let bundle = cc.assetManager.getBundle(\"video\");\n        // TimerSystem.instance.doFrameOnce(1, ()=>{\n        //     bundle.load(data.data.url, (error: Error, video: any)=>{\n        //         this.video.clip = video;\n        //         // EventSystem.emit(LIFE_CYCLE_READY);\n        //     });\n        // });\n        this.video.remoteURL = event.data.url\n    }\n\n    public start() {\n\n    }\n\n    public regisEvent() {\n        // ** 视频准备好了 可以播放了 */\n        this.video.node.on(\"ready-to-play\", this.videoReady, this);\n\n        // ** 表示视频的元信息已加载完成，你可以调用 getDuration 来获取视频总时长。 */\n        this.video.node.on(\"meta-loaded\", this.videoLoaded, this);\n\n        // ** 视频播放中 */\n        this.video.node.on(\"playing\", this.videoPlaying, this);\n\n        // ** 表示视频暂停播放。 *//\n        this.video.node.on(\"paused\", this.videoPaused, this);\n\n        // **视频播放完成。 *//\n        this.video.node.on(\"completed\", this.videoCompleted, this);\n\n        // 滑条相关\n        this.slider.node.on(\"slide\", this.changeProgress, this);\n        this.slider.node.on(\"touchend\", this.slideClickEnd, this);\n        this.handelBtn.on(\"touchstart\", this.handelBtn_start, this);\n        this.handelBtn.on(\"touchend\", this.handelBtn_end, this);\n        this.handelBtn.on(\"touchcancel\", this.handelBtn_cancel, this);\n\n        EventSystem.on(LIFE_CYCLE_BLOCK, this.videoPause, this);\n        EventSystem.on(LIFE_CYCLE_PARAMS, this.loadVideo, this);\n        EventSystem.on(LIFE_CYCLE_UNBLOCK, this.videoResume, this);\n    }\n\n    public videoReady() {\n        // 可以播放了\n        cc.log(\"videoReady===\");\n        this.progress.getComponent(cc.ProgressBar).progress = 0\n        this.video.play();\n        this.isReady = true\n        this.videoControl.active = true\n        EventSystem.emit(LIFE_CYCLE_READY);\n        this.videoControl.getComponent(\"videoCr\").show()\n        this.checkNetWorkStatus()\n    }\n    // 临时解决 返回的currentTime不变情况\n    public setProgress() {\n        this.video.currentTime += 0.01\n        this.slider.progress = this.video.currentTime / this.progressMax\n        this.progress.getComponent(cc.ProgressBar).progress = this.slider.progress\n        this.curTime.string = this.secondToDate(this.video.currentTime);\n    }\n\n    public videoLoaded() {\n        this.progressMax = this.video.getDuration();\n        cc.log(\"video time ==== \" + this.video.getDuration());\n        if(this.progressMax == 0)\n        {\n            this.progressMax = 0.1\n        }\n        this.maxTime.string = \"/\" + this.secondToDate(this.progressMax);\n    }\n\n    public videoPlaying() {\n        // 播放中\n    }\n\n    public slideClickEnd() {\n        // 播放中\n        this.videoControl.getComponent(\"videoCr\").show()\n    }\n\n    public videoPaused() {\n        // 暂停中\n    }\n\n    public videoCompleted() {\n        // 播放完成\n        EventSystem.emit(LIFE_CYCLE_COMPLETE);\n    }\n\n    // ** 视频暂停 *//\n    public videoPause(event, choose) {\n        this.video.pause();\n        this.pauseBtn.active = false;\n        this.resumeBtn.active = true;\n        EventSystem.emit(Events.VIDEO_MODULE_TO_CLIENT, { type: VideoEventTransType.M2C_VIDEO_PLAY_PAUSE });\n        cc.log(`${Events.VIDEO_MODULE_TO_CLIENT}, type:${VideoEventTransType.M2C_VIDEO_PLAY_PAUSE}`);\n    }\n\n    // ** 视频继续 *//\n    public videoResume(event, choose) {\n        // this.video.resume();\n        this.video.play();\n        this.pauseBtn.active = true;\n        this.resumeBtn.active = false;\n        EventSystem.emit(Events.VIDEO_MODULE_TO_CLIENT, { type: VideoEventTransType.M2C_VIDEO_PLAY_RESUME });\n        cc.log(`${Events.VIDEO_MODULE_TO_CLIENT}, type:${VideoEventTransType.M2C_VIDEO_PLAY_RESUME}`);\n    }\n\n    // ** 格式化时间 *//\n    public secondToDate(result) {\n        let m = Math.floor((result / 60 % 60)) < 10 ? '0' + Math.floor((result / 60 % 60)) : Math.floor((result / 60 % 60));\n        let s = Math.floor((result % 60)) < 10 ? '0' + Math.floor((result % 60)) : Math.floor((result % 60));\n        return result = m + \":\" + s;\n    }\n\n    /* 滑动开始 */\n    public handelBtn_start() {\n        this.videoControl.getComponent(\"videoCr\").show()\n    }\n    /* 滑动结束 */\n    public handelBtn_end() {\n        this.videoControl.getComponent(\"videoCr\").schHide()\n    }\n    /* 滑动取消 */\n    public handelBtn_cancel() {\n        this.videoControl.getComponent(\"videoCr\").schHide()\n    }\n\n    public update(dt) {\n        if(this.isReady && !Number.isNaN(this.video.currentTime)){\n            this.slider.progress = this.video.currentTime / this.progressMax;\n            this.progress.getComponent(cc.ProgressBar).progress = this.slider.progress;\n            this.curTime.string = this.secondToDate(this.video.currentTime);\n        }\n    }\n\n    // 移除监听\n    public onDestroy() {\n        EventSystem.off(LIFE_CYCLE_BLOCK, this.videoPause, this);\n        EventSystem.off(LIFE_CYCLE_PARAMS, this.loadVideo, this);\n        EventSystem.off(LIFE_CYCLE_UNBLOCK, this.videoResume, this);\n        if (this.video.node && cc.isValid(this.video.node)) {\n            this.video.node.off(\"ready-to-play\", this.videoReady, this);\n            this.video.node.off(\"meta-loaded\", this.videoLoaded, this);\n            this.video.node.off(\"playing\", this.videoPlaying, this);\n            this.video.node.off(\"paused\", this.videoPaused, this);\n            this.video.node.off(\"completed\", this.videoCompleted, this);\n\n            this.slider.node.off(\"touchend\", this.slideClickEnd, this);\n            this.handelBtn.off(\"touchstart\", this.handelBtn_start, this);\n            this.handelBtn.off(\"touchend\", this.handelBtn_end, this);\n            this.handelBtn.off(\"touchcancel\", this.handelBtn_cancel, this);\n        }\n\n    }\n\n    public changeProgress() {\n        this.progress.getComponent(cc.ProgressBar).progress = this.slider.progress;\n        this.video.currentTime = this.slider.progress * this.progressMax;\n    }\n}\n"],"file":"index.js"}