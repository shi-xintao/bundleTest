{"version":3,"sources":["assets/bundles/redSantaClaus/src/box.ts","assets/bundles/redSantaClaus/src/comp.ts","assets/bundles/redSantaClaus/src/moveItem.ts","assets/bundles/redSantaClaus/src/redSantaClaus.ts","assets/bundles/redSantaClaus/src/role.ts","assets/bundles/redSantaClaus/src/wardrobe.ts"],"names":["AudioManager_1","require","comp_1","redSantaClaus_1","_a","cc","_decorator","ccclass","property","Box","_super","__extends","_this","apply","this","arguments","mainNode","objNode","endBoxNode","yanSk","objectIndex","objectTypeArr","objPosition","v2","prototype","checkBox","item","checkCollision","checkPutIn","checkItem","objType","name","substring","length","includes","push","rect1","node","getBoundingBoxToWorld","rect2","intersects","putInBox","parent","setPosition","checkBoxEnd","active","getPosition","playSpineAnimation","then","default","playEffect","getComponent","nextGameLevel","__decorate","Node","sp","Skeleton","Component","exports","spine","animation","loop","trackIndex","Promise","resolve","setAnimation","en","setTrackCompleteListener","loadSpriteFrame","url","resources","load","SpriteFrame","err","sprite","console","log","box_1","role_1","MoveItem","boxNode","roleNode","MUSIC_PATH","BUNDLE_NAME","AUDIO_NAME","AUDIO_ERROR","originPos","mainComp","start","onClick","EventType","TOUCH_START","TOUCH_MOVE","TOUCH_END","TOUCH_CANCEL","on","touchStart","touchMove","touchEnd","touchCancel","event","x","getDelta","y","checkMoveObj","cancel","playRight","playWrong","showGuide","palyThinkAnimation","sent","palyIdleAnimation","palyHappyAnimation","bool","children","forEach","isTrue","playWrongAni","ani","Animation","play","off","EventSystem_1","events_1","TimerSystem_1","Hand_1","ChapterGameComponent_1","wardrobe_1","MUSIC_TYPE","RedSantaClaus","moveNode","bgNode","wardrobeNode","blockInputNode","smokeAnimation","handPrefab","hand","gameHandCount","gameHandFunc","gameFirstCount","MUSIC_BG","MUSIC_SUCCESS","gameTotal","gameFirstTotal","gameIndex","gameWordData","gameWordAudio","startRecordFunc","recordAudio","onLoad","call","FOLLOW_MODULE_TO_CLIENT","recordResult","playMusic","LIFE_CYCLE_BLOCK","block","LIFE_CYCLE_UNBLOCK","onBlock","initAllNode","showBlockNode","startRunGame","setBg","initData","recordData","evaluatingType","evaluatingText","tryTimes","evaluationScore","recordTime","iconPath","bundleName","taskData","imgList","onDestroy","clearInterval","timerKey","isValid","destroy","getChildByName","handNode","instantiate","addChild","onCompleted","onHandCompleted","bind","hideHand","hide","hideBlockNode","setInterval","guide2Target","box","find","element","showHand","playDown","tween","cursor","to","position","playUp","onClickBtn","target","setTargetNode","initRole","startWalkInScene","instance","doFrameOnce","showTask","gameEnd","stopMusic","emit","LIFE_CYCLE_COMPLETE","gameTaskCom","taskHideTime","scheduleOnce","gameFirstEnd","gameFirstEndFunc","gameRunRecord","palyWalkAnimation","palyWardrobeMove","palyBgMove","gameSecondStart","setBagPosition","bg","width","height","by","num","isComplete","func1","func2","func3","showParams","taskIndex","complete","callFunc1","callFunc2","callFunc3","showTaskList","palyRightAnimation","showSmoke","recordRight","playDoorAnimation","palyWrongAnimation","recordWrong","palyBGM","palyAudioByIdx","colorNum","Number","YELLOW","startRecordAudio","CC_PREVIEW","result","data","eventName","success","type","Prefab","displayName","ROLE_ANI","ROLE_SKIN","Role","sk","rolePos","moveLen","curTime","IDLE","setCompleteListener","random","temp","Math","IDLE2","WALK","HAPPY","palyDislikeAnimation","DISLIKE","THINK","palyEndAnimation","scaleX","SDZ_WALK","frameSize","view","getFrameSize","__awaiter","func","bagPos1","id","scale","pos","syName","setSkin","SDZ_SY","SDZ","wardrobeWrong","ran","QY_SY","XZ_SY","SDZ_SY_XK","SDZ_SY_QK","KC","Wardrobe","syNode","kzNode","doorNode","wardrobeRight"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAAA,IAAAA,iBAAAC,QAAA;IACA,IAAAC,SAAAD,QAAA;IACA,IAAAE,kBAAAF,QAAA;IAEM,IAAAG,KAAAC,GAAAC,YAAAC,UAAAH,GAAAG,SAAAC,WAAAJ,GAAAI;IAGN,IAAAC,MAAA,SAAAC;MAAiCC,UAAAF,KAAAC;MAAjC,SAAAD;QAAA,IAAAG,QAAA,SAAAF,UAAAA,OAAAG,MAAAC,MAAAC,cAAAD;QAEEF,MAAAI,WAAA;QAGAJ,MAAAK,UAAA;QAGAL,MAAAM,aAAA;QAGAN,MAAAO,QAAA;QAEQP,MAAAQ,cAAA;QACAR,MAAAS,gBAAA;QACAT,MAAAU,cAAA,EAAAjB,GAAAkB,IAAA,IAAA,IAAAlB,GAAAkB,GAAA,IAAA;;;MAGDd,IAAAe,UAAAC,WAAA,SAAAC;QAEL,SAAAZ,KAAAa,eAAAD,SAEEZ,KAAAc,WAAAF;;MAOGjB,IAAAe,UAAAK,YAAA,SAAAH;QACL,IAAAI,UAAAJ,KAAAK,KAAAC,UAAA,GAAAN,KAAAK,KAAAE,SAAA;QACA,QAAAnB,KAAAO,cAAAa,SAAAJ;;MAIMrB,IAAAe,UAAAI,aAAA,SAAAF;QACN,IAAAI,UAAAJ,KAAAK,KAAAC,UAAA,GAAAN,KAAAK,KAAAE,SAAA;QACA,KAAAnB,KAAAO,cAAAa,SAAAJ,UAAA;UACEhB,KAAAO,cAAAc,KAAAL;UAEA,OAAA;;QAGF,OAAA;;MAGMrB,IAAAe,UAAAG,iBAAA,SAAAD;QACN,IAAAU,QAAAtB,KAAAuB,KAAAC;QACA,IAAAC,QAAAb,KAAAY;QACA,IAAAF,MAAAI,WAAAD,QACE,OAAA;QAEF,OAAA;;MAIK9B,IAAAe,UAAAiB,WAAA,SAAAf;QACLA,KAAAgB,SAAA5B,KAAAG;QACA,IAAAa,UAAAJ,KAAAK,KAAAC,UAAA,GAAAN,KAAAK,KAAAE,SAAA;QACA,YAAAH,UACEJ,KAAAiB,YAAA7B,KAAAQ,YAAA,MAEAI,KAAAiB,YAAA7B,KAAAQ,YAAA;QAEFR,KAAA8B;;MAGMnC,IAAAe,UAAAoB,cAAA;QAAR,IAAAhC,QAAAE;QACE,IAAAA,KAAAO,cAAAY,UAAA,GAAA;UACEnB,KAAAK,MAAAkB,KAAAQ,SAAA;UACA/B,KAAAK,MAAAkB,KAAAM,YAAA7B,KAAAuB,KAAAS;UACA5C,OAAA6C,mBAAAjC,KAAAK,OAAA,aAAA6B,KAAA;YACEpC,MAAAO,MAAAkB,KAAAQ,SAAA;;UAEF/B,KAAAI,WAAA2B,SAAA;UACA7C,eAAAiD,QAAAC,WAAA,iBAAA;UAEApC,KAAAE,SAAAmC,aAAAhD,gBAAA8C,SAAAG;;;MA3EJC,WAAA,EADC7C,SAAAH,GAAAiD,SACwB7C,IAAAe,WAAA,iBAAA;MAGzB6B,WAAA,EADC7C,SAAAH,GAAAiD,SACuB7C,IAAAe,WAAA,gBAAA;MAGxB6B,WAAA,EADC7C,SAAAH,GAAAiD,SAC0B7C,IAAAe,WAAA,mBAAA;MAG3B6B,WAAA,EADC7C,SAAA+C,GAAAC,aACyB/C,IAAAe,WAAA,cAAA;MAXPf,MAAA4C,WAAA,EADpB9C,WACoBE;MAiFrB,OAAAA;KAjFA,CAAAJ,GAAAoD;IAAqBC,QAAAT,UAAAxC;;;;;;;;;;;;;;;ICCrB,SAAAsC,mBAAAY,OAAAC,WAAAC,MAAAC;WAGE,MAAAD,SAAAA,OAAA;WACA,MAAAC,eAAAA,aAAA;MAEA,OAAAD,OACEE,QAAAC,UAAAhB,KAAA;QACEW,MAAAM,aAAAH,YAAAF,WAAAC;WAGF,IAAAE,QAAA,SAAAC;QACE,IAAAE,KAAAP,MAAAM,aAAAH,YAAAF,WAAAC;QAKAF,MAAAQ,yBAAAD,IAAA;UACEF,QAAA;;;;IAlBRN,QAAAX,qBAAAA;IA6BA,SAAAqB,gBAAAC;MAGE,OAAA,IAAAN,QAAA,SAAAC;QACE3D,GAAAiE,UAAAC,KAAAF,KAAAhE,GAAAmE,aAAA,SAAAC,KAAAC;UACED,MACEE,QAAAC,IAAAH,KAAA,2DAEAT,QAAAU;;;;IARRhB,QAAAU,kBAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICrCA,IAAApE,iBAAAC,QAAA;IACA,IAAA4E,QAAA5E,QAAA;IACA,IAAAE,kBAAAF,QAAA;IACA,IAAA6E,SAAA7E,QAAA;IACM,IAAAG,KAAAC,GAAAC,YAAAC,UAAAH,GAAAG,SAAAC,WAAAJ,GAAAI;IAGN,IAAAuE,WAAA,SAAArE;MAAsCC,UAAAoE,UAAArE;MAAtC,SAAAqE;QAAA,IAAAnE,QAAA,SAAAF,UAAAA,OAAAG,MAAAC,MAAAC,cAAAD;QAEEF,MAAAoE,UAAA;QAGApE,MAAAqE,WAAA;QAGArE,MAAAI,WAAA;QAEOJ,MAAAsE,aAAA;QACAtE,MAAAuE,cAAA;QACAvE,MAAAwE,aAAA;QACAxE,MAAAyE,cAAA;QACAzE,MAAA0E,YAAA;QAEA1E,MAAA2E,WAAA;;;MAGPR,SAAAvD,UAAAgE,QAAA;QACE1E,KAAA2E;;MAGMV,SAAAvD,UAAAiE,UAAA;QACA,IAAArF,KAAAC,GAAAiD,KAAAoC,WAAAC,cAAAvF,GAAAuF,aAAAC,aAAAxF,GAAAwF,YAAAC,YAAAzF,GAAAyF,WAAAC,eAAA1F,GAAA0F;QAENhF,KAAAuB,KAAA0D,GAAAJ,aAAA7E,KAAAkF,YAAAlF;QACAA,KAAAuB,KAAA0D,GAAAH,YAAA9E,KAAAmF,WAAAnF;QACAA,KAAAuB,KAAA0D,GAAAF,WAAA/E,KAAAoF,UAAApF;QACAA,KAAAuB,KAAA0D,GAAAD,cAAAhF,KAAAqF,aAAArF;;MAGMiE,SAAAvD,UAAAwE,aAAA;QACNlF,KAAAwE,YAAAxE,KAAAuB,KAAAS;QACAhC,KAAAE,SAAAmC,aAAAhD,gBAAA8C,SAAA+C;;MAGMjB,SAAAvD,UAAAyE,YAAA,SAAAG;QACNtF,KAAAuB,KAAAgE,KAAAD,MAAAE,WAAAD;QACAvF,KAAAuB,KAAAkE,KAAAH,MAAAE,WAAAC;;MAIMxB,SAAAvD,UAAA0E,WAAA;QACN,IAAApF,KAAA0F,gBAAA;UAEE1F,KAAA2F;UACA3F,KAAA4F;eACK;UAEL5F,KAAA6F;UACA7F,KAAAuB,KAAAM,YAAA7B,KAAAwE;;QAEFxE,KAAA8F;;MAIM7B,SAAAvD,UAAAoF,YAAA;QACN9F,KAAAE,SAAAmC,aAAAhD,gBAAA8C,SAAA2D;;MAGY7B,SAAAvD,UAAAmF,YAAA;;;;;cAEZ3G,eAAAiD,QAAAC,WAAApC,KAAAqE,aAAA,KAAArE,KAAAoE,aAAApE,KAAAuE;cAMA,OAAA,EAAA,GAAAvE,KAAAmE,SAAA9B,aAAA2B,OAAA7B,SAAA4D;;;cAAAzG,GAAA0G;cACAhG,KAAAmE,SAAA9B,aAAA2B,OAAA7B,SAAA8D;;;;;;MAGYhC,SAAAvD,UAAAkF,YAAA;;;;;cACZ1G,eAAAiD,QAAAC,WAAApC,KAAAqE,aAAA,KAAArE,KAAAoE,aAAApE,KAAAsE;cAKA,OAAA,EAAA,GAAAtE,KAAAmE,SAAA9B,aAAA2B,OAAA7B,SAAA+D;;;cAAA5G,GAAA0G;cACAhG,KAAAmE,SAAA9B,aAAA2B,OAAA7B,SAAA8D;;;;;;MAGMhC,SAAAvD,UAAA2E,cAAA;QACNrF,KAAAuB,KAAAM,YAAA7B,KAAAwE;;MAGMP,SAAAvD,UAAAgF,eAAA;QAAR,IAAA5F,QAAAE;QACE,IAAAmG,OAAA;QACAnG,KAAAkE,QAAAkC,SAAAC,QAAA,SAAAzF;UACE,IAAA0F,SAAA1F,KAAAyB,aAAA0B,MAAA5B,SAAAxB,SAAAb,MAAAyB;UACA,IAAA+E,WAAAH,MAAA;YACEA,OAAA;YACAvF,KAAAyB,aAAA0B,MAAA5B,SAAAR,SAAA7B,MAAAyB;;;QAGJ,OAAA4E;;MAGMlC,SAAAvD,UAAA6F,eAAA;QAAR,IAAAzG,QAAAE;QACE,IAAAwG,MAAAxG,KAAAuB,KAAAc,aAAA9C,GAAAkH;QACAD,IAAAE;QACAF,IAAAvB,GAAA,YAAA;UAGInF,MAAAyB,KAAAM,YAAA/B,MAAA0E;WACFxE;;MAKJiE,SAAAvD,UAAAiF,SAAA;QACQ,IAAArG,KAAAC,GAAAiD,KAAAoC,WAAAC,cAAAvF,GAAAuF,aAAAC,aAAAxF,GAAAwF,YAAAC,YAAAzF,GAAAyF,WAAAC,eAAA1F,GAAA0F;QAENhF,KAAAuB,KAAAoF,IAAA9B,aAAA7E,KAAAkF,YAAAlF;QACAA,KAAAuB,KAAAoF,IAAA7B,YAAA9E,KAAAmF,WAAAnF;QACAA,KAAAuB,KAAAoF,IAAA5B,WAAA/E,KAAAoF,UAAApF;QACAA,KAAAuB,KAAAoF,IAAA3B,cAAAhF,KAAAqF,aAAArF;;MAnHFuC,WAAA,EADC7C,SAAAH,GAAAiD,SACuByB,SAAAvD,WAAA,gBAAA;MAGxB6B,WAAA,EADC7C,SAAAH,GAAAiD,SACwByB,SAAAvD,WAAA,iBAAA;MAGzB6B,WAAA,EADC7C,SAAAH,GAAAiD,SACwByB,SAAAvD,WAAA,iBAAA;MARNuD,WAAA1B,WAAA,EADpB9C,WACoBwE;MAyHrB,OAAAA;KAzHA,CAAA1E,GAAAoD;IAAqBC,QAAAT,UAAA8B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICPrB,IAAA/E,iBAAAC,QAAA;IACA,IAAAyH,gBAAAzH,QAAA;IACA,IAAA0H,WAAA1H,QAAA;IAOA,IAAA2H,gBAAA3H,QAAA;IACA,IAAA6E,SAAA7E,QAAA;IACA,IAAA4H,SAAA5H,QAAA;IACA,IAAA6H,yBAAA7H,QAAA;IAEA,IAAA8H,aAAA9H,QAAA;IAEA,IAAA+H;KAAA,SAAAA;MACEA,WAAA,YAAA;MADF,CAEAA,eAAAA,aAAA;IAEM,IAAA5H,KAAAC,GAAAC,YAAAC,UAAAH,GAAAG,SAAAC,WAAAJ,GAAAI;IAGN,IAAAyH,gBAAA,SAAAvH;MAA2CC,UAAAsH,eAAAvH;MAA3C,SAAAuH;QAAA,IAAArH,QAAA,SAAAF,UAAAA,OAAAG,MAAAC,MAAAC,cAAAD;QAISF,MAAAqE,WAAA;QAGArE,MAAAsH,WAAA;QAGAtH,MAAAoE,UAAA;QAGApE,MAAAuH,SAAA;QAGAvH,MAAAwH,eAAA;QAGAxH,MAAAyH,iBAAA;QAGAzH,MAAA0H,iBAAA;QAGA1H,MAAA2H,aAAA;QAEA3H,MAAA4H,OAAA;QAEC5H,MAAA6H,gBAAA;QACA7H,MAAA8H,eAAA;QACD9H,MAAA+H,iBAAA;QACA/H,MAAAsE,aAAA;QACAtE,MAAAuE,cAAA;QACAvE,MAAAgI,WAAA;QACAhI,MAAAiI,gBAAA;QAECjI,MAAAkI,YAAA;QACAlI,MAAAmI,iBAAA;QACAnI,MAAAoI,YAAA;QACApI,MAAAqI,eAAA,EAAA,gBAAA,gBAAA,gBAAA,gBAAA,gBAAA;QACArI,MAAAsI,gBAAA,EAAA,OAAA,OAAA,OAAA,OAAA,OAAA;QACAtI,MAAAuI,kBAAA;QACAvI,MAAAwI,cAAA;;;MAIDnB,cAAAzG,UAAA6H,SAAA;QACL3I,OAAAc,UAAA6H,OAAAC,KAAAxI;QACA4G,cAAAzE,QAAA8C,GAAA4B,SAAA4B,yBAAAzI,KAAA0I,cAAA1I;QACAA,KAAAwH,eAAAjG,KAAAQ,SAAA;QACA7C,eAAAiD,QAAAwG,UAAA3I,KAAAqE,aAAA,KAAArE,KAAAoE,aAAApE,KAAA8H;;MAGKX,cAAAzG,UAAAgE,QAAA;QACLkC,cAAAzE,QAAA8C,GAAA4B,SAAA+B,kBAAA5I,KAAA6I,OAAA7I;QACA4G,cAAAzE,QAAA8C,GAAA4B,SAAAiC,oBAAA9I,KAAA+I,SAAA/I;QACAA,KAAAgJ;QAEAhJ,KAAAiJ;QACAjJ,KAAAkJ;QACAlJ,KAAAmJ;;MAGKhC,cAAAzG,UAAA0I,WAAA;QACLpJ,KAAAqJ,aAAA;UACEC,gBAAA;UACAC,gBAAA;UACAC,UAAA;UACAC,iBAAA;UACAC,YAAA;UACAC,UAAA;UACAC,YAAA;;QAGF5J,KAAA6J,WAAA;UACED,YAAA;UACAE,SAAA,EAAA,aAAA;;;MAIG3C,cAAAzG,UAAAmI,QAAA;MAEA1B,cAAAzG,UAAAqI,UAAA;MAEA5B,cAAAzG,UAAAqJ,YAAA;QACLC,cAAAhK,KAAAiK;QACArD,cAAAzE,QAAAwE,IAAAE,SAAA4B,yBAAAzI,KAAA0I,cAAA1I;QACA4G,cAAAzE,QAAAwE,IAAAE,SAAA+B,kBAAA5I,KAAA6I,OAAA7I;QACA4G,cAAAzE,QAAAwE,IAAAE,SAAAiC,oBAAA9I,KAAA+I,SAAA/I;QACAT,GAAA2K,QAAAlK,KAAAuB,SACEvB,KAAAuB,KAAA4I;;MAIIhD,cAAAzG,UAAAsI,cAAA;QAAR,IAAAlJ,QAAAE;QACEA,KAAAuH,iBAAAvH,KAAAuB,KAAA6I,eAAA;QACApK,KAAAqK,WAAA9K,GAAA+K,YAAAtK,KAAAyH;QACAzH,KAAAqK,SAAAtI,SAAA;QACA/B,KAAAuB,KAAAgJ,SAAAvK,KAAAqK;QACArK,KAAA0H,OAAA1H,KAAAqK,SAAAhI,aAAA0E,OAAA5E;QACAnC,KAAA0H,KAAA8C,cAAAxK,KAAAyK,gBAAAC,KAAA1K;QACAA,KAAAqK,SAAApF,GAAA1F,GAAAiD,KAAAoC,UAAAC,aAAA,SAAAS;UACExF,MAAA6K;;;MAOGxD,cAAAzG,UAAA+J,kBAAA;QACLlL,GAAAuE,IAAA;QACA9D,KAAA2H,iBAAA;QACA,IAAA3H,KAAA2H,iBAAA,GAAA;UACE3H,KAAA2K;UACA3K,KAAA8F;UACA;;QAGF9F,KAAA4H,gBACE5H,KAAA4H;;MAIIT,cAAAzG,UAAAiK,WAAA;QACN3K,KAAA2H,gBAAA;QACA3H,KAAA0H,KAAAkD;QAGA5K,KAAA6K;;MAGK1D,cAAAzG,UAAAwE,aAAA;QACLlF,KAAAiK,YACED,cAAAhK,KAAAiK;;MAIG9C,cAAAzG,UAAAoF,YAAA;QAAP,IAAAhG,QAAAE;QACEA,KAAAiK,YACED,cAAAhK,KAAAiK;QAEFjK,KAAAiK,WAAAa,YAAA;UACE,IAAAhL,MAAA+H,iBAAA,GAAA;YACE/H,MAAAuK,SAAAtI,SAAA;YACAjC,MAAAiL;YACAjL,MAAAuK,SAAApF,GAAA1F,GAAAiD,KAAAoC,UAAAC,aAAA,SAAAS;cACExF,MAAA6K;;;WAGN;;MAIMxD,cAAAzG,UAAAqK,eAAA;QAAR,IAAAjL,QAAAE;QAEE,IAAAgL,MAAAhL,KAAAkE,QAAAkC,SAAA6E,KAAA,SAAAC;UACE,OAAA,UAAAA,QAAAd,eAAA,cAAArI;;QAGF,IAAAnB,OAAAZ,KAAAoH,SAAAhB,SAAA6E,KAAA,SAAAC;UACE,OAAAA,QAAAnJ,UAAAiJ,IAAA3I,aAAA,OAAAtB,UAAAmK;;QAEFlL,KAAAmL,SAAAvK;QACAZ,KAAA0H,KAAA0D,SAAA;UACE7L,GAAA8L,MAAAvL,MAAA4H,KAAA4D,QAAAC,GAAA,GAAA;YAAAC,UAAAR,IAAAQ;aAAAhD,KAAA;YACE1I,MAAA4H,KAAA+D,OAAA;cACE3L,MAAA6K;cACA7K,MAAAgG;;aAEJpB;;;MAIIyC,cAAAzG,UAAAgL,aAAA;MAEAvE,cAAAzG,UAAAyK,WAAA,SAAAQ;QACN3L,KAAA0H,KAAAkE,cAAAD,QAAA3L,KAAAoH,UAAA;;MAGYD,cAAAzG,UAAAwI,eAAA;;;;;;cACZlJ,KAAAmE,SAAA9B,aAAA2B,OAAA7B,SAAA0J;cACA,OAAA,EAAA,GAAA7L,KAAAmE,SAAA9B,aAAA2B,OAAA7B,SAAA2J;;;cAAAxM,GAAA0G;cAEAhG,KAAA4H,eAAA5H,KAAA+K;cAEAjE,cAAA3E,QAAA4J,SAAAC,YAAA,GAAA;gBACElM,MAAAmM,SAAA,GAAA,OAAA,eAAA,eAAA;kBAMInM,MAAA8H;;;;;;;;MAMAT,cAAAzG,UAAAuI,gBAAA;QACNjJ,KAAAuH,eAAAxF,SAAA;;MAGMoF,cAAAzG,UAAAmK,gBAAA;QACN7K,KAAAuH,eAAAxF,SAAA;;MAIWoF,cAAAzG,UAAA4B,gBAAA;;;;YACXtC,KAAAkI;YACAlI,KAAA6H;YACAtI,GAAAuE,IAAA,sBAAA9D,KAAAkI;YACA,IAAAlI,KAAAkI,aAAAlI,KAAAgI,WAAA;cAEEzI,GAAAuE,IAAA;cACA9D,KAAAiM,SAAA,GAAA,MAAA,MAAA,MAAA;gBACEnM,MAAAqE,SAAA9B,aAAA2B,OAAA7B,SAAA+J;gBACAhN,eAAAiD,QAAAgK;gBACAvF,cAAAzE,QAAAiK,KAAAvF,SAAAwF;;cAGF,OAAA,EAAA;;YAEA9M,GAAAuE,IAAA;YACA,IAAA9D,KAAA6H,iBAAA,GAA+B,OAAA,EAAA;YAC/B,IAAA7H,KAAA6H,mBAAA7H,KAAAiI,gBAAA;cACEjI,KAAAiK,YACED,cAAAhK,KAAAiK;cAEFjK,KAAA2K;cACApL,GAAAuE,IAAA;cACA9D,KAAAsM,YAAAC,eAAA;cACAvM,KAAAwM,aAAA;gBACE1M,MAAAqE,SAAA9B,aAAA2B,OAAA7B,SAAAsK,aAAA;kBACE3M,MAAAmM,SAAA,GAAA,MAAA,MAAA,MAAA;oBACEnM,MAAA4M;oBACA5M,MAAAwM,YAAAC,eAAA;;;iBAGN;mBAEAvM,KAAA2M;;;;;MAMOxF,cAAAzG,UAAAgM,mBAAA;;;;;;cACX1M,KAAAmE,SAAAiG,eAAA,UAAArI,SAAA;cACA/B,KAAAmE,SAAAiG,eAAA,WAAArI,SAAA;cACA/B,KAAAmE,SAAA9B,aAAA2B,OAAA7B,SAAAyK;cACA5M,KAAA6M;cACA,OAAA,EAAA,GAAA7M,KAAA8M;;;cAAAxN,GAAA0G;cACA,OAAA,EAAA,GAAAhG,KAAAmE,SAAA9B,aAAA2B,OAAA7B,SAAA4K;;;cAAAzN,GAAA0G;cACAhG,KAAAmE,SAAA9B,aAAA2B,OAAA7B,SAAA6K;cACAhN,KAAAmE,SAAA9B,aAAA2B,OAAA7B,SAAA8D;cAEAjG,KAAAiM,SAAA,GAAA,OAAA,MAAA,MAAA;gBACEnM,MAAA6M;;;;;;;MAIIxF,cAAAzG,UAAAyI,QAAA;QACN,IAAA8D,KAAAjN,KAAAsH,aAAA8C,eAAA;QACA6C,GAAAC,QAAAlN,KAAAqH,OAAAjB,SAAA,GAAA8G;QACAD,GAAAE,SAAAnN,KAAAqH,OAAAjB,SAAA,GAAA+G;QACAnN,KAAAsH,aAAA/B,IAAAvF,KAAAqH,OAAAjB,SAAA,GAAA8G;;MAGM/F,cAAAzG,UAAAmM,mBAAA;QAAR,IAAA/M,QAAAE;QACE,OAAA,IAAAiD,QAAA,SAAAC;UACE3D,GAAA8L,MAAAvL,MAAAwH,cACG8F,GAAA,GAAA;YAAA7H,IAAAzF,MAAAuH,OAAAjB,SAAA,GAAA8G;aACA1E,KAAA;YACCtF;aAEDwB;;;MAICyC,cAAAzG,UAAAoM,aAAA;QAAR,IAAAhN,QAAAE;QACE,OAAA,IAAAiD,QAAA,SAAAC;UACE3D,GAAA8L,MAAAvL,MAAAuH,QACG+F,GAAA,GAAA;YAAA7H,IAAAzF,MAAAuH,OAAAjB,SAAA,GAAA8G;aACA1E,KAAA;YACCtF;aAEDwB;;;MAICyC,cAAAzG,UAAAuL,WAAA,SAAAoB,KAAAC,YAAAC,OAAAC,OAAAC;QACN,IAAAC,aAAA;UACEC,WAAAN;UACAO,UAAAN;UACAO,WAAA;YACEN,SAAAA;;UAEFO,WAAA;YACEN,SAAAA;;UAEFO,WAAA;YACEN,SAAAA;;;QAGJzN,KAAAsM,YAAA0B,aAAAN;;MAIYvG,cAAAzG,UAAAuN,qBAAA;;;;;cACZ1O,GAAAuE,IAAA,8BAAA9D,KAAAkI;cACAlI,KAAAkO;cACA,OAAA,EAAA,GAAAlO,KAAAmE,SAAA9B,aAAA2B,OAAA7B,SAAAgM,YAAAnO,KAAAkI,YAAA;;;cAAA5I,GAAA0G;cACI,MAAA,MAAAhG,KAAAkI,YAAA,OAAA,EAAA,GAAA;cACF,OAAA,EAAA,GAAAlI,KAAAsH,aAAAjF,aAAA4E,WAAA9E,SAAAiM;;;cAAA9O,GAAA0G;cACAhG,KAAAsC;;;;cAEAtC,KAAAsC;;;;;;;;;MAKU6E,cAAAzG,UAAA2N,qBAAA;;;;;cACZ9O,GAAAuE,IAAA;cACA,OAAA,EAAA,GAAA9D,KAAAmE,SAAA9B,aAAA2B,OAAA7B,SAAAmM,YAAAtO,KAAAkI,YAAA;;;cAAA5I,GAAA0G;cACAhG,KAAA2M;;;;;;MAEMxF,cAAAzG,UAAAwN,YAAA;QACNlO,KAAAwH,eAAAjG,KAAAQ,SAAA;QACA/B,KAAAwH,eAAArE,aAAA,GAAA,aAAA;;MAIMgE,cAAAzG,UAAA6N,UAAA;MAQApH,cAAAzG,UAAA8N,iBAAA,SAAAC;QACN,IAAAC,OAAAD,aAAA,GAAA;UACEvP,eAAAiD,QAAAC,WAAApC,KAAAqE,aAAA,KAAArE,KAAAoE,aAAA8C,WAAAyH;UAIA;;;MAKIxH,cAAAzG,UAAAiM,gBAAA;QAAR,IAAA7M,QAAAE;QACET,GAAAuE,IAAA;QACA9D,KAAA4O,iBAAA5O,KAAAmI,aAAAnI,KAAAkI,YAAAlI,KAAAqE,aAAA,KAAArE,KAAAoE,aAAApE,KAAAsI;QACAuG;;MASM1H,cAAAzG,UAAAgI,eAAA,SAAAoG;QACNvP,GAAAuE,IAAA,gBAAAgL,OAAAC;QACA,cAAAD,OAAAC,KAAAC,cACEF,OAAAC,KAAAE,UACEjP,KAAAiO,uBAEAjO,KAAAqO;;MA9WN9L,WAAA,EADC7C,SAAAH,GAAAiD,SAC+B2E,cAAAzG,WAAA,iBAAA;MAGhC6B,WAAA,EADC7C,SAAAH,GAAAiD,SAC+B2E,cAAAzG,WAAA,iBAAA;MAGhC6B,WAAA,EADC7C,SAAAH,GAAAiD,SAC8B2E,cAAAzG,WAAA,gBAAA;MAG/B6B,WAAA,EADC7C,SAAAH,GAAAiD,SAC6B2E,cAAAzG,WAAA,eAAA;MAG9B6B,WAAA,EADC7C,SAAAH,GAAAiD,SACmC2E,cAAAzG,WAAA,qBAAA;MAGpC6B,WAAA,EADC7C,SAAAH,GAAAiD,SACqC2E,cAAAzG,WAAA,uBAAA;MAGtC6B,WAAA,EADC7C,SAAA+C,GAAAC,aACyCyE,cAAAzG,WAAA,uBAAA;MAG1C6B,WAAA,EADC7C,SAAA;QAAAwP,MAAA3P,GAAA4P;QAAAC,aAAA;YACmCjI,cAAAzG,WAAA,mBAAA;MAzBjByG,gBAAA5E,WAAA,EADpB9C,WACoB0H;MAsXrB,OAAAA;KAtXA,CAAAH,uBAAA7E;IAAqBS,QAAAT,UAAAgF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICvBrB,IAAA/H,SAAAD,QAAA;IACA,IAAA8H,aAAA9H,QAAA;IAEM,IAAAG,KAAAC,GAAAC,YAAAC,UAAAH,GAAAG,SAAAC,WAAAJ,GAAAI;IAEN,IAAA2P;KAAA,SAAAA;MACEA,SAAA,cAAA;MACAA,SAAA,iBAAA;MACAA,SAAA,cAAA;MACAA,SAAA,cAAA;MACAA,SAAA,UAAA;MACAA,SAAA,WAAA;MACAA,SAAA,WAAA;MACAA,SAAA,WAAA;MACAA,SAAA,aAAA;MACAA,SAAA,UAAA;MAVF,CAWAA,aAAAA,WAAA;IAEA,IAAAC;KAAA,SAAAA;MACEA,UAAA,aAAA;MACAA,UAAA,QAAA;MACAA,UAAA,WAAA;MACAA,UAAA,WAAA;MACAA,UAAA,YAAA;MACAA,UAAA,eAAA;MACAA,UAAA,eAAA;MACAA,UAAA,SAAA;MARF,CASAA,cAAAA,YAAA;IAGA,IAAAC,OAAA,SAAA3P;MAAkCC,UAAA0P,MAAA3P;MAAlC,SAAA2P;QAAA,IAAAzP,QAAA,SAAAF,UAAAA,OAAAG,MAAAC,MAAAC,cAAAD;QAEEF,MAAA0P,KAAA;QAGA1P,MAAAoE,UAAA;QAGApE,MAAA2P,UAAA;QAGA3P,MAAAwH,eAAA;QAGAxH,MAAAO,QAAA;QAEQP,MAAA4P,UAAA;QACA5P,MAAA6P,UAAA;;;MAGRJ,KAAA7O,UAAAgE,QAAA;MAGO6K,KAAA7O,UAAAuF,oBAAA;QACL7G,OAAA6C,mBAAAjC,KAAAwP,IAAAH,SAAAO,MAAA;QACA5P,KAAAwP,GAAArM,aAAA,GAAAkM,SAAAO,MAAA;QACA5P,KAAAwP,GAAAK,oBAAA7P,KAAA8P,OAAApF,KAAA1K;;MAIMuP,KAAA7O,UAAAoP,SAAA;QACN,IAAAC,OAAAC,KAAAF;QACAvQ,GAAAuE,IAAA,WAAAiM;QACA,IAAAA,OAAA,IAAA;UACE3Q,OAAA6C,mBAAAjC,KAAAwP,IAAAH,SAAAY,OAAA;UACAjQ,KAAAwP,GAAAK,oBAAA7P,KAAAiG,kBAAAyE,KAAA1K;;;MAKGuP,KAAA7O,UAAAkM,oBAAA;QACLxN,OAAA6C,mBAAAjC,KAAAwP,IAAAH,SAAAa,MAAA;QACAlQ,KAAAwP,GAAAK,oBAAA;;MAIWN,KAAA7O,UAAAwF,qBAAA;;;;aACX,KAAA;cAAA,OAAA,EAAA,GAAA9G,OAAA6C,mBAAAjC,KAAAwP,IAAAH,SAAAc;;;cAAA7Q,GAAA0G;cACAhG,KAAAwP,GAAAK,oBAAA;;;;;;MAIWN,KAAA7O,UAAA0P,uBAAA;;;;aACX,KAAA;cAAA,OAAA,EAAA,GAAAhR,OAAA6C,mBAAAjC,KAAAwP,IAAAH,SAAAgB;;;cAAA/Q,GAAA0G;cACAhG,KAAAwP,GAAAK,oBAAA;;;;;;MAIWN,KAAA7O,UAAAqF,qBAAA;;;;aACX,KAAA;cAAA,OAAA,EAAA,GAAA3G,OAAA6C,mBAAAjC,KAAAwP,IAAAH,SAAAiB;;;cAAAhR,GAAA0G;cACAhG,KAAAwP,GAAAK,oBAAA;;;;;;MAIWN,KAAA7O,UAAA6P,mBAAA;;;YACXvQ,KAAAwP,GAAAjO,KAAAiP,UAAA;YACAxQ,KAAAuB,KAAA6I,eAAA,WAAArI,SAAA;YACA3C,OAAA6C,mBAAAjC,KAAAwP,IAAAH,SAAAoB,UAAA;;;;;MAIKlB,KAAA7O,UAAAmL,WAAA;QACL,IAAA6E,YAAAnR,GAAAoR,KAAAC;QACArR,GAAAuE,IAAA4M;QACA1Q,KAAAuB,KAAAgE,KAAAmL,UAAAxD,QAAA;QAEAlN,KAAAuB,KAAAkE,IAAAzF,KAAAyP,QAAAhK;QACAzF,KAAA0P,UAAA,MAAAgB,UAAAxD;QACA3N,GAAAuE,IAAA9D,KAAAuB,KAAAgE,GAAAvF,KAAAuB,KAAAkE,GAAAzF,KAAA0P;;MAIKH,KAAA7O,UAAAoL,mBAAA;QAAP,IAAAhM,QAAAE;QACE,OAAA,IAAAiD,QAAA,SAAAC;UACEpD,MAAA8M;UACArN,GAAA8L,MAAAvL,MAAAyB,MACGgK,GAAA,GAAA;YAAAhG,GAAAzF,MAAA2P,QAAAlK,IAAA;aACAiD,KAAA;YAAA,OAAAqI,UAAA/Q,YAAA,QAAA,GAAA;;;iBACC,KAAA;kBAAA,OAAA,EAAA,GAAAE,KAAAoQ;;;kBAAA9Q,GAAA0G;kBACAhG,KAAAiG;kBACA/C;;;;;aAEDwB;;;MAIA6K,KAAA7O,UAAA+L,eAAA,SAAAqE;QAAP,IAAAhR,QAAAE;QACEA,KAAAuB,KAAA6I,eAAA,UAAArI,SAAA;QACA,IAAAgP,UAAA/Q,KAAAuB,KAAAS;QACAhC,KAAAkE,QAAAkC,SAAAC,QAAA,SAAAzF,MAAAoQ;UACEzR,GAAA8L,MAAAzK,MACG2K,GAAA,IAAA;YAAAhG,GAAAwL,QAAAxL,IAAA;YAAAE,GAAAsL,QAAAtL,IAAA;YAAAwL,OAAA;aACA1F,GAAA,IAAA;YAAAhG,GAAAwL,QAAAxL,IAAA;YAAAE,GAAAsL,QAAAtL,IAAA;YAAAwL,OAAA;aACAvM;;QAGL1E,KAAAwM,aAAA;UACE1M,MAAAO,MAAAkB,KAAAQ,SAAA;UACAjC,MAAAO,MAAAkB,KAAAM,YAAA/B,MAAAyB,KAAAS,cAAAuD,IAAA,KAAAzF,MAAAyB,KAAAS,cAAAyD,IAAA;UAIArG,OAAA6C,mBAAAnC,MAAAO,OAAA,aAAA6B,KAAA;YACEpC,MAAAO,MAAAkB,KAAAQ,SAAA;YACA+O,QAAAA;;WAEJ;QAEA9Q,KAAAwM,aAAA;UACE1M,MAAAyB,KAAA6I,eAAA,UAAArI,SAAA;UACAjC,MAAAyB,KAAA6I,eAAA,WAAArI,SAAA;WACF;;MAGKwN,KAAA7O,UAAAsM,iBAAA;QACLhN,KAAAuB,KAAA6I,eAAA,UAAArI,SAAA;QACA/B,KAAAuB,KAAA6I,eAAA,WAAArI,SAAA;QACA,IAAAmP,MAAAlR,KAAAuB,KAAA6I,eAAA,WAAApI;QACAhC,KAAAuB,KAAA6I,eAAA,WAAAvI,aAAAqP,IAAA3L,IAAA,IAAA2L,IAAAzL,IAAA;QACAzF,KAAAuB,KAAA6I,eAAA,WAAA6G,QAAA;;MAGK1B,KAAA7O,UAAAwL,UAAA;QAAP,IAAApM,QAAAE;QACE,OAAA,IAAAiD,QAAA,SAAAC;UACEpD,MAAAyQ;UACA,IAAAG,YAAAnR,GAAAoR,KAAAC;UACArR,GAAA8L,MAAAvL,MAAAyB,MACGgK,GAAA,GAAA;YAAAhG,IAAAmL,UAAAxD,QAAA;aACA1E,KAAA;YACC1I,MAAAmG;YACA/C;aAEDwB;;;MAIA6K,KAAA7O,UAAAqM,kBAAA;QAAP,IAAAjN,QAAAE;QACE,OAAA,IAAAiD,QAAA,SAAAC;UACE3D,GAAA8L,MAAAvL,MAAAyB,MACG6L,GAAA,IAAA;YAAA7H,GAAA;aACAiD,KAAA;YACCtF;aAEDwB;;;MAKA6K,KAAA7O,UAAAyN,cAAA,SAAAd;QAAP,IAAAvN,QAAAE;aAAmB,MAAAqN,QAAAA,MAAA;QACjB,OAAA,IAAApK,QAAA,SAAAC;UACE,IAAAiO,SAAA;UACA,IAAA,MAAA9D,KAAA;YACE8D,SAAA;YACArR,MAAA0P,GAAA4B,QAAA9B,UAAA+B;iBACK;YACLF,SAAA;YACArR,MAAA0P,GAAA4B,QAAA9B,UAAAgC;;UAEFxR,MAAAwH,aACGjF,aAAA4E,WAAA9E,SACAoP,cAAAlE,KAAA8D,QAAA;UACHrR,MAAAoG,qBAAAhE,KAAA;YACEgB;YACApD,MAAAmG;;;;MAMCsJ,KAAA7O,UAAA4N,cAAA,SAAAjB;QAAP,IAAAvN,QAAAE;aAAmB,MAAAqN,QAAAA,MAAA;QACjB,OAAA,IAAApK,QAAA,SAAAC;UACE,IAAAiO,SAAA;UACA,IAAA,MAAA9D,KAAA;YACE,IAAAmE,MAAAxB,KAAAF;YACA,IAAA0B,MAAA,IAAA;cACE1R,MAAA0P,GAAA4B,QAAA9B,UAAAmC;cACAN,SAAA;mBACK;cACLrR,MAAA0P,GAAA4B,QAAA9B,UAAAoC;cACAP,SAAA;;iBAEG;YACL,IAAAK,MAAAxB,KAAAF;YACA,IAAA0B,MAAA,IAAA;cACEL,SAAA;cACArR,MAAA0P,GAAA4B,QAAA9B,UAAAqC;mBACK;cACLR,SAAA;cACArR,MAAA0P,GAAA4B,QAAA9B,UAAAsC;;;UAGJ9R,MAAAwH,aACGjF,aAAA4E,WAAA9E,SACAoP,cAAAlE,KAAA8D,QAAA;UACHrR,MAAAsQ,uBAAAlO,KAAA;YACEgB;YACA,MAAAmK,MACEvN,MAAA0P,GAAA4B,QAAA9B,UAAAuC,MAEA/R,MAAA0P,GAAA4B,QAAA9B,UAAA+B;YAEFvR,MAAAmG;YACAnG,MAAAwH,aACGjF,aAAA4E,WAAA9E,SACAoP,cAAAlE,KAAA8D,QAAA;;;;MApNT5O,WAAA,EADC7C,SAAA+C,GAAAC,aACsB6M,KAAA7O,WAAA,WAAA;MAGvB6B,WAAA,EADC7C,SAAAH,GAAAiD,SACuB+M,KAAA7O,WAAA,gBAAA;MAGxB6B,WAAA,EADC7C,SAAAH,GAAAiD,SACuB+M,KAAA7O,WAAA,gBAAA;MAGxB6B,WAAA,EADC7C,SAAAH,GAAAiD,SAC4B+M,KAAA7O,WAAA,qBAAA;MAG7B6B,WAAA,EADC7C,SAAA+C,GAAAC,aACyB6M,KAAA7O,WAAA,cAAA;MAdP6O,OAAAhN,WAAA,EADpB9C,WACoB8P;MA4NrB,OAAAA;KA5NA,CAAAhQ,GAAAoD;IAAqBC,QAAAT,UAAAoN;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IC9Bf,IAAAjQ,KAAAC,GAAAC,YAAAC,UAAAH,GAAAG,SAAAC,WAAAJ,GAAAI;IAGN,IAAAoS,WAAA,SAAAlS;MAAsCC,UAAAiS,UAAAlS;MAAtC,SAAAkS;QAAA,IAAAhS,QAAA,SAAAF,UAAAA,OAAAG,MAAAC,MAAAC,cAAAD;QAEEF,MAAAiS,SAAA;QAGAjS,MAAAkS,SAAA;QAGAlS,MAAAmS,WAAA;;;MAKOH,SAAApR,UAAA0N,oBAAA;QAAP,IAAAtO,QAAAE;QACE,OAAA,IAAAiD,QAAA,SAAAC;UACE,IAAAsB,YAAA1E,MAAAmS,SAAAjQ;UACAzC,GAAA8L,MAAAvL,MAAAmS,UACG1G,GAAA,GAAA;YAAAhG,IAAAf,UAAAe;aACAiD,KAAA;YACCtF;YACApD,MAAAiS,OAAAhQ,SAAA;aAED2C;;;MAIAoN,SAAApR,UAAAwR,gBAAA,SAAA7E;aAAc,MAAAA,QAAAA,MAAA;QACnB,MAAAA,MACErN,KAAA+R,OAAA3H,eAAA,OAAArI,SAAA,QAEA/B,KAAAgS,OAAA5H,eAAA,OAAArI,SAAA;;MAUG+P,SAAApR,UAAA6Q,gBAAA,SAAAlE,KAAApM,MAAAc;QACL,MAAAsL,MACErN,KAAA+R,OAAA3H,eAAAnJ,MAAAc,SAAAA,SAEA/B,KAAAgS,OAAA5H,eAAAnJ,MAAAc,SAAAA;;MAIJ+P,SAAApR,UAAAgE,QAAA;MA9CAnC,WAAA,EADC7C,SAAAH,GAAAiD,SACsBsP,SAAApR,WAAA,eAAA;MAGvB6B,WAAA,EADC7C,SAAAH,GAAAiD,SACsBsP,SAAApR,WAAA,eAAA;MAGvB6B,WAAA,EADC7C,SAAAH,GAAAiD,SACwBsP,SAAApR,WAAA,iBAAA;MARNoR,WAAAvP,WAAA,EADpB9C,WACoBqS;MAmDrB,OAAAA;KAnDA,CAAAvS,GAAAoD;IAAqBC,QAAAT,UAAA2P","sourcesContent":["import AudioManager from \"../../../kit/system/audio/AudioManager\";\nimport { playSpineAnimation } from \"./comp\";\nimport RedSantaClaus from \"./redSantaClaus\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Box extends cc.Component {\n  @property(cc.Node)\n  mainNode: cc.Node = null;\n\n  @property(cc.Node)\n  objNode: cc.Node = null;\n\n  @property(cc.Node)\n  endBoxNode: cc.Node = null;\n\n  @property(sp.Skeleton)\n  yanSk: sp.Skeleton = null;\n\n  private objectIndex = 0; // 物体数量\n  private objectTypeArr: string[] = []; //  \"apple\",\"car\"，两种类型\n  private objPosition = [cc.v2(-60, 0), cc.v2(40, 0)]; // 苹果放在第一个位置，车放在第二个位置\n\n  /** 检测是否可以放入 */\n  public checkBox(item: cc.Node) {\n    // 检测是否碰撞了\n    if (this.checkCollision(item)) {\n      // 检测是否重复放入\n      return this.checkPutIn(item);\n    } else {\n      return false;\n    }\n  }\n\n  // 检测是否可以放入\n  public checkItem(item: cc.Node): boolean {\n    let objType = item.name.substring(0, item.name.length - 1);\n    return !this.objectTypeArr.includes(objType);\n  }\n\n  /** 检测是否可以放入 */\n  private checkPutIn(item: cc.Node): boolean {\n    let objType = item.name.substring(0, item.name.length - 1);\n    if (!this.objectTypeArr.includes(objType)) {\n      this.objectTypeArr.push(objType);\n      // cc.log(`无当前类型  ${objType} 可以放入 === ${this.objectTypeArr}`);\n      return true;\n    }\n    // cc.log(`存在当前类型  ${objType}`);\n    return false;\n  }\n\n  private checkCollision(item: cc.Node) {\n    let rect1 = this.node.getBoundingBoxToWorld();\n    let rect2 = item.getBoundingBoxToWorld();\n    if (rect1.intersects(rect2)) {\n      return true;\n    }\n    return false;\n  }\n\n  /** 放入盒子里 */\n  public putInBox(item: cc.Node) {\n    item.parent = this.objNode;\n    let objType = item.name.substring(0, item.name.length - 1);\n    if (objType === \"apple\") {\n      item.setPosition(this.objPosition[0]);\n    } else {\n      item.setPosition(this.objPosition[1]);\n    }\n    this.checkBoxEnd();\n  }\n\n  private checkBoxEnd() {\n    if (this.objectTypeArr.length >= 2) {\n      this.yanSk.node.active = true;\n      this.yanSk.node.setPosition(this.node.getPosition());\n      playSpineAnimation(this.yanSk, \"animation\").then(() => {\n        this.yanSk.node.active = false;\n      });\n      this.endBoxNode.active = true;\n      AudioManager.playEffect('redSantaClaus','audio/SE_shengdanlaoren07_ytz');\n\n      this.mainNode.getComponent(RedSantaClaus).nextGameLevel();\n    }\n  }\n\n}\n","/**\n * 播放一次骨骼动画，支持await\n * @param spine\n * @param animation 动画名字\n * @param loop\n * @param trackIndex\n * @returns\n */\nexport function playSpineAnimation(\n  spine: sp.Skeleton,\n  animation: string,\n  loop = false,\n  trackIndex = 0\n) {\n  if (loop) {\n    return Promise.resolve().then(() => {\n      spine.setAnimation(trackIndex, animation, loop);\n    });\n  } else {\n    return new Promise((resolve) => {\n      let en: sp.spine.TrackEntry = spine.setAnimation(\n        trackIndex,\n        animation,\n        loop\n      );\n      spine.setTrackCompleteListener(en, () => {\n        resolve(null);\n      });\n    });\n  }\n}\n\n/**\n *\n * @param url 加载图片路径\n * @returns cc.SpriteFrame\n */\nexport function loadSpriteFrame(\n  url: string\n): Promise<cc.SpriteFrame | undefined> {\n  return new Promise((resolve) => {\n    cc.resources.load(url, cc.SpriteFrame, (err, sprite: cc.SpriteFrame) => {\n      if (err) {\n        console.log(err, \"SpriteFrame 加载失败===============>>\");\n      } else {\n        resolve(sprite);\n      }\n    });\n  });\n}\n","import AudioManager from \"../../../kit/system/audio/AudioManager\";\nimport Box from \"./box\";\nimport RedSantaClaus from \"./redSantaClaus\";\nimport Role from \"./role\";\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class MoveItem extends cc.Component {\n  @property(cc.Node)\n  boxNode: cc.Node = null;\n\n  @property(cc.Node)\n  roleNode: cc.Node = null;\n\n  @property(cc.Node)\n  mainNode: cc.Node = null;\n\n  public MUSIC_PATH: string = \"audio/\";\n  public BUNDLE_NAME: string = \"redSantaClaus\";\n  public AUDIO_NAME: string = \"red\";\n  public AUDIO_ERROR: string = \"game_error\";\n  public originPos: cc.Vec2 = null; // 原始位置\n\n  public mainComp: RedSantaClaus = null; // 原始位置\n  // onLoad () {}\n\n  start() {\n    this.onClick();\n  }\n\n  private onClick() {\n    const { TOUCH_START, TOUCH_MOVE, TOUCH_END, TOUCH_CANCEL } =\n      cc.Node.EventType;\n    this.node.on(TOUCH_START, this.touchStart, this);\n    this.node.on(TOUCH_MOVE, this.touchMove, this);\n    this.node.on(TOUCH_END, this.touchEnd, this);\n    this.node.on(TOUCH_CANCEL, this.touchCancel, this);\n  }\n\n  private touchStart() {\n    this.originPos = this.node.getPosition();\n    this.mainNode.getComponent<RedSantaClaus>(RedSantaClaus).touchStart();\n  }\n\n  private touchMove(event: cc.Event.EventTouch) {\n    this.node.x += event.getDelta().x;\n    this.node.y += event.getDelta().y;\n    // event.target.setSiblingIndex(cc.macro.MAX_ZINDEX);\n  }\n\n  private touchEnd() {\n    if (this.checkMoveObj()) {\n      // cc.log(`正确放入~~~~`);\n      this.cancel();\n      this.playRight();\n    } else {\n      // cc.log(`不能放入~~~~`);\n      this.playWrong();\n      this.node.setPosition(this.originPos);\n    }\n    this.showGuide()\n  }\n\n  // 显示引导\n  private showGuide() {\n    this.mainNode.getComponent<RedSantaClaus>(RedSantaClaus).showGuide();\n  }\n\n  private async playWrong() {\n    // TODO 错误音效\n    AudioManager.playEffect(\n      this.BUNDLE_NAME,\n      `${this.MUSIC_PATH}${this.AUDIO_ERROR}`\n    );\n\n    // todo 圣诞老人思考+脑泡动画\n    await this.roleNode.getComponent(Role).palyThinkAnimation();\n    this.roleNode.getComponent(Role).palyIdleAnimation();\n  }\n\n  private async playRight() {\n    AudioManager.playEffect(\n      this.BUNDLE_NAME,\n      `${this.MUSIC_PATH}${this.AUDIO_NAME}`\n    );\n\n    await this.roleNode.getComponent(Role).palyHappyAnimation();\n    this.roleNode.getComponent(Role).palyIdleAnimation();\n  }\n\n  private touchCancel() {\n    this.node.setPosition(this.originPos);\n  }\n\n  private checkMoveObj() {\n    let bool = false;\n    this.boxNode.children.forEach((item) => {\n      let isTrue = item.getComponent(Box).checkBox(this.node);\n      if (isTrue && !bool) {\n        bool = true;\n        item.getComponent(Box).putInBox(this.node);\n      }\n    });\n    return bool;\n  }\n\n  private playWrongAni() {\n    let ani = this.node.getComponent(cc.Animation);\n    ani.play();\n    ani.on(\n      \"finished\",\n      () => {\n        this.node.setPosition(this.originPos);\n      },\n      this\n    );\n  }\n\n  cancel() {\n    const { TOUCH_START, TOUCH_MOVE, TOUCH_END, TOUCH_CANCEL } =\n      cc.Node.EventType;\n    this.node.off(TOUCH_START, this.touchStart, this);\n    this.node.off(TOUCH_MOVE, this.touchMove, this);\n    this.node.off(TOUCH_END, this.touchEnd, this);\n    this.node.off(TOUCH_CANCEL, this.touchCancel, this);\n  }\n\n  // update (dt) {}\n}\n","import AudioManager from \"../../../kit/system/audio/AudioManager\";\nimport EventSystem from \"../../../kit/system/event/EventSystem\";\nimport {\n  FOLLOW_CLIENT_TO_MODULE,\n  FOLLOW_MODULE_TO_CLIENT,\n  LIFE_CYCLE_BLOCK,\n  LIFE_CYCLE_COMPLETE,\n  LIFE_CYCLE_UNBLOCK,\n} from \"../../../kit/events/events\";\nimport TimerSystem from \"../../../kit/system/timer/TimerSystem\";\nimport Role from \"./role\";\nimport Hand from \"../../../common/hand/Hand\";\nimport ChapterGameComponent from \"../../../common/scripts/ChapterGameComponent\";\nimport { GameTaskShowParam } from \"../../../common/structure/CompInterface\";\nimport Wardrobe from './wardrobe';\n\nconst enum MUSIC_TYPE {\n  YELLOW = \"luoshui\",\n}\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class RedSantaClaus extends ChapterGameComponent {\n\n\n  @property(cc.Node)\n  public roleNode: cc.Node = null;\n\n  @property(cc.Node)\n  public moveNode: cc.Node = null;\n\n  @property(cc.Node)\n  public boxNode: cc.Node = null;\n\n  @property(cc.Node)\n  public bgNode: cc.Node = null;\n\n  @property(cc.Node)\n  public wardrobeNode: cc.Node = null;\n\n  @property(cc.Node)\n  public blockInputNode: cc.Node = null;\n\n  @property(sp.Skeleton)\n  public smokeAnimation: sp.Skeleton = null;\n\n  @property({ type: cc.Prefab, displayName: \"引导手\" })\n  public handPrefab: cc.Prefab = null;\n\n  public hand: Hand = null;\n\n  private gameHandCount = 0; // 小手引导次数\n  private gameHandFunc = null; // 小手引导次数\n  public gameFirstCount = 0; // 第一部分环节数\n  public MUSIC_PATH: string = \"audio/\";\n  public BUNDLE_NAME: string = \"redSantaClaus\";\n  public MUSIC_BG: string = \"BGM_shengdanlaoren01_ytz\"\n  public MUSIC_SUCCESS: string = \"SE_shengdanlaoren07_ytz\"\n\n  private gameTotal = 5;\n  private gameFirstTotal = 3;\n  private gameIndex = 0; // 游戏关卡\n  private gameWordData: string[] = [\"红色\", \"红色\", \"红色\", \"红色\", \"红色\", \"红色\",];\n  private gameWordAudio: string[] = [\"red\", \"red\", \"red\", \"red\", \"red\", \"red\"];\n  private startRecordFunc = null;\n  private recordAudio = \"red\";\n  private timerKey: any;\n  private handNode: cc.Node;\n\n  public onLoad() {\n    super.onLoad();\n    EventSystem.on(FOLLOW_MODULE_TO_CLIENT, this.recordResult, this);\n    this.smokeAnimation.node.active = false;\n    AudioManager.playMusic(this.BUNDLE_NAME, `${this.MUSIC_PATH}${this.MUSIC_BG}`);\n  }\n\n  public start() {\n    EventSystem.on(LIFE_CYCLE_BLOCK, this.block, this);\n    EventSystem.on(LIFE_CYCLE_UNBLOCK, this.onBlock, this);\n    this.initAllNode();\n    // this.palyBGM();\n    this.showBlockNode();\n    this.startRunGame();\n    this.setBg();\n  }\n\n  public initData() {\n    this.recordData = {\n      evaluatingType: 1,\n      evaluatingText: \"\",\n      tryTimes: 1,\n      evaluationScore: 30,\n      recordTime: 3,\n      iconPath: \"res/read\",\n      bundleName: \"redSantaClaus\"\n    };\n\n    this.taskData = {\n      bundleName: \"redSantaClaus\",\n      imgList: [\"res/task1\", \"res/task2\"],\n    };\n  }\n\n  public block() { }\n\n  public onBlock() { }\n\n  public onDestroy() {\n    clearInterval(this.timerKey)\n    EventSystem.off(FOLLOW_MODULE_TO_CLIENT, this.recordResult, this);\n    EventSystem.off(LIFE_CYCLE_BLOCK, this.block, this);\n    EventSystem.off(LIFE_CYCLE_UNBLOCK, this.onBlock, this);\n    if (cc.isValid(this.node)) {\n      this.node.destroy();\n    }\n  }\n\n  private initAllNode() {\n    this.blockInputNode = this.node.getChildByName(\"blockInputNode\");\n    this.handNode = cc.instantiate(this.handPrefab);\n    this.handNode.active = false;\n    this.node.addChild(this.handNode);\n    this.hand = this.handNode.getComponent(Hand);\n    this.hand.onCompleted = this.onHandCompleted.bind(this);\n    this.handNode.on(cc.Node.EventType.TOUCH_START, (event) => {\n      this.hideHand();\n    })\n  }\n\n  /**\n   * 手动画回调\n   */\n  public onHandCompleted() {\n    cc.log(\"手动画回调~~\");\n    this.gameHandCount += 1;\n    if (this.gameHandCount >= 2) {\n      this.hideHand();\n      this.showGuide();\n      return;\n    }\n\n    if (this.gameHandFunc) {\n      this.gameHandFunc();\n    }\n  }\n\n  private hideHand(): void {\n    this.gameHandCount = 0;\n    this.hand.hide();\n    // this.gameHandFunc = null;\n    // cc.log(\"取消引导~~\");\n    this.hideBlockNode();\n  }\n\n  public touchStart() {\n    if (this.timerKey) {\n      clearInterval(this.timerKey);\n    }\n  }\n\n  public showGuide(): void {\n    if (this.timerKey) {\n      clearInterval(this.timerKey);\n    }\n    this.timerKey = setInterval(() => {\n      if (this.gameFirstCount < 3) {\n        this.handNode.active = true;\n        this.guide2Target();\n        this.handNode.on(cc.Node.EventType.TOUCH_START, (event) => {\n          this.hideHand();\n        })\n      }\n    }, 3000);\n  }\n\n  // 引导至盒子\n  private guide2Target(): void {\n    // 找出待完成的盒子\n    let box: cc.Node = this.boxNode.children.find((element: cc.Node) => {\n      return element.getChildByName(\"endBoxNode\").active === false;\n    })\n    // 找出剩余苹果或汽车\n    let item: cc.Node = this.moveNode.children.find((element: cc.Node) => {\n      return element.active && box.getComponent(\"box\").checkItem(element);\n    })\n    this.showHand(item);\n    this.hand.playDown(() => {\n      cc.tween(this.hand.cursor).to(1, { position: box.position }).call(() => {\n        this.hand.playUp(() => {\n          this.hideHand();\n          this.showGuide();\n        });\n      }).start();\n    });\n  }\n\n  private onClickBtn() { }\n\n  private showHand(target: cc.Node) {\n    this.hand.setTargetNode(target, this.moveNode, 20);\n  }\n\n  private async startRunGame() {\n    this.roleNode.getComponent(Role).initRole();\n    await this.roleNode.getComponent(Role).startWalkInScene();\n\n    this.gameHandFunc = this.guide2Target;\n\n    TimerSystem.instance.doFrameOnce(1, () => {\n      this.showTask(\n        0,\n        false,\n        () => { },\n        () => { },\n        () => {\n          this.gameHandFunc();\n        }\n      );\n    });\n  }\n\n  private showBlockNode() {\n    this.blockInputNode.active = true;\n  }\n\n  private hideBlockNode() {\n    this.blockInputNode.active = false;\n  }\n\n  /** 判断是否是下一关 */\n  public async nextGameLevel() {\n    this.gameIndex++;\n    this.gameFirstCount++;\n    cc.log(\"this.gameIndex ===\", this.gameIndex)\n    if (this.gameIndex >= this.gameTotal) {\n      // 游戏结束\n      cc.log(\"游戏结束~~\");\n      this.showTask(1, true, null, null, () => {\n        this.roleNode.getComponent(Role).gameEnd();\n        AudioManager.stopMusic();\n        EventSystem.emit(LIFE_CYCLE_COMPLETE);\n      })\n\n      return;\n    } else {\n      cc.log(\"游戏继续~~\");\n      if (this.gameFirstCount < 3) { return; }\n      if (this.gameFirstCount === this.gameFirstTotal) {\n        if (this.timerKey) {\n          clearInterval(this.timerKey);\n        }\n        this.hideHand();\n        cc.log(\"第一部分游戏结束~~\");\n        this.gameTaskCom.taskHideTime = 2;\n        this.scheduleOnce(() => {\n          this.roleNode.getComponent(Role).gameFirstEnd(() => {\n            this.showTask(0, true, null, null, () => {\n              this.gameFirstEndFunc();\n              this.gameTaskCom.taskHideTime = 4;\n            })\n          });\n        }, 1)\n      } else {\n        this.gameRunRecord();\n      }\n    }\n  }\n\n  /** 第一部分结束回调 */\n  public async gameFirstEndFunc() {\n    this.roleNode.getChildByName(\"bag_on\").active = false;\n    this.roleNode.getChildByName(\"bag_off\").active = false;\n    this.roleNode.getComponent(Role).palyWalkAnimation();\n    this.palyWardrobeMove();\n    await this.palyBgMove();\n    await this.roleNode.getComponent(Role).gameSecondStart();\n    this.roleNode.getComponent(Role).setBagPosition();\n    this.roleNode.getComponent(Role).palyIdleAnimation();\n\n    this.showTask(1, false, null, null, () => {\n      this.gameRunRecord();\n    });\n  }\n\n  private setBg() {\n    let bg = this.wardrobeNode.getChildByName(\"bg2\");\n    bg.width = this.bgNode.children[0].width;\n    bg.height = this.bgNode.children[0].height;\n    this.wardrobeNode.x = this.bgNode.children[0].width;\n  }\n\n  private palyWardrobeMove() {\n    return new Promise<void>((resolve) => {\n      cc.tween(this.wardrobeNode)\n        .by(3, { x: -this.bgNode.children[0].width })\n        .call(() => {\n          resolve()\n        })\n        .start();\n    })\n  }\n\n  private palyBgMove() {\n    return new Promise<void>((resolve) => {\n      cc.tween(this.bgNode)\n        .by(3, { x: -this.bgNode.children[0].width })\n        .call(() => {\n          resolve()\n        })\n        .start();\n    })\n  }\n\n  private showTask(num, isComplete, func1?, func2?, func3?) {\n    let showParams: GameTaskShowParam = {\n      taskIndex: num,\n      complete: isComplete,\n      callFunc1: () => {\n        func1 && func1();\n      },\n      callFunc2: () => {\n        func2 && func2();\n      },\n      callFunc3: () => {\n        func3 && func3();\n      },\n    };\n    this.gameTaskCom.showTaskList(showParams);\n  }\n\n  /** 跟读正确回调 */\n  private async palyRightAnimation() {\n    cc.log(\"跟读正确~~\", this.gameIndex);\n    this.showSmoke();\n    await this.roleNode.getComponent(Role).recordRight(this.gameIndex - 3);\n    if (this.gameIndex === 3) {\n      await this.wardrobeNode.getComponent(Wardrobe).playDoorAnimation()\n      this.nextGameLevel();\n    } else {\n      this.nextGameLevel();\n    }\n  }\n\n  /** 跟读错误回调 */\n  private async palyWrongAnimation() {\n    cc.log(\"跟读错误~~\");\n    await this.roleNode.getComponent(Role).recordWrong(this.gameIndex - 3);\n    this.gameRunRecord();\n  }\n  private showSmoke(): void {\n    this.smokeAnimation.node.active = true;\n    this.smokeAnimation.setAnimation(0, \"animation\", false);\n  }\n\n  /** 播放背景音效 */\n  private palyBGM() {\n    // AudioManager.playMusic(\n    //   this.BUNDLE_NAME,\n    //   `${this.MUSIC_PATH}${MUSIC_TYPE.BG_MUSIC}`\n    // );\n  }\n\n  /** 播放音频 */\n  private palyAudioByIdx(colorNum: string) {\n    if (Number(colorNum) <= 2) {\n      AudioManager.playEffect(\n        this.BUNDLE_NAME,\n        `${this.MUSIC_PATH}${MUSIC_TYPE.YELLOW}`\n      );\n      return;\n    }\n  }\n\n  /** 运行跟读环节 */\n  private gameRunRecord() {\n    cc.log(\"gameRunRecord~~~\");\n    this.startRecordAudio(this.gameWordData[this.gameIndex], this.BUNDLE_NAME, `${this.MUSIC_PATH}${this.recordAudio}`);\n    if (CC_PREVIEW) {\n      this.scheduleOnce(() => {\n        let result = { data: { success: true, eventName: \"ResultCb\" } }\n        this.onRecordResult(result);\n      }, 4);\n    }\n  }\n\n  /** 检测返回来的结果 */\n  private recordResult(result) {\n    cc.log(\"recordResult\", result.data);\n    if (result.data.eventName == \"ResultCb\") {\n      if (result.data.success) {\n        this.palyRightAnimation();\n      } else {\n        this.palyWrongAnimation();\n      }\n    }\n  }\n}\n","import { playSpineAnimation } from \"./comp\";\nimport Wardrobe from \"./wardrobe\";\n\nconst { ccclass, property } = cc._decorator;\n\nconst enum ROLE_ANI {\n  SDZ_IDLE = \"SDZ-daiji\", // 圣诞装 待机\n  SDZ_DISLIKE = \"SDZ-xiangqi2\", // 圣诞装 嫌弃\n  SDZ_WALK = \"SDZ-zou\", // 圣诞装 走路\n  XZ_THINK = \"XZ-sikao\",\n  IDLE = \"idle1\", // 普通 待机1\n  IDLE2 = \"idle2\", // 普通 待机2\n  HAPPY = \"kaixin\", // 开心\n  THINK = \"sikao\", // 思考\n  DISLIKE = \"xianqi\", // 嫌弃\n  WALK = \"zoulu\", // 走路\n}\n\nconst enum ROLE_SKIN {\n  DEFAULT = \"default\",\n  KC = \"KC\", // 初始化\n  QY_SY = \"QY-SY\", // 球衣 上衣 没有裤子\n  XZ_SY = \"XZ-SY\", // 西装 上衣\n  SDZ_SY = \"SDZ-SY\", // 圣诞装 上衣\n  SDZ_SY_QK = \"SDZ-SY-QK\", // 圣诞装上衣加 球裤\n  SDZ_SY_XK = \"SDZ-SY-XK\", // 圣诞装上衣加 球裤\n  SDZ = \"SDZ\", // 圣诞装 背袋子的\n}\n\n@ccclass\nexport default class Role extends cc.Component {\n  @property(sp.Skeleton)\n  sk: sp.Skeleton = null;\n\n  @property(cc.Node)\n  boxNode: cc.Node = null;\n\n  @property(cc.Node)\n  rolePos: cc.Node = null;\n\n  @property(cc.Node)\n  wardrobeNode: cc.Node = null;\n\n  @property(sp.Skeleton)\n  yanSk: sp.Skeleton = null;\n\n  private moveLen = 450;\n  private curTime = 3;\n  private timerKey: any;\n\n  start() { }\n\n  /** 待机 动画 */\n  public palyIdleAnimation() {\n    playSpineAnimation(this.sk, ROLE_ANI.IDLE, true)\n    this.sk.setAnimation(0, ROLE_ANI.IDLE, true);\n    this.sk.setCompleteListener(this.random.bind(this));\n  }\n\n  // 随机播放待机动作\n  private random(): void {\n    let temp: number = Math.random();\n    cc.log(`idle2,${temp}`);\n    if (temp < 0.3) {\n      playSpineAnimation(this.sk, ROLE_ANI.IDLE2, true);\n      this.sk.setCompleteListener(this.palyIdleAnimation.bind(this));\n    }\n  }\n\n  /** 走路 动画 */\n  public palyWalkAnimation() {\n    playSpineAnimation(this.sk, ROLE_ANI.WALK, true);\n    this.sk.setCompleteListener(null);\n  }\n\n  /** 开心 动画 */\n  public async palyHappyAnimation() {\n    await playSpineAnimation(this.sk, ROLE_ANI.HAPPY);\n    this.sk.setCompleteListener(null);\n  }\n\n  /** 嫌弃 动画 */\n  public async palyDislikeAnimation() {\n    await playSpineAnimation(this.sk, ROLE_ANI.DISLIKE);\n    this.sk.setCompleteListener(null);\n  }\n\n  /** 思考 动画 */\n  public async palyThinkAnimation() {\n    await playSpineAnimation(this.sk, ROLE_ANI.THINK);\n    this.sk.setCompleteListener(null);\n  }\n\n  /** 思考 动画 */\n  public async palyEndAnimation() {\n    this.sk.node.scaleX = -1;\n    this.node.getChildByName(\"bag_off\").active = false;\n    playSpineAnimation(this.sk, ROLE_ANI.SDZ_WALK, true);\n  }\n\n  /** 初始化位置信息 */\n  public initRole() {\n    let frameSize: cc.Size = cc.view.getFrameSize(); // 屏幕尺寸\n    cc.log(frameSize);\n    this.node.x = -frameSize.width - 260;\n    // this.node.y = -frameSize.height + 50;\n    this.node.y = this.rolePos.y;\n    this.moveLen = -frameSize.width + 250;\n    cc.log(this.node.x, this.node.y, this.moveLen);\n  }\n\n  /** 一开始游戏走进屏幕 */\n  public startWalkInScene() {\n    return new Promise<void>((resolve) => {\n      this.palyWalkAnimation();\n      cc.tween(this.node)\n        .to(2, { x: this.rolePos.x + 100 })\n        .call(async () => {\n          await this.palyDislikeAnimation();\n          this.palyIdleAnimation();\n          resolve();\n        })\n        .start();\n    });\n  }\n\n  public gameFirstEnd(func?) {\n    this.node.getChildByName(\"bag_on\").active = true;\n    let bagPos1 = this.node.getPosition();\n    this.boxNode.children.forEach((item, id) => {\n      cc.tween(item)\n        .to(0.6, { x: bagPos1.x + 185, y: bagPos1.y + 400, scale: 0.4 })\n        .to(0.4, { x: bagPos1.x + 185, y: bagPos1.y + 210, scale: 0 })\n        .start();\n    });\n\n    this.scheduleOnce(() => {\n      this.yanSk.node.active = true;\n      this.yanSk.node.setPosition(\n        this.node.getPosition().x + 200,\n        this.node.getPosition().y + 200\n      );\n      playSpineAnimation(this.yanSk, \"animation\").then(() => {\n        this.yanSk.node.active = false;\n        func && func();\n      });\n    }, 1.5);\n\n    this.scheduleOnce(() => {\n      this.node.getChildByName(\"bag_on\").active = false;\n      this.node.getChildByName(\"bag_off\").active = true;\n    }, 1.7);\n  }\n\n  public setBagPosition() {\n    this.node.getChildByName(\"bag_on\").active = false;\n    this.node.getChildByName(\"bag_off\").active = true;\n    let pos = this.node.getChildByName(\"bag_off\").getPosition();\n    this.node.getChildByName(\"bag_off\").setPosition(-pos.x - 10, pos.y - 30);\n    this.node.getChildByName(\"bag_off\").scale = 0.8;\n  }\n\n  public gameEnd() {\n    return new Promise<void>((resolve) => {\n      this.palyEndAnimation();\n      let frameSize: cc.Size = cc.view.getFrameSize(); // 屏幕尺寸\n      cc.tween(this.node)\n        .to(2, { x: -frameSize.width - 600 })\n        .call(() => {\n          this.palyIdleAnimation();\n          resolve();\n        })\n        .start();\n    });\n  }\n\n  public gameSecondStart() {\n    return new Promise<void>((resolve) => {\n      cc.tween(this.node)\n        .by(0.3, { x: 150 })\n        .call(() => {\n          resolve();\n        })\n        .start();\n    });\n  }\n\n  /** 跟读正确 */\n  public recordRight(num = 0) {\n    return new Promise<void>((resolve) => {\n      let syName = null;\n      if (num === 0) {\n        syName = \"sy1\";\n        this.sk.setSkin(ROLE_SKIN.SDZ_SY);\n      } else {\n        syName = \"kz1\";\n        this.sk.setSkin(ROLE_SKIN.SDZ);\n      }\n      this.wardrobeNode\n        .getComponent(Wardrobe)\n        .wardrobeWrong(num, syName, false);\n      this.palyHappyAnimation().then(() => {\n        resolve();\n        this.palyIdleAnimation();\n      });\n    });\n  }\n\n  /** 跟读错误 */\n  public recordWrong(num = 0) {\n    return new Promise<void>((resolve) => {\n      let syName = null;\n      if (num === 0) {\n        let ran = Math.random();\n        if (ran > 0.5) {\n          this.sk.setSkin(ROLE_SKIN.QY_SY);\n          syName = \"sy3\";\n        } else {\n          this.sk.setSkin(ROLE_SKIN.XZ_SY);\n          syName = \"sy2\";\n        }\n      } else {\n        let ran = Math.random();\n        if (ran > 0.5) {\n          syName = \"kz2\";\n          this.sk.setSkin(ROLE_SKIN.SDZ_SY_XK);\n        } else {\n          syName = \"kz3\";\n          this.sk.setSkin(ROLE_SKIN.SDZ_SY_QK);\n        }\n      }\n      this.wardrobeNode\n        .getComponent(Wardrobe)\n        .wardrobeWrong(num, syName, false);\n      this.palyDislikeAnimation().then(() => {\n        resolve();\n        if (num === 0) {\n          this.sk.setSkin(ROLE_SKIN.KC);\n        } else {\n          this.sk.setSkin(ROLE_SKIN.SDZ_SY);\n        }\n        this.palyIdleAnimation();\n        this.wardrobeNode\n          .getComponent(Wardrobe)\n          .wardrobeWrong(num, syName, true);\n      });\n    });\n  }\n\n  // update (dt) {}\n}\n","const { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Wardrobe extends cc.Component {\n  @property(cc.Node)\n  syNode: cc.Node = null;\n\n  @property(cc.Node)\n  kzNode: cc.Node = null;\n\n  @property(cc.Node)\n  doorNode: cc.Node = null;\n\n  // onLoad () {}\n\n  /** 播放门动画  */\n  public playDoorAnimation() {\n    return new Promise<void>((resolve) => {\n      let originPos = this.doorNode.getPosition();\n      cc.tween(this.doorNode)\n        .to(1, { x: -originPos.x })\n        .call(() => {\n          resolve();\n          this.syNode.active = false;\n        })\n        .start();\n    });\n  }\n\n  public wardrobeRight(num = 0) {\n    if (num === 0) {\n      this.syNode.getChildByName(\"sy1\").active = false;\n    } else {\n      this.kzNode.getChildByName(\"kz1\").active = false;\n    }\n  }\n\n  /**\n   *\n   * @param num 0:上衣  1: 裤子\n   * @param name 隐藏的节点\n   * @param active 是否隐藏\n   */\n  public wardrobeWrong(num: number, name: string, active: boolean) {\n    if (num === 0) {\n      this.syNode.getChildByName(name).active = active;\n    } else {\n      this.kzNode.getChildByName(name).active = active;\n    }\n  }\n\n  start() {}\n\n  // update (dt) {}\n}\n"],"file":"index.js"}