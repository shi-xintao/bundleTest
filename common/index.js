window.__require=function t(e,o,n){function i(c,a){if(!o[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var p="function"==typeof __require&&__require;if(!a&&p)return p(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return i(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({AdapterBg:[function(t,e,o){"use strict";cc._RF.push(e,"56679+s58RNK7n1JJzo2Bfy","AdapterBg");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},c=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,p=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){},e.prototype.onEnable=function(){this.relayout()},e.prototype.relayout=function(){var t=cc.view.getFrameSize(),e=cc.Canvas.instance.designResolution,o=cc.size(e.width,e.height),n=t.width/t.height,i=r({},o);if(this.node.width/this.node.height>n){var c=this.node.width*i.height/this.node.height;this.node.width=c,this.node.height=i.height}else{var a=this.node.height*i.width/this.node.width;this.node.width=i.width,this.node.height=a}var s=this.node.getComponent(cc.Widget);null==s&&(this.node.addComponent(cc.Widget),s=this.node.getComponent(cc.Widget)),s.isAlignHorizontalCenter=!0,s.isAlignVerticalCenter=!0},c([s],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],AdapterScreen:[function(t,e,o){"use strict";cc._RF.push(e,"1e1efgBZJVEzbXhhZxeZPt+","AdapterScreen");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},c=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,p=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lock=!1,e}return i(e,t),e.prototype.onLoad=function(){this.relayout()},e.prototype.relayout=function(){if(!this.lock){this.lock=!0;var t=cc.view.getFrameSize(),e=cc.Canvas.instance.designResolution,o=cc.size(e.width,e.height);cc.log("canvas designSize:",o);var n=t.width/t.height,i=o.width/o.height,c=r({},o);n<i?c.height=Math.ceil(o.width/n):c.width=Math.ceil(o.height*n),cc.Canvas.instance.designResolution=c,this.lock=!1}},c([s],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],BaseChapterComponent:[function(t,e,o){"use strict";cc._RF.push(e,"b586bYjLNlKjYC4Jdqadcrh","BaseChapterComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../kit/events/events"),a=t("../../kit/system/event/EventSystem"),s=cc._decorator.ccclass,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.params=null,e}return i(e,t),e.prototype.initParams=function(t){this.params=t},e.prototype.onLoad=function(){console.log("BaseChapterComponent onLoad params: ",this.params),this.registerEvent()},e.prototype.registerEvent=function(){a.default.on(c.LIFE_CYCLE_BLOCK,this.onLifeCycleBlock,this),a.default.on(c.LIFE_CYCLE_UNBLOCK,this.onLifeCycleUnBlock,this)},e.prototype.unregisterEvent=function(){a.default.on(c.LIFE_CYCLE_BLOCK,this.onLifeCycleBlock,this),a.default.on(c.LIFE_CYCLE_UNBLOCK,this.onLifeCycleUnBlock,this)},e.prototype.onChapterReady=function(){a.default.emit(c.LIFE_CYCLE_READY)},e.prototype.onLifeCycleBlock=function(){},e.prototype.onLifeCycleUnBlock=function(){},e.prototype.onChapterComplete=function(){a.default.emit(c.LIFE_CYCLE_COMPLETE)},e.prototype.onDestroy=function(){console.log("BaseChapterComponent onDestroy do sth"),this.unregisterEvent()},r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../kit/events/events":void 0,"../../kit/system/event/EventSystem":void 0}],ChapterGameComponent:[function(t,e,o){"use strict";cc._RF.push(e,"958028/8dZBqrKjuACCZIlm","ChapterGameComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../kit/events/events"),a=t("../../kit/system/event/EventSystem"),s=t("./BaseChapterComponent"),p=cc._decorator.ccclass,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.recordData=null,e.taskData=null,e.gameTaskCom=null,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),cc.log("ChapterGameComponent onLoad params: "+this.params),this.initData(),this.initComponents()},e.prototype.initData=function(){this.recordData={evaluatingType:1,evaluatingText:"",tryTimes:1,evaluationScore:30,recordTime:3}},e.prototype.registerEvent=function(){t.prototype.registerEvent.call(this),a.default.on(c.FOLLOW_MODULE_TO_CLIENT,this.onRecordResult,this)},e.prototype.unregisterEvent=function(){t.prototype.unregisterEvent.call(this),a.default.off(c.FOLLOW_MODULE_TO_CLIENT,this.onRecordResult,this)},e.prototype.componentsLoadComplete=function(){cc.log("components load complete"),this.onChapterReady()},e.prototype.initComponents=function(){var t=this;Promise.all([this.initRecordAudioComp(),this.initTaskComp()]).then(function(){t.componentsLoadComplete()})},e.prototype.initRecordAudioComp=function(){var t=this;return new Promise(function(e){a.default.emit(c.FOLLOW_CLIENT_TO_MODULE,{eventName:"initComponent",extra:t.recordData}),e()}).catch(function(t){cc.error("initRecordAudioComp error: "+t)})},e.prototype.initTaskComp=function(){var t=this;return new Promise(function(e,o){if(t.taskData){var n=cc.assetManager.getBundle("common");n?n.load("gameTask/gameTask",cc.Prefab,function(o,n){var i=cc.instantiate(n);t.gameTaskCom=i.getComponent("gameTask"),t.gameTaskCom&&t.gameTaskCom.initData(t.taskData),i.parent=t.node,e()}):o("common bundle nil!")}else o("task data nil!")}).catch(function(t){cc.error("initTaskComp error: "+t)})},e.prototype.startRecordAudio=function(t,e,o){a.default.emit(c.FOLLOW_CLIENT_TO_MODULE,{eventName:"startRecord",extra:{evaluatingText:t,bundleName:e,audioUrl:o}})},e.prototype.onRecordResult=function(t){cc.log(" recordResult result.data: "+t.data)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},r([p],e)}(s.default);o.default=u,cc._RF.pop()},{"../../kit/events/events":void 0,"../../kit/system/event/EventSystem":void 0,"./BaseChapterComponent":"BaseChapterComponent"}],CompEnum:[function(t,e,o){"use strict";cc._RF.push(e,"87736T2PNRKu54WeQCTjJBw","CompEnum"),Object.defineProperty(o,"__esModule",{value:!0}),o.RoundStateType=void 0,function(t){t[t.RoundOpenAniStart=0]="RoundOpenAniStart",t[t.RoundOpenAniComplete=1]="RoundOpenAniComplete",t[t.RoundStart=2]="RoundStart",t[t.RoundProceeding=3]="RoundProceeding",t[t.RoundComplete=4]="RoundComplete",t[t.RoundEndAniStart=5]="RoundEndAniStart",t[t.RoundEndAniComplete=6]="RoundEndAniComplete"}(o.RoundStateType||(o.RoundStateType={})),cc._RF.pop()},{}],CompInterface:[function(t,e,o){"use strict";cc._RF.push(e,"49600mpkTxJDq3v+0++6IWC","CompInterface"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Hand:[function(t,e,o){"use strict";cc._RF.push(e,"8f09diGkVNHEKi3Xqx86KFS","Hand");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sp=null,e.cursor=null,e.mask=null,e.bg=null,e.onCompleted=null,e.move_duration=.4,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.sp.setCompleteListener(function(){t.onCompleted&&(0,t.onCompleted)()})},e.prototype.playClick=function(){this.fadeIn(),this.node.active=!0,this.cursor.rotation=0,this.sp.setAnimation(0,"dian",!1)},e.prototype.fadeIn=function(){var t=cc.fadeIn(this.move_duration).easing(cc.easeSineOut());this.bg.runAction(t)},e.prototype.playSwipeLeft=function(){this.playSwipeByAngle(0,"you-zuo",!1)},e.prototype.playSwipeRight=function(){this.playSwipeByAngle(0,"zuoyou",!1)},e.prototype.playSwipeUp=function(){this.playSwipeByAngle(90,"zuoyou",!1)},e.prototype.playSwipeDown=function(){this.playSwipeByAngle(90,"you-zuo",!1)},e.prototype.playSwipeByAngle=function(t,e,o){this.fadeIn(),this.node.active=!0,this.cursor.rotation=t,this.sp.setAnimation(0,e,o)},e.prototype.hide=function(){this.node.active=!1},Object.defineProperty(e.prototype,"isShowing",{get:function(){return this.node.active},enumerable:!1,configurable:!0}),e.prototype.stop=function(){},e.prototype.setTargetBound=function(t,e,o,n){this.mask.width=o,this.mask.height=n,this.mask.x=t,this.mask.y=e;var i=cc.Canvas.instance.designResolution;this.bg.width=i.width,this.bg.height=i.height,this.bg.x=-this.mask.x,this.bg.y=-this.mask.y,this.cursor.x=this.mask.x,this.cursor.y=this.mask.y},e.prototype.setTargetNode=function(t,e){if(null!=t){var o=t.convertToWorldSpaceAR(cc.Vec2.ZERO);this.mask.width=t.width,this.mask.height=t.height;var n=e.convertToNodeSpaceAR(o);this.setTargetBound(n.x,n.y,t.width,t.height)}},r([s({type:sp.Skeleton,displayName:"\u624b\u52a8\u753b"})],e.prototype,"sp",void 0),r([s({type:cc.Node,displayName:"\u624b"})],e.prototype,"cursor",void 0),r([s({type:cc.Node,displayName:"Mask"})],e.prototype,"mask",void 0),r([s({type:cc.Node,displayName:"Bg"})],e.prototype,"bg",void 0),r([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],RollerAnimation:[function(t,e,o){"use strict";cc._RF.push(e,"373bbYeaw5JopWo11ayc/Rp","RollerAnimation");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../scripts/ChapterGameComponent"),a=cc._decorator,s=a.ccclass,p=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.farNode=null,e.middleNode=null,e.nearNode=null,e.farSpeed=100,e.middleSpeed=200,e.nearSpeed=300,e.isHorizontal=!0,e.isStopMove=!1,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){},e.prototype.initData=function(){},e.prototype.setFarSpeed=function(t){this.farSpeed=t},e.prototype.getFarSpeed=function(){return this.farSpeed},e.prototype.setMiddleSpeed=function(t){this.middleSpeed=t},e.prototype.getMiddleSpeed=function(){return this.middleSpeed},e.prototype.setNearSpeed=function(t){this.nearSpeed=t},e.prototype.getNearSpeed=function(){return this.nearSpeed},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},e.prototype.changeSpeedMove=function(t,e,o){var n=this;this.farNode.childrenCount>0&&this.farNode.children.forEach(function(e){n.isHorizontal?(e.x-=t,n.checkNode(e,t)):(e.y-=t,n.checkNode(e,t))}),this.nearNode.childrenCount>0&&this.nearNode.children.forEach(function(t){n.isHorizontal?(t.x-=o,n.checkNode(t,o)):(t.y-=o,n.checkNode(t,o))}),this.middleNode.childrenCount>0&&this.middleNode.children.forEach(function(t){n.isHorizontal?(t.x-=e,n.checkNode(t,e)):(t.y-=e,n.checkNode(t,e))})},e.prototype.checkNode=function(t,e){var o=cc.view.getFrameSize().width+t.width/2,n=cc.view.getFrameSize().height+t.height/2;this.isHorizontal?e>=0?t.x<-o&&(t.x=o):t.x>o&&(t.x=-o):e>=0?t.y<-n&&(t.y=n):t.y>n&&(t.y=-n)},e.prototype.update=function(t){if(!this.isStopMove){var e=t*this.farSpeed,o=t*this.middleSpeed,n=t*this.nearSpeed;this.changeSpeedMove(e,o,n)}},r([p(cc.Node)],e.prototype,"farNode",void 0),r([p(cc.Node)],e.prototype,"middleNode",void 0),r([p(cc.Node)],e.prototype,"nearNode",void 0),r([p({displayName:"\u8fdc\u666f\u901f\u5ea6",tooltip:"\u5982\u679c\u8981\u4ece\u5de6\u5f80\u53f3\u8bf7\u586b\u5199\u8d1f\u6570"})],e.prototype,"farSpeed",void 0),r([p({displayName:"\u4e2d\u666f\u901f\u5ea6",tooltip:"\u5982\u679c\u8981\u4ece\u5de6\u5f80\u53f3\u8bf7\u586b\u5199\u8d1f\u6570"})],e.prototype,"middleSpeed",void 0),r([p({displayName:"\u8fd1\u666f\u901f\u5ea6",tooltip:"\u5982\u679c\u8981\u4ece\u5de6\u5f80\u53f3\u8bf7\u586b\u5199\u8d1f\u6570"})],e.prototype,"nearSpeed",void 0),r([p({displayName:"\u6a2a\u5411\u79fb\u52a8",tooltip:"\u9ed8\u8ba4\u4ece\u53f3\u5f80\u5de6"})],e.prototype,"isHorizontal",void 0),r([s],e)}(c.default);o.default=u,cc._RF.pop()},{"../../scripts/ChapterGameComponent":"ChapterGameComponent"}],SpineUtils:[function(t,e,o){"use strict";cc._RF.push(e,"1d68eTK4/NFsINkE8apGdaz","SpineUtils");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{s(n.next(t))}catch(e){r(e)}}function a(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.SpineUtils=void 0;var r=t("../../kit/system/timer/TimerSystem"),c=function(){function t(){}return t.playSpineAsync=function(t,e){return new Promise(function(o){if(e.func&&e.func(),e.loop)t.setAnimation(0,e.name,!0),r.default.instance.doOnce(1e3*e.duration||0,function(){cc.isValid(t.node)?o(!0):(cc.warn("sp.node  is valid false! animation name "+e.name),o(!1))});else{var n=t.setAnimation(0,e.name,!1);if(!n)return void o(!0);t.setTrackCompleteListener(n,function(){o(!0)})}})},t.playSpineAniByConfig=function(e,o){return n(this,void 0,void 0,function(){var n,r;return i(this,function(i){switch(i.label){case 0:n=0,i.label=1;case 1:return n<o.length?((r=o[n]).func&&r.func(),[4,t.playSpineAsync(e,r)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t}();o.SpineUtils=c,cc._RF.pop()},{"../../kit/system/timer/TimerSystem":void 0}],TaskBoard:[function(t,e,o){"use strict";cc._RF.push(e,"7a2f11eZoVPcJMgqd3ZLEq9","TaskBoard");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.contents=[],e.contentNodes=[],e.finishIcon=null,e.poses=[],e.move_duration=.4,e.currPage=0,e.isShowing=!1,e.panel=null,e.mask=null,e.safearea=null,e.onClosed=null,e.flag_block=!1,e.initPos=cc.Vec2.ZERO,e.currPos=cc.Vec2.ZERO,e}return i(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this);var t=cc.Canvas.instance.designResolution;this.poses[0].x=t.width/2-220,this.poses[0].y=-t.height/2,this.poses[1].x=t.width/2+220,this.poses[1].y=-t.height/2,this.panel.x=this.poses[1].x,this.panel.y=this.poses[1].y},e.prototype.start=function(){},e.prototype.show=function(t,e){var o=this;if(void 0===e&&(e=null),this.finishIcon.node.active=!1,this.node.active=!0,this.contents.length>0){var n=this.contents[t];(i=cc.instantiate(n)).active=!0,this.safearea.addChild(i),i.x=0,i.y=0}else if(this.contentNodes.length>0){var i;n=this.contentNodes[t],(i=cc.instantiate(n)).active=!0,this.safearea.addChild(i),i.x=0,i.y=0}this.panel.active=!0;var r=cc.fadeIn(this.move_duration).easing(cc.easeSineOut());this.mask.runAction(r),this.moveTo(this.poses[0],this.move_duration,function(){o.isShowing=!0,e&&e(o.isShowing)})},e.prototype.hide=function(t){var e=this;void 0===t&&(t=null);var o=cc.fadeOut(this.move_duration).easing(cc.easeSineOut());this.mask.runAction(o),this.moveTo(this.poses[1],this.move_duration,function(){if(e.isShowing=!1,e.node.active=!1,e.panel.active=!1,e.safearea.children.length>0){var o=e.safearea.children[0];o.removeFromParent(),o.destroy()}e.hideFinishIcon(),t&&t(e.isShowing),e.onClosed&&(0,e.onClosed)()})},e.prototype.setPrefabs=function(t){this.contents=t},e.prototype.setNodes=function(t){this.contentNodes=t},e.prototype.playFinished=function(){this.finishIcon.node.active=!0,this.finishIcon.setAnimation(0,"gaizhang",!1)},e.prototype.hideFinishIcon=function(){this.finishIcon.node.active=!1},e.prototype.onClick=function(){},e.prototype.moveTo=function(t,e,o){var n=this;void 0===e&&(e=1),void 0===o&&(o=function(){}),this.flag_block=!0;var i=cc.moveTo(e,t.x,t.y).easing(cc.easeBackOut()),r=cc.sequence(i,cc.callFunc(function(){n.flag_block=!1,o()}));this.panel.runAction(r)},e.prototype.onTouchBegan=function(t){console.log("onTouchBegan >>>>>>>>>>>>"),this.currPos.x=t.getLocationX(),this.currPos.y=t.getLocationY(),this.initPos.x=t.getLocationX(),this.initPos.y=t.getLocationY()},e.prototype.onTouchEnd=function(t){console.log("onTouchEnd >>>>>>>>>>>>");var e=t.getLocationX(),o=t.getLocationY();Math.sqrt((e-this.initPos.x)*(e-this.initPos.x)+(o-this.initPos.y)*(o-this.initPos.y))<20&&this.hide()},r([s({type:sp.Skeleton,displayName:"\u4efb\u52a1\u5b8c\u6210"})],e.prototype,"finishIcon",void 0),r([s({type:[cc.Node],displayName:"\u9762\u677f\u4f4d\u7f6e"})],e.prototype,"poses",void 0),r([s({type:cc.Node,displayName:"\u9762\u677f"})],e.prototype,"panel",void 0),r([s({type:cc.Node,displayName:"mask"})],e.prototype,"mask",void 0),r([s({type:cc.Node,displayName:"\u5185\u5bb9\u533a\u57df"})],e.prototype,"safearea",void 0),r([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],gameTask:[function(t,e,o){"use strict";cc._RF.push(e,"be38dnTC39MVqV63hKcsrc+","gameTask");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{s(n.next(t))}catch(e){r(e)}}function a(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../kit/system/audio/AudioManager"),p=cc._decorator,u=p.ccclass,l=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeWidget=null,e.moveLen=400,e.taskHideTime=4,e.moveTime=.5,e.taskData=null,e}return i(e,t),e.prototype.initData=function(t){this.taskData=t},e.prototype.onLoad=function(){this.node.active=!1,this.updateTaskPos()},e.prototype.updateTaskPos=function(){this.nodeWidget.right=-this.node.width,this.nodeWidget.updateAlignment()},e.prototype.showTaskList=function(t){return c(this,void 0,void 0,function(){var e,o,n=this;return a(this,function(i){switch(i.label){case 0:return t&&null!=t.taskIndex?(e=t.taskIndex,o=t.complete,e>=this.taskData.imgList.length?(cc.error("task index error!"),[2]):[4,this.updateTaskImg(e)]):(cc.error("show task params error! params:"+JSON.stringify(t)),[2]);case 1:return i.sent(),this.moveAni(t,function(){n.showSealSpine(o)}),[2]}})})},e.prototype.updateTaskImg=function(t){var e=this;return new Promise(function(o){var n=cc.assetManager.getBundle(e.taskData.bundleName);n&&n.load(e.taskData.imgList[t],cc.SpriteFrame,function(t,n){e.node.getChildByName("task").getComponent(cc.Sprite).spriteFrame=n,e.node.active=!0,o()})})},e.prototype.showSealSpine=function(t){if(t){var e=this.node.getChildByName("sealNode");e.active=!0;var o=e.getComponent(sp.Skeleton),n=o.setAnimation(0,"gaizhang",!1);o.setTrackCompleteListener(n,function(){s.default.playEffect("common","gameTask/audio/SE_luoyefense_03"),s.default.playEffect("common","gameTask/audio/6_congratulations")})}},e.prototype.moveAni=function(t,e){var o=this;cc.tween(this.node).by(this.moveTime,{x:-this.moveLen}).call(function(){t.callFunc1&&t.callFunc1(),e&&e()}).delay(this.taskHideTime).call(function(){t.callFunc2&&t.callFunc2()}).by(this.moveTime,{x:this.moveLen}).call(function(){t.callFunc3&&t.callFunc3(),o.node.getChildByName("sealNode").active=!1}).start()},r([l(cc.Widget)],e.prototype,"nodeWidget",void 0),r([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../kit/system/audio/AudioManager":void 0}]},{},["TaskBoard","gameTask","Hand","RollerAnimation","AdapterBg","AdapterScreen","BaseChapterComponent","ChapterGameComponent","CompEnum","CompInterface","SpineUtils"]);