window.__require=function e(t,o,i){function n(s,r){if(!o[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var p="function"==typeof __require&&__require;if(!r&&p)return p(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var l=o[s]={exports:{}};t[s][0].call(l.exports,function(e){return n(t[s][1][e]||e)},l,l.exports,e,t,o,i)}return o[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<i.length;s++)n(i[s]);return n}({AudioManager:[function(e,t,o){"use strict";cc._RF.push(t,"32391D8LNFP3KYF6BkqYpGQ","AudioManager"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(){this.error_num=0,this.isPlaying=!1,this.AUDIO_URL="audios/",this.COMMON_AUDIO_URL="audio_common/",this.RECORD="record",this.GAME_END="gameEnd",this.GAME_COIN_MID="coin_mid",this.GAME_COIN_LARGE="coin_large",this.LETS_SAY="lets_say",this.TRY_AGAIN="try_again",this.SUPER_JOB="super_job",this.GAME_RIGHT="game_right",this.GAME_ERROR="game_error",this.LISTEN_AND_CHOOSE="Listen_and_choose",this._masterVolume=1,this.CHOOSE_THE_CORRECT_ANSWER="choose_the_correct_answer",this.CHOOSE_THE_CORRECT_WORD="choose_the_correct_word",this.CHANGE_PAGE="changepage",this.effectId=-1,this.audio_common=["record","gameEnd","coin_mid","coin_large","lets_say","try_again","super_job","game_right","game_error","Listen_and_choose","choose_the_correct_answer","choose_the_correct_word"]}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.playMusic=function(e,t,o){var i,n=this;void 0===o&&(o=!0),this._masterVolume=e==this.GAME_END?.6:1,i=-1!=this.audio_common.indexOf(e)?this.COMMON_AUDIO_URL:this.AUDIO_URL,cc.loader.loadRes(i+e,cc.AudioClip,function(i,a){if(i){if(n.error_num+=1,console.log(i,"\u97f3\u6548\u52a0\u8f7d\u5931\u8d25\u6b21\u6570===============>> ",n.error_num),n.error_num<2)return n.playMusic(e,t,o)}else n.error_num=0,n.loadMusic(a,t,o)})},e.prototype.loadMusic=function(e,t,o){var i=this;this.isPlaying=o,cc.audioEngine.stop(this.effectId),this.effectId=cc.audioEngine.play(e,!1,this._masterVolume),cc.audioEngine.setFinishCallback(this.effectId,function(){t&&t(),i.isPlaying=!1})},e.prototype.stopMusic=function(){this.effectId&&(cc.audioEngine.stop(this.effectId),this.isPlaying=!1)},e}();o.default=i.getInstance(),cc._RF.pop()},{}],CConst:[function(e,t,o){"use strict";cc._RF.push(t,"624b89YT3FOkYcmBNx4EL5p","CConst"),Object.defineProperty(o,"__esModule",{value:!0}),o.CConst=void 0,o.CConst={WRONG_VALUE:-1,PREFAB_BASE_PATH:"prefabs/",PAGE_CHANGE:"page_change",PAGE_TURN:"page_turn",PAGE_TURN_CANCEL:"page_turn_cancel",WORD_SPRITE_CLICK:"word_sprite_click",WORD_BOOK_HIDE:"word_book_hide",ADD_COIN:"add_coin"},cc._RF.pop()},{}],Tigo:[function(e,t,o){"use strict";cc._RF.push(t,"10a90LogpBD1brCsOOGYEUN","Tigo"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(){this.classId="",this.gameId="",this.moduleId="",this.lessonModuleId="",this.userId="",this.TotalGameNum=8,this.TotalGameErrorNum=0,this.TotalGameRightOnce=0,this.TotalGameRightTwice=0,this.SingleGameErrorNum=0,this.SingleGameRightOnce=0,this.SingleGameRightTwice=0,this.appData=null,this.TiGoTotalData={quizTotalNum:2,questionTotlaNum:8,startGameTime:0,gameNum:0,totalGameTime:0,errorNum:0,accuracy:{once:"0%",twice:"0%"}},this.TigoSingleData={MaxIndex:0,errorNum:0,answerData:{},accuracy:{once:"0%",twice:"0%"}}}return e.prototype.addGameError=function(){this.SingleGameErrorNum++,this.TotalGameErrorNum++,this.TigoSingleData.errorNum+=1,this.TiGoTotalData.errorNum+=1},e.prototype.addGameRightOnce=function(){this.SingleGameRightOnce+=1,this.TotalGameRightOnce+=1,this.TigoSingleData.accuracy.once=this.SingleGameRightOnce/this.TigoSingleData.MaxIndex*100+"%",this.TiGoTotalData.accuracy.once=this.TotalGameRightOnce/this.TiGoTotalData.gameNum*100+"%"},e.prototype.addGameRightTwice=function(){this.SingleGameRightTwice+=1,this.TotalGameRightTwice+=1,this.TigoSingleData.accuracy.twice=this.SingleGameRightTwice/this.TigoSingleData.MaxIndex*100+"%",this.TiGoTotalData.accuracy.twice=this.TotalGameRightTwice/this.TiGoTotalData.gameNum*100+"%"},e.prototype.refreshSingleData=function(){this.SingleGameRightOnce=0,this.SingleGameRightTwice=0,this.SingleGameErrorNum=0,this.TigoSingleData.errorNum=0,this.TigoSingleData.answerData={},this.TigoSingleData.accuracy.once="0%",this.TigoSingleData.accuracy.twice="0%"},e.prototype.setSingleAnswerData=function(e,t){var o="Q"+e+" wrong";this.TigoSingleData.answerData[o]=t},e.prototype.clearAllTigoData=function(){this.refreshSingleData(),this.TotalGameNum=0,this.TotalGameRightOnce=0,this.TotalGameRightTwice=0,this.TiGoTotalData.errorNum=0,this.TiGoTotalData.accuracy.once="0%",this.TiGoTotalData.accuracy.twice="0%"},e.prototype.setGameId=function(e){this.gameId="cc_Week1L3_Book"+e},e.prototype.setSingleMax=function(e){this.TigoSingleData.MaxIndex=e},e.prototype.setClassId=function(e){this.classId=e},e.prototype.setUserId=function(e){this.userId=e},e.prototype.setModuleId=function(e){this.moduleId=e},e.prototype.setlessonModuleId=function(e){this.lessonModuleId=e},e.prototype.callAppToAnalyse=function(e,t,o){void 0===t&&(t=!0),void 0===o&&(o={});var i={action:"TiGoAnalyse",param:{analyseAction:e,analyseParam:{analyseId:t?this.classId:this.gameId,analyseData:o}}};console.log("callAppToAnalyse ============== "+JSON.stringify(i)),window.tiGo&&window.tiGo.callApp(JSON.stringify(i)),window.webkit&&window.webkit.messageHandlers.callApp.postMessage(JSON.stringify(i))},e.prototype.callAppToClose=function(e,t){void 0===t&&(t=!1);var o=t?{action:"TiGoClose",param:{closeNext:e}}:{action:"TiGoClose",param:{}};console.log("callAppToClose ============== "+JSON.stringify(o)),window.tiGo&&window.tiGo.callApp(JSON.stringify(o)),window.webkit&&window.webkit.messageHandlers.callApp.postMessage(JSON.stringify(o))},e.prototype.callAppToSaveData=function(e){void 0===e&&(e=!1);var t={action:"TigoGameData",param:e?this.TiGoTotalData:this.TigoSingleData};console.log("callAppToSaveData ============== "+JSON.stringify(t)),window.tiGo&&window.tiGo.callApp(JSON.stringify(t)),window.webkit&&window.webkit.messageHandlers.callApp.postMessage(JSON.stringify(t))},e.prototype.callAppToRecord=function(e,t){var o={action:"TiGoStartRecord",param:{name:"game1",time:e.toString(),standardText:t}};console.log("callAppToRecord ============== "+JSON.stringify(o)),window.tiGo&&window.tiGo.callApp(JSON.stringify(o)),window.webkit&&window.webkit.messageHandlers.callApp.postMessage(JSON.stringify(o))},e.prototype.callAppToStopRecord=function(){var e={action:"TiGoStopRecord"};console.log("callAppToStopRecord ============== "+JSON.stringify(e)),window.tiGo&&window.tiGo.callApp(JSON.stringify(e)),window.webkit&&window.webkit.messageHandlers.callApp.postMessage(JSON.stringify(e))},e.prototype.callAppToResult=function(e,t){var o={action:"TiGoVoiceEvaluation",param:{standardText:e,path:t}};console.log("callAppToResult ============== "+JSON.stringify(o)),window.tiGo&&window.tiGo.callApp(JSON.stringify(o)),window.webkit&&window.webkit.messageHandlers.callApp.postMessage(JSON.stringify(o))},e.prototype.getAppData=function(){return this.appData},e.prototype.callAppToStorage=function(e,t,o){void 0===o&&(o=0);var i="";switch(e){case"PUT":i=o.toString()}var n={action:"TiGoStorage",param:{method:e,key:t,value:i.toString()}};if(console.log("callAppToStorage ============== "+JSON.stringify(n)),window.tiGo)return window.tiGo.callApp(JSON.stringify(n));if(window.webkit){var a=window.prompt("callApp",JSON.stringify(n));return console.log(a),a}},e.prototype.callAppToHttp=function(e,t,o){var i={action:"TiGoHttp",param:{url:e,method:t,params:o,unique:this.classId}};console.log("callAppToStorage ============== "+JSON.stringify(i)),window.tiGo&&window.tiGo.callApp(JSON.stringify(i)),window.webkit&&window.webkit.messageHandlers.callApp.postMessage(JSON.stringify(i))},e.prototype.callAppToCollect=function(e,t,o){var i={action:"TiGoHttp",param:{url:"api/operate/infoV2",method:"POST",params:{userId:this.userId,lessonId:this.classId,lessonModelId:this.lessonModuleId,gameIndex:e,type:t,result:o,timestamp:this.getTime()}}};console.log("callAppToStorage ============== "+JSON.stringify(i)),window.tiGo&&window.tiGo.callApp(JSON.stringify(i)),window.webkit&&window.webkit.messageHandlers.callApp.postMessage(JSON.stringify(i))},e.prototype.callAppToLoaded=function(){var e={action:"TiGoLifecycle",param:{name:"loaded",param:""}};console.log("callAppToLoaded ============== "+JSON.stringify(e)),window.tiGo&&window.tiGo.callApp(JSON.stringify(e)),window.webkit&&window.webkit.messageHandlers.callApp.postMessage(JSON.stringify(e))},e.prototype.getBaseInfo=function(){var e={action:"TiGoBaseInfo"};if(console.log("getBaseInfo ============== "+JSON.stringify(e)),window.tiGo){var t=window.tiGo.callApp(JSON.stringify(e));return console.log(t),t}if(window.webkit)return t=window.prompt("callApp",JSON.stringify(e)),console.log("webkit BaseInfo ==== "+t),t},e.prototype.callAppToSpeed=function(){var e={userId:this.userId,type:this.moduleId,speedVal:2,lessonModelId:this.lessonModuleId};this.callAppToHttp("api/course/speed","POST",e)},e.prototype.getTime=function(){var e=Date.now().toString();return e.substr(0,10)},e.getInstance=function(){return this._instance||(this._instance=new e),console.log("TigoManager _instance is success"),this._instance},e._instance=null,e}();o.default=i.getInstance(),cc._RF.pop()},{}],Tools:[function(e,t,o){"use strict";cc._RF.push(t,"eb683WaB09Ff7o91RnIK8y0","Tools"),Object.defineProperty(o,"__esModule",{value:!0}),o.Tools=void 0;var i={delayCallback:function(e,t){return void 0===t&&(t=1e3),setTimeout(e,t)},getAngle:function(e,t){var o=t.x-e.x,i=t.y-e.y;return-cc.v2(o,i).signAngle(cc.v2(1,0))/Math.PI*180},checkArrayTheSame:function(e,t){if(e.length!=t.length)return!1;if(e.toString()==t.toString())return!0;for(var o=0,i=0;i<e.length;++i){var n=e[i];t.includes(n)&&o++}return o==e.length},updatePartialSkin:function(e,t,o){var i=e.findSlot(t),n=e.skeletonData.getRuntimeData(),a=n.findSkin(o),s=n.findSlotIndex(t);if(-1!=s){var r=a.getAttachment(s,t);i.setAttachment(r),e.invalidAnimationCache()}else console.log("updatePartialSkin -> +++++++++++++++++++++++\u63d2\u69fd\u4e0b\u6807\u9519\u8bef \u8bf7\u67e5\u770b\u8d44\u6e90")},getRandom:function(e,t,o){return void 0===o&&(o=0),(e+(t-e)*Math.random()).toFixed(o)},clone:function(e){var t;if(e instanceof Array){t=[];for(var o=e.length;o--;)t[o]=this.clone(e[o]);return t}if(e instanceof Object){for(var i in t={},e)t[i]=this.clone(e[i]);return t}return e},getCurrentDate:function(e,t){void 0===t&&(t=0);var o=new Date,i=o.getFullYear(),n=o.getMonth(),a=o.getDate(),s=(o.getDay(),o.getHours()),r=o.getMinutes(),c=o.getSeconds();(n+=1)<10&&(n="0"+n),a<10&&(a="0"+a),s<10&&(s="0"+s),r<10&&(r="0"+r),c<10&&(c="0"+c);var p="";return 1==e?p=i+"-"+n+"-"+a:2==e?p=i+"-"+n+"-"+a+" "+s+":"+r:3==e&&(p=i+"-"+n+"-"+a+" "+s+":"+r+":"+c),p}};o.Tools=i,cc._RF.pop()},{}],UILayer:[function(e,t,o){"use strict";cc._RF.push(t,"02415mvecpLVp0ZJQmqf14h","UILayer"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./common/AudioManager"),n=e("./common/common"),a=e("./common/Tigo"),s=e("./config/CConst"),r=e("./pageData"),c=cc._decorator,p=c.ccclass,l=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pageLabel=null,t.wordBook=null,t.addCoinsAni=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.addEventListener(),cc.log("UILayer loaded")},t.prototype.start=function(){var e=a.default.getBaseInfo();if(e){var t=JSON.parse(e);a.default.setClassId(t.lessonId),a.default.setUserId(t.userId),a.default.setModuleId(t.moduleId),console.log("lessonId == "+a.default.classId+"  userId == "+a.default.userId)}1==r.default.getFirst()&&(cc.log("is first = 1"),n.common.webframe.trigger(s.CConst.WORD_SPRITE_CLICK))},t.prototype.bookShow=function(e){cc.log("word show"),this.wordBook.active=!0,this.wordBook.getComponent("wordBook").showSelf(e)},t.prototype.bookShowBtn=function(){this.bookShow(-1)},t.prototype.addEventListener=function(){n.common.webframe.listen(s.CConst.WORD_SPRITE_CLICK,this.bookShow,this),n.common.webframe.listen(s.CConst.ADD_COIN,this.addCoin,this)},t.prototype.removeEventListener=function(){n.common.webframe.ignore(s.CConst.WORD_SPRITE_CLICK,this.bookShow,this)},t.prototype.addCoin=function(){this.addCoinsAni.play(),r.default.addCoin(3),i.default.playMusic("jinbi3")},t.prototype.quitBtnCall=function(){a.default.callAppToClose("")},__decorate([l({type:cc.Label,displayName:"\u9875\u7801"})],t.prototype,"pageLabel",void 0),__decorate([l({type:cc.Node,displayName:"\u9690\u85cf\u9762\u677f"})],t.prototype,"wordBook",void 0),__decorate([l({type:cc.Animation,displayName:"\u91d1\u5e01\u52a8\u753b"})],t.prototype,"addCoinsAni",void 0),__decorate([p],t)}(cc.Component);o.default=d,cc._RF.pop()},{"./common/AudioManager":"AudioManager","./common/Tigo":"Tigo","./common/common":"common","./config/CConst":"CConst","./pageData":"pageData"}],"bezier-assembler":[function(e,t,o){"use strict";cc._RF.push(t,"127a1Pl8H1Ah6HR7eXmaI7E","bezier-assembler"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./page-effect-assembler-base"),n=cc.gfx,a=new n.VertexFormat([{name:n.ATTR_POSITION,type:n.ATTR_TYPE_FLOAT32,num:2},{name:n.ATTR_UV0,type:n.ATTR_TYPE_FLOAT32,num:2},{name:n.ATTR_COLOR,type:n.ATTR_TYPE_UINT8,num:4,normalize:!0},{name:"a_isFront",type:n.ATTR_TYPE_FLOAT32,num:1}]),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.angle=0,t}return __extends(t,e),t.prototype.updateRenderData=function(e){if(e){var t=e.getPointCount();if(t<2)return;var o=e.node,i=o.height,n=o.width,a=-n*o.anchorX,s=-i*o.anchorY,r=this._getCtrlPosByAngle(n),c=r.startPos,p=r.endPos,l=r.ctrlPos1,d=r.ctrlPos2,u=[];u[0]=c;for(var h=0,g=0,f=0,m=this.floatsPerVert,_=this.renderData.vDatas[0],y=0,v=1;v<t;v++){var C=v===t-1,N=u[v-1],w=this._getBezierPos(v/(t-1),c,p,l,d),T=this._fixWidth(N,w,n,h,C),P=T.gapWidth;w=T.nextBezierPos,h+=P,u[v]=w,f=g+P/n,_[y=m*(v-1)*4]=a+N.x,_[y+1]=s+N.y,_[y+2]=g,_[y+3]=1,_[y+=m]=a+w.x,_[y+1]=s+w.y,_[y+2]=f,_[y+3]=1,_[y+=m]=a+N.x,_[y+1]=s+i+N.y,_[y+2]=g,_[y+3]=0,_[y+=m]=a+w.x,_[y+1]=s+i+w.y,_[y+2]=f,_[y+3]=0,g=f}this.updateColor(e,null),this.updateIsFront(e,5)}},t.prototype.init=function(t){e.prototype.init.call(this,t);var o=t.getPointCount()-1;this.verticesCount=4*o,this.indicesCount=6*o,this.floatsPerVert=6,this.initData()},t.prototype.getVfmt=function(){return a},t.prototype._getCtrlPosByAngle=function(e){var t=new cc.Vec2(0,0),o=null,i=null,n=null,a=this.angle*Math.PI/180*2/Math.PI;if(this.angle<=90){var s=e*(1-Math.pow(a,3)),r=e/4*(1-Math.pow(1-a,4));o=new cc.Vec2(s,r);var c=e*(1-.25*a),p=1*e/16*a,l=3*e/16*a;i=new cc.Vec2(c,p),n=new cc.Vec2(c,l)}else{a-=1,s=-e*(1-Math.pow(1-a,3)),r=e/4*(1-Math.pow(a,4)),o=new cc.Vec2(s,r);var d=3*e/4*(1-a),u=3*e/4*Math.pow(1-a,3);p=1*e/16*(1-a),l=3*e/16*(1-Math.pow(a,4)),i=new cc.Vec2(d,p),n=new cc.Vec2(u,l)}return{startPos:t,endPos:o,ctrlPos1:i,ctrlPos2:n}},t.prototype._fixWidth=function(e,t,o,i,n){var a=t.sub(e),s=a.mag(),r=i+s;if(n){s=o-i;var c=a.normalize();t=e.add(c.mul(s))}else r>=o&&(s-=1.1*(r-o),s=Math.max(0,s),c=a.normalize(),t=e.add(c.mul(s)));return{gapWidth:s,nextBezierPos:t}},t.prototype._getBezierPos=function(e,t,o,i,n){return t=t.mul(Math.pow(1-e,3)),i=i.mul(3*e*Math.pow(1-e,2)),n=n.mul(3*(1-e)*Math.pow(e,2)),o=o.mul(Math.pow(e,3)),t.add(i.add(n.add(o)))},t}(i.default);o.default=s,cc._RF.pop()},{"./page-effect-assembler-base":"page-effect-assembler-base"}],"bezier-render":[function(e,t,o){"use strict";cc._RF.push(t,"33e45xqc9pJ/agYa1E+jVYa","bezier-render"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./bezier-assembler"),n=cc._decorator,a=n.ccclass,s=n.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textureList=[],t.pointsCount=10,t._initedMaterial=!1,t}return __extends(t,e),t.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.init()},t.prototype.init=function(){this._initedMaterial||this.updateMaterial(),this.setVertsDirty()},t.prototype._resetAssembler=function(){(this._assembler=new i.default).init(this)},t.prototype._updateMaterial=function(){var e=this.getMaterial(0);e&&(e.define("CC_USE_MODEL",1),2===this.textureList.length&&(e.setProperty("texture0",this.textureList[0]),e.setProperty("texture1",this.textureList[1])))},t.prototype.updateMaterial=function(){if(2===this.textureList.length)return this._updateMaterial(),void(this._initedMaterial=!0)},t.prototype.getPointCount=function(){return this.pointsCount},t.prototype.updateAngle=function(e){this._assembler&&(this._assembler.angle=e,this._assembler.updateRenderData(this))},__decorate([s({type:[cc.Texture2D],displayName:"\u7eb9\u7406"})],t.prototype,"textureList",void 0),__decorate([s({displayName:"\u6bcf\u6761\u8fb9\u4e0a\u7684\u9876\u70b9\u6570\u91cf"})],t.prototype,"pointsCount",void 0),__decorate([a],t)}(cc.RenderComponent);o.default=r,cc._RF.pop()},{"./bezier-assembler":"bezier-assembler"}],common:[function(e,t,o){"use strict";cc._RF.push(t,"cc03f/GRqpLLLlYsO/d95fS","common"),Object.defineProperty(o,"__esModule",{value:!0}),o.common=void 0;var i=e("./AudioManager"),n={reDebug:!1,maxPageNum:11,curPageNum:1,webframe:new(e("./notifier_center").NotifierCenter),audioManager:i.default,setCurPageNum:function(e){this.curPageNum=e,console.log("\u9875\u7801\uff1a",this.curPageNum+"/"+this.maxPageNum)},getCurPageNum:function(){return this.curPageNum},getMaxPageNum:function(){return this.maxPageNum},isUndefined:function(e){return void 0===e}};o.common=n,cc._RF.pop()},{"./AudioManager":"AudioManager","./notifier_center":"notifier_center"}],main:[function(e,t,o){"use strict";cc._RF.push(t,"76539nVwLJAIrG3+G3YPdf2","main"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./config/CConst"),n=e("./common/common"),a=e("./config/node_config"),s=e("./common/Tigo"),r=e("./pageData"),c=cc._decorator,p=c.ccclass,l=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.controlNode=null,t.pageNode=null,t.verlet=null,t.sentence=null,t.UILayer=null,t.wordBoard=null,t.prefab_nowShow=null,t.nodePrefab_ob={},t.maxLoadPrefabNum=3,t}return __extends(t,e),t.prototype.onLoad=function(){r.default.setCoin(0),this.initUserData(),this.initData(),this.addEventListener(),s.default.callAppToLoaded()},t.prototype.initUserData=function(){var e=s.default.getBaseInfo();if(e){var t=JSON.parse(e);s.default.setClassId(t.lessonId),s.default.setUserId(t.userId),s.default.setModuleId(t.moduleId),s.default.setlessonModuleId(t.lessonModuleId)}for(var o=s.default.userId+s.default.lessonModuleId,i=r.default.getFindIdArr(),n=0;n<i.length;n++){var a=s.default.userId+s.default.lessonModuleId+n,c=s.default.callAppToStorage("GET",a);1==Number(c)&&r.default.setFindId(Number(n))}var p=o+"first",l=s.default.callAppToStorage("GET",p);console.log("~~~~~~~~~main~~first =========== "+l);var d=s.default.callAppToStorage("GET",o+"coin");r.default.setCoin(Number(d)),""!=l&&(console.log("f !===== ''  "),0==Number(l)&&r.default.setFirst(Number(l)))},t.prototype.initData=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return this.loadResFont(),e=this,[4,this.loadPrefab(n.common.getCurPageNum())];case 1:return e.prefab_nowShow=t.sent(),this.addPrefab(this.prefab_nowShow,n.common.getCurPageNum()),this.updatePageShow(),[2]}})})},t.prototype.loadResFont=function(){var e=this;cc.loader.loadRes("font/LingoAce",cc.Font,function(t){if(t)return console.log("\u5b57\u4f53\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"),e.loadResFont()})},t.prototype.pagePrefabs=function(){return __awaiter(this,void 0,void 0,function(){var e,t,o;return __generator(this,function(i){switch(i.label){case 0:e=0,i.label=1;case 1:return e<this.maxLoadPrefabNum?(t=n.common.getCurPageNum()+e-1,o=this,!a.node_config[t]||this.nodePrefab_ob[t]?[3,3]:[4,o.loadPrefab(t)]):[3,4];case 2:i.sent(),i.label=3;case 3:return e++,[3,1];case 4:return console.log("this.nodePrefab_ob == ",this.nodePrefab_ob),[2]}})})},t.prototype.loadPrefab=function(e){return __awaiter(this,void 0,void 0,function(){var t,o=this;return __generator(this,function(){return t=i.CConst.PREFAB_BASE_PATH+a.node_config[e].nodePath,[2,new Promise(function(i,a){cc.loader.loadRes(t,function(s,r){s?(console.log("\u5f53\u524d\u7684\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25   url"+t+"   \u5f53\u524d\u9875\u6570"+n.common.getCurPageNum()),a(s)):(console.log("\u5f02\u6b65\u52a0\u8f7d\u56de\u8c03\u6210\u529f\u8c03\u7528"),o.nodePrefab_ob[e]=r,i(r))})})]})})},t.prototype.destroyPrefab=function(e){this.nodePrefab_ob[e]&&delete this.nodePrefab_ob[e]},t.prototype.addPrefab=function(e,t){console.log("\u68c0\u6d4b\u662f\u5426\u4e3a\u5f53\u524d\u9875\u7684\u9884\u5236\u4f53"+this.checkPrefabIsCur(e,t)),this.checkPrefabIsCur(e,t)?(n.common.isUndefined(e)&&console.log("\u9884\u5236\u4f53\u6ca1\u6709"),this.prefab_nowShow=cc.instantiate(e),this.pageNode.removeAllChildren(),this.pageNode.addChild(this.prefab_nowShow),this.nodePrefab_ob[t]=e,this.destroyPrefab(t-2),this.destroyPrefab(t+2),this.pagePrefabs()):this.loadPrefab(t)},t.prototype.checkPrefabIsCur=function(e,t){if(!e)return!1;var o=e._name;return a.node_config[t].nodePath==o},t.prototype.updatePageShow=function(){var e=n.common.getMaxPageNum(),t=n.common.getCurPageNum();cc.find("labelBg/pageNum",this.UILayer).getComponent(cc.Label).string=t+"/"+e},t.prototype.changePageHandle=function(){var e=this;console.log("changePage--------"),this.updatePageShow(),this.prefab_nowShow.destroy(),this.prefab_nowShow=null;var t=n.common.getCurPageNum();r.default.changePageMax(t),this.prefab_nowShow=this.nodePrefab_ob[t],this.addPrefab(this.prefab_nowShow,t),s.default.callAppToCollect(t,1005,1),this.scheduleOnce(function(){e.pageNode.active=!0,cc.log(e.pageNode)},1)},t.prototype.turnPageHandle=function(){console.log("\u7ffb\u9875\u5f00\u59cb"),this.pageNode.active=!1},t.prototype.showWordBoard=function(){},t.prototype.addEventListener=function(){n.common.webframe.listen(i.CConst.PAGE_CHANGE,this.changePageHandle,this),n.common.webframe.listen(i.CConst.PAGE_TURN,this.turnPageHandle,this),n.common.webframe.listen(i.CConst.WORD_SPRITE_CLICK,this.showWordBoard,this)},t.prototype.removeEventListener=function(){n.common.webframe.ignore(i.CConst.PAGE_CHANGE,this.changePageHandle,this),n.common.webframe.ignore(i.CConst.PAGE_TURN,this.turnPageHandle,this)},t.prototype.onDisable=function(){this.removeEventListener(),this.unscheduleAllCallbacks()},__decorate([l(cc.Node)],t.prototype,"controlNode",void 0),__decorate([l(cc.Node)],t.prototype,"pageNode",void 0),__decorate([l(cc.Node)],t.prototype,"verlet",void 0),__decorate([l(cc.Node)],t.prototype,"sentence",void 0),__decorate([l(cc.Node)],t.prototype,"UILayer",void 0),__decorate([l(cc.Node)],t.prototype,"wordBoard",void 0),__decorate([p],t)}(cc.Component);o.default=d,cc._RF.pop()},{"./common/Tigo":"Tigo","./common/common":"common","./config/CConst":"CConst","./config/node_config":"node_config","./pageData":"pageData"}],node_config:[function(e,t,o){"use strict";cc._RF.push(t,"ece9adOH5xLBI13g0w8U0jW","node_config"),Object.defineProperty(o,"__esModule",{value:!0}),o.node_config=void 0,o.node_config={1:{id:1,nodePath:"page_1"},2:{id:2,nodePath:"page_2"},3:{id:3,nodePath:"page_3"},4:{id:4,nodePath:"page_4"},5:{id:5,nodePath:"page_5"},6:{id:6,nodePath:"page_6"},7:{id:7,nodePath:"page_7"},8:{id:8,nodePath:"page_8"},9:{id:9,nodePath:"page_9"},10:{id:10,nodePath:"page_10"},11:{id:11,nodePath:"page_11"},12:{id:12,nodePath:"page_12"},13:{id:13,nodePath:"page_13"}},cc._RF.pop()},{}],notifier_center:[function(e,t,o){"use strict";cc._RF.push(t,"59ee8HFyAFIgpRiwKyD9ZzF","notifier_center"),Object.defineProperty(o,"__esModule",{value:!0}),o.NotifierCenter=void 0;var i=function(){function e(e){void 0===e&&(e=null);var t=e;this._TAG="["+t+"/NotifierCenter]",this.events=new Map,this.isRunning=!1,this.launch()}return e.prototype.getScopeName=function(e){void 0===e&&(e=null);try{return e?(e._TAG?e._TAG:e.name?e.name:"unknow").toString():"unknow"}catch(t){return"unknow"}},e.prototype.listen=function(e,t,o,i){if(void 0===t&&(t=null),void 0===o&&(o=null),void 0===i&&(i=!1),"string"==typeof e&&"function"==typeof t){for(var n=this.events.get(e)||[],a=0;a<n.length;a++){var s=n[a];if(s.scope==o&&(s.handler==t||s.handler.toString()==t.toString()))return void cc.log(this._TAG,"\u6d88\u606f\u91cd\u590d\u6ce8\u518c:"+e+" function:"+t.name)}var r={handler:t,scope:o,isOnce:i};n.push(r),this.events.set(e,n)}else cc.log(this._TAG," listen err: eName :"+e+"handler:"+t)},e.prototype.ignore=function(e,t,o){if(void 0===t&&(t=null),void 0===o&&(o=null),"string"!=typeof e)return cc.log("-----eventName----"+e),void this.ignoreScope(arguments[0]);if("string"==typeof e&&"function"==typeof t){var i=this.events.get(e);if(i&&0!==i.length){o=o||this;for(var n=-1,a=0;a<i.length;++a){var s=i[a];s.scope!=o||s.handler!=t&&s.handler.toString()!=t.toString()||(n=a)}n>-1&&i.splice(n,1),i.length<=0?this.events.delete(e):this.events.set(e,i),console.log("remove eventName "+e+" current Events length "+i.length)}}else cc.log(this._TAG,"NotifierCenter remove err: eName :"+e+"scope:"+o._TAG)},e.prototype.trigger=function(e,t){if(void 0===t&&(t=null),this.isRunning)if("string"==typeof e){var o=this.events.get(e);if(o){for(var i=Array.prototype.slice.call(arguments,1),n=this,a=0;a<o.length;a++){var s=o[a];s.scope&&s.scope instanceof cc.Component&&!cc.isValid(s.scope.node)||(s.handler.apply(s.scope,i),s.isOnce&&cc.log(n._TAG,"trigger and remove once listener",e))}var r=o.filter(function(e){return!(e.scope&&e.scope instanceof cc.Component&&!cc.isValid(e.scope.node)||e.isOnce)});this.events.set(e,r)}}else cc.log(this._TAG," trigger err: eventName :"+e)},e.prototype.ignoreScope=function(e){var t=this;void 0===e&&(e=null);var o=":";this.events.forEach(function(i,n){var a=i.filter(function(t){return t.scope!=e||(o=o+n+",",!1)});t.events.set(n,a)})},e.prototype.destroy=function(){console.log(this._TAG,"destroy"),this.events.clear()},e.prototype.shut=function(){console.log(this._TAG,"--------shut"),this.isRunning=!1},e.prototype.launch=function(){console.log(this._TAG,"--------launch"),this.isRunning=!0},e}();o.NotifierCenter=i,cc._RF.pop()},{}],"page-effect-assembler-base":[function(e,t,o){"use strict";cc._RF.push(t,"ad298hcoFFPjqeo9GC0tsCB","page-effect-assembler-base"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.verticesCount=4,t.indicesCount=6,t.floatsPerVert=5,t.colorOffset=4,t.renderData=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"verticesFloats",{get:function(){return this.verticesCount*this.floatsPerVert},enumerable:!1,configurable:!0}),t.prototype.getBuffer=function(){return cc.renderer._handle.getBuffer("mesh",this.getVfmt())},t.prototype.getVfmt=function(){return null},t.prototype.updateColor=function(e,t){var o=this.renderData.uintVDatas[0];if(o){t=null!=t?t:e.node.color._val;for(var i=this.floatsPerVert,n=this.colorOffset,a=o.length;n<a;n+=i)o[n]=t}},t.prototype.updateIsFront=function(e,t){for(var o=this.renderData.vDatas[0],i=0,n=this.floatsPerVert,a=0,s=this.verticesCount;a<s;++a){i=a*n;var r=a%2==0,c=(r?o[i]:o[i-n])<(r?o[i+n]:o[i])?1:0;o[i+t]=c}},t.prototype.initData=function(){this.renderData=new cc.RenderData,this.renderData.init(this);var e=this.renderData;e.createFlexData(0,this.verticesCount,this.indicesCount,this.getVfmt());for(var t=e.iDatas[0],o=t.length/6,i=0,n=0;i<o;i++){var a=4*i;t[n++]=a,t[n++]=a+1,t[n++]=a+2,t[n++]=a+1,t[n++]=a+3,t[n++]=a+2}},t.prototype.fillBuffers=function(){var e=this.renderData,t=e.vDatas[0],o=e.iDatas[0],i=this.getBuffer(),n=i.request(this.verticesCount,this.indicesCount),a=n.byteOffset>>2,s=i._vData;t.length+a>s.length?s.set(t.subarray(0,s.length-a),a):s.set(t,a);for(var r=i._iData,c=n.indiceOffset,p=n.vertexOffset,l=0,d=o.length;l<d;l++)r[c++]=p+o[l]},t}(cc.Assembler);o.default=i,cc._RF.pop()},{}],pageData:[function(e,t,o){"use strict";cc._RF.push(t,"a76dbz+usJPi70uq1H9E5FE","pageData"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./common/common"),n=e("./common/Tigo"),a=function(){function e(){this.coins=0,this.isFirst=1,this.pageNowMax=1,this.spineData1={1:{0:{id:0,actionName:"zimu",effectName:"zimu"},1:{id:1,actionName:"laohu",effectName:""},2:{id:2,actionName:"xiaomao",effectName:"tuichuang"}},2:{0:{id:0,actionName:"tuzi",effectName:""},1:{id:1,actionName:"xiaohuoche",effectName:"huoche"}},3:{0:{id:0,actionName:"tigo_idle",effectName:"yaokongqi"},1:{id:1,actionName:"men_idle",effectName:"qiaomen"}},4:{0:{id:0,actionName:"tuzi_idle",effectName:""},1:{id:1,actionName:"tigo_idle",effectName:""}},5:{0:{id:0,actionName:"idle",effectName:"tuiwan"}},6:{0:{id:0,actionName:"tigo_idle",effectName:""},1:{id:1,actionName:"xiaomao_idle",effectName:"luozz"}},7:{0:{id:0,actionName:"tigo_idle",effectName:""},1:{id:1,actionName:"mao_idle",effectName:"wanxianqiu"}},8:{0:{id:0,actionName:"idle",effectName:"pao"}},9:{0:{id:0,actionName:"laohu",effectName:"zoulu"},1:{id:1,actionName:"chuanglian",effectName:""}},10:{0:{id:0,actionName:"xizhao",effectName:"xizao"}},11:{0:{id:0,actionName:"shuijiao",effectName:"shuijiao"}},12:{0:{id:0,actionName:"idle1",effectName:""},1:{id:1,actionName:"idle",effectName:""}},13:{0:{id:0,actionName:"idle1",effectName:""},1:{id:1,actionName:"idle3",effectName:""}}},this.spineData=[["biaoti_idle","nanhai_idle","huoji_idle","still"],["huoji_idle","shuye_idle","xiaoniao_idle","still"],["huoji_idle","nanhai_idle","still"],["idle","still"],["huo_idle","shui_idle"],["huoji_idle","nanhai_idle","yeye_idle","still"],["idle","still"],["idle","still"],["huoji_idle","shushi_idle","still"],["idle","still"],["fuwuyuan_idle","fuwuyuan_still","nanhai_idle","nanhai_still"],["nanhai_idle","shushi_idle","yeye_idle","nainai_idle","still"]],this.sentenceData=[["My","Lovely","Neighbor"],["Tigo","lives","in","a","big","house,"],["with","a","lovely","neighbor","next","door."],["It\u2019s","a","little","furry","kitten."],["Tigo","always","looks","after","him."],["The","little","furry","kitten","jumps."],["The","little","furry","kitten","rolls."],["The","little","furry","kitten","runs."],["The","little","furry","kitten","hides."],["Tigo","looks","after","him."],["Just","like","he","looks","after","Tigo."],["It's","in","my","hand,","Timmy."],["Now,","I","feel","so","fresh","and","clean!"]],this.voicesTimeData=[{page:1,voiceTimes:[1,1,1,2.6]},{page:2,voiceTimes:[1,1,1,1,1,1,4]},{page:3,voiceTimes:[1,1,1,1,1,1,3.8]},{page:4,voiceTimes:[1,1,1,1,1,3.4]},{page:5,voiceTimes:[1,1,1,1,1,3.5]},{page:6,voiceTimes:[1,1,1,1,1,3.8]},{page:7,voiceTimes:[1,1,1,1,1,4]},{page:8,voiceTimes:[1,1,1,1,1,3.8]},{page:9,voiceTimes:[1,1,1,1,1,4]},{page:10,voiceTimes:[1,1,1,1,2.6]},{page:11,voiceTimes:[1,1,1,1,1,1,3.2]},{page:12,voiceTimes:[1,1,1,1,1,3]},{page:13,voiceTimes:[1,1,1,1,1,1,1,4.5]}],this.FindId=[0,0,0,0],this.CanOrder=[!1,!1,!0,!1,!0,!0,!1,!1,!0,!0,!1,!0,!1]}return Object.defineProperty(e,"getInstance",{get:function(){return this._Instance||(this._Instance=new e),this._Instance},enumerable:!1,configurable:!0}),e.prototype.getVoiceTimes=function(e){for(var t=0;t<this.voicesTimeData.length;t++){var o=this.voicesTimeData[t];if(o.page===e)return o.voiceTimes}},e.prototype.getVoiceTotalTime=function(e){var t=this.getVoiceTimes(e);if(t)return t[t.length-1]},e.prototype.getSentenceData=function(e){if(e<=i.common.getMaxPageNum())return this.sentenceData[e-1]},e.prototype.getSpineData=function(e){if(e<=i.common.getMaxPageNum())return this.spineData1[e]},e.prototype.getSpineOrder=function(e){if(e<=i.common.getMaxPageNum())return this.CanOrder[e-1]},e.prototype.setFindId=function(e){this.FindId[e]=1;var t=n.default.userId+n.default.lessonModuleId+e;cc.log("PUT word ====> "+t),n.default.callAppToStorage("PUT",t,1)},e.prototype.getFindIdArr=function(){return this.FindId},e.prototype.getFindId=function(e){return this.FindId[e]},e.prototype.getFirst=function(){return this.isFirst},e.prototype.setFirst=function(e){this.isFirst=e},e.prototype.setCoin=function(e){this.coins=e},e.prototype.getCoin=function(){if(this.coins>0)return this.coins},e.prototype.addCoin=function(e){this.coins+=e,cc.log("now coins ===>"+this.coins);var t=n.default.userId+n.default.lessonModuleId;n.default.callAppToStorage("PUT",t+"coin",this.coins)},e.prototype.changePageMax=function(e){this.pageNowMax<e&&(this.pageNowMax=e,8==this.pageNowMax&&(n.default.callAppToSpeed(),cc.log("page > 7 call app to speed!")))},e}();o.default=a.getInstance,cc._RF.pop()},{"./common/Tigo":"Tigo","./common/common":"common"}],pageNode:[function(e,t,o){"use strict";cc._RF.push(t,"7f65drDMtJPf4AyVIYJukjU","pageNode"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./common/AudioManager"),n=e("./common/common"),a=e("./config/CConst"),s=e("./pageData"),r=cc._decorator,c=r.ccclass,p=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_spine=[],t.sp_word=null,t.touchNodes=[],t.tipNode=null,t.pageNum=1,t.canOrder=!1,t.nowStep=0,t.spineClips=[],t.nodeClicked=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.spineClips=s.default.getSpineData(this.pageNum),this.canOrder=s.default.getSpineOrder(this.pageNum),this.initPage(),this.schedule(this.showTips,5),cc.log(this.spineClips),this.addComponent(cc.Widget);var e=this.getComponent(cc.Widget);e.target=this.node.parent,e.isAlignLeft=!0,e.left=0,e.isAlignRight=!0,e.right=0,e.isAlignTop=!0,e.top=0,e.isAlignBottom=!0,e.bottom=0,e.alignMode=cc.Widget.AlignMode.ALWAYS},t.prototype.start=function(){},t.prototype.initPage=function(){for(var e=0;e<this.touchNodes.length;e++){var t=cc.instantiate(this.tipNode);this.touchNodes[e].addChild(t,0,"tip"),t.active=!1}},t.prototype.showTips=function(){cc.log("show");for(var e=function(e){if(t.touchNodes[e].getChildByName("tip")){var o=t.touchNodes[e].getChildByName("tip");o.active=!0,o.getComponent(cc.Animation).on("finished",function(){o.active=!1}),o.getComponent(cc.Animation).play()}},t=this,o=0;o<this.touchNodes.length;o++)e(o)},t.prototype.touchButtonCall=function(e,t){var o=this;if(cc.log("this page num ====> "+this.pageNum),1!=this.nodeClicked){var a=e.target;a.getChildByName("tip")&&a.removeAllChildren(),this.nodeClicked=!0,cc.log("touch id ==== "+t);var s=Number(t),r=(n.common.getCurPageNum(),this.spineClips[s].actionName),c=this.spineClips[s].effectName;if(""!=c){var p="effects/"+c;cc.log("sound url ====> "+p),i.default.playMusic(p)}this.m_spine[s].setCompleteListener(function(){o.nodeClicked=!1,i.default.stopMusic()}),this.m_spine[s].clearTracks(),this.m_spine[s].setToSetupPose(),this.m_spine[s].setAnimation(0,r,!1),1==this.canOrder&&(a.active=!1)}},t.prototype.wordClick=function(e,t){var o=Number(t);this.sp_word&&(this.sp_word.getComponent(cc.Animation).play(),n.common.webframe.trigger(a.CConst.WORD_SPRITE_CLICK,o),n.common.webframe.trigger(a.CConst.ADD_COIN))},__decorate([p({type:[sp.Skeleton]})],t.prototype,"m_spine",void 0),__decorate([p(cc.Node)],t.prototype,"sp_word",void 0),__decorate([p({type:[cc.Node],displayName:"\u53ef\u70b9\u51fb\u52a8\u753b"})],t.prototype,"touchNodes",void 0),__decorate([p(cc.Prefab)],t.prototype,"tipNode",void 0),__decorate([p],t.prototype,"pageNum",void 0),__decorate([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./common/AudioManager":"AudioManager","./common/common":"common","./config/CConst":"CConst","./pageData":"pageData"}],page_13:[function(e,t,o){"use strict";cc._RF.push(t,"e495bp7d5ZHf55AneDJW5xa","page_13"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t.touchNodes=[],t.tipNode=null,t.touched=!1,t}return __extends(t,e),t.prototype.start=function(){this.initPage(),this.schedule(this.showTips,5)},t.prototype.initPage=function(){for(var e=0;e<this.touchNodes.length;e++){var t=cc.instantiate(this.tipNode);this.touchNodes[e].addChild(t,0,"tip"),t.active=!1}},t.prototype.showTips=function(){cc.log("show");for(var e=function(e){if(t.touchNodes[e].getChildByName("tip")){var o=t.touchNodes[e].getChildByName("tip");o.active=!0,o.getComponent(cc.Animation).on("finished",function(){o.active=!1}),o.getComponent(cc.Animation).play()}},t=this,o=0;o<this.touchNodes.length;o++)e(o)},t.prototype.btnCall=function(e){if(!this.touched){var t=e.target;t.getChildByName("tip")&&t.removeAllChildren(),this.ani&&(this.ani.play(),this.touched=!0)}},__decorate([a(cc.Animation)],t.prototype,"ani",void 0),__decorate([a({type:[cc.Node],displayName:"\u53ef\u70b9\u51fb\u52a8\u753b"})],t.prototype,"touchNodes",void 0),__decorate([a(cc.Prefab)],t.prototype,"tipNode",void 0),__decorate([n],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],page_4:[function(e,t,o){"use strict";cc._RF.push(t,"7a346nZMkFLeqHe/+QN5tQm","page_4"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../common/AudioManager"),n=e("../common/common"),a=e("../config/CConst"),s=e("../pageData"),r=cc._decorator,c=r.ccclass,p=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_spine=[],t.sp_word=null,t.touchNodes=[],t.tipNode=null,t.huazi=null,t.pageNum=1,t.canOrder=!1,t.nowStep=0,t.spineClips=[],t.wordClicked=0,t.sp_wordNum=0,t.spineTouched=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.spineClips=s.default.getSpineData(this.pageNum),this.canOrder=s.default.getSpineOrder(this.pageNum),cc.log(this.spineClips);var e=0;5==this.pageNum?e=1:7==this.pageNum?e=2:9==this.pageNum&&(e=3),this.wordClicked=s.default.getFindId(e),cc.log("isClicked === > "+this.wordClicked),this.initPage(),this.schedule(this.showTips,5)},t.prototype.start=function(){1==this.wordClicked&&null!=this.sp_word&&(this.sp_word.active=!1)},t.prototype.initPage=function(){for(var e=0;e<this.touchNodes.length;e++){var t=cc.instantiate(this.tipNode);this.touchNodes[e].addChild(t,0,"tip"),t.active=!1}},t.prototype.showTips=function(){cc.log("show");for(var e=function(e){if(t.touchNodes[e].getChildByName("tip")){var o=t.touchNodes[e].getChildByName("tip");o.active=!0,o.getComponent(cc.Animation).on("finished",function(){o.active=!1}),o.getComponent(cc.Animation).play()}},t=this,o=0;o<this.touchNodes.length;o++)e(o)},t.prototype.aniCallBack=function(){cc.log("asd"),0==this.wordClicked&&null!=this.sp_word&&(this.sp_word.active=!0,cc.tween(this.sp_word).to(1,{opacity:255}).start())},t.prototype.touchButtonCall=function(e,t){var o=this;if(cc.log("touch id ==== "+t),!this.spineTouched){var n=e.target;n.getChildByName("tip")&&n.removeAllChildren(),this.spineTouched=!0;var a=Number(t),s=this.spineClips[a].actionName,r=this.spineClips[a].effectName;if(""!=r){var c="effects/"+r;cc.log("sound url ====> "+c),i.default.playMusic(c)}this.m_spine[a].setCompleteListener(function(){o.spineTouched=!1,i.default.stopMusic()}),this.m_spine[a].clearTracks(),this.m_spine[a].setToSetupPose(),this.m_spine[a].setAnimation(0,s,!1),1==this.canOrder&&(n.active=!1)}},t.prototype.wordClick=function(e,t){var o=Number(t);this.sp_word&&(this.sp_word.getComponent(cc.Animation).play(),cc.audioEngine.playEffect(this.huazi,!1),cc.log("play hua zi!"),this.wordClicked=1,this.sp_word.active=!1,n.common.webframe.trigger(a.CConst.ADD_COIN),n.common.webframe.trigger(a.CConst.WORD_SPRITE_CLICK,o))},__decorate([p({type:[sp.Skeleton]})],t.prototype,"m_spine",void 0),__decorate([p(cc.Node)],t.prototype,"sp_word",void 0),__decorate([p({type:[cc.Node],displayName:"\u53ef\u70b9\u51fb\u52a8\u753b"})],t.prototype,"touchNodes",void 0),__decorate([p(cc.Prefab)],t.prototype,"tipNode",void 0),__decorate([p({type:cc.AudioClip})],t.prototype,"huazi",void 0),__decorate([p],t.prototype,"pageNum",void 0),__decorate([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../common/AudioManager":"AudioManager","../common/common":"common","../config/CConst":"CConst","../pageData":"pageData"}],page_5:[function(e,t,o){"use strict";cc._RF.push(t,"5e150v0Km9LYbk62qBLl/m5","page_5"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../common/AudioManager"),n=e("../common/common"),a=e("../config/CConst"),s=e("../pageData"),r=cc._decorator,c=r.ccclass,p=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_spine=null,t.sp_word=null,t.touchNodes=[],t.tipNode=null,t.huazi=null,t.pageNum=1,t.canOrder=!1,t.nowStep=0,t.spineClips=[],t.wordClicked=0,t.sp_wordNum=0,t.spineTouched=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.spineClips=s.default.getSpineData(this.pageNum),this.canOrder=s.default.getSpineOrder(this.pageNum),cc.log(this.spineClips);var e=0;5==this.pageNum?e=1:6==this.pageNum?e=2:10==this.pageNum&&(e=3),this.wordClicked=s.default.getFindId(e),cc.log("isClicked === > "+this.wordClicked),this.initPage(),this.schedule(this.showTips,5)},t.prototype.start=function(){1==this.wordClicked&&null!=this.sp_word&&(this.sp_word.active=!1)},t.prototype.initPage=function(){for(var e=0;e<this.touchNodes.length;e++){var t=cc.instantiate(this.tipNode);this.touchNodes[e].addChild(t,0,"tip"),t.active=!1}},t.prototype.showTips=function(){cc.log("show");for(var e=function(e){if(t.touchNodes[e].getChildByName("tip")){var o=t.touchNodes[e].getChildByName("tip");o.active=!0,o.getComponent(cc.Animation).on("finished",function(){o.active=!1}),o.getComponent(cc.Animation).play()}},t=this,o=0;o<this.touchNodes.length;o++)e(o)},t.prototype.aniCallBack=function(){cc.log("asd"),0==this.wordClicked&&null!=this.sp_word&&(this.sp_word.active=!0,cc.tween(this.sp_word).to(1,{opacity:255}).start())},t.prototype.touchButtonCall=function(e,t){if(cc.log("touch id ==== "+t),!this.spineTouched){var o=e.target;o.getChildByName("tip")&&o.removeAllChildren(),o.active=!1,this.spineTouched=!0;var n=Number(t);if(this.canOrder)this.nowStep;else{var a=this.spineClips[n].actionName,s=this.spineClips[n].effectName;if(""!=s){var r="P"+this.pageNum+"/"+s;cc.log("sound url ====> "+r),i.default.playMusic(r)}this.m_spine.clearTracks(),this.m_spine.setToSetupPose(),this.m_spine.setAnimation(0,a,!1)}}},t.prototype.wordClick=function(e,t){var o=Number(t);this.sp_word&&(this.sp_word.getComponent(cc.Animation).play(),cc.audioEngine.playEffect(this.huazi,!1),cc.log("play hua zi!"),this.wordClicked=1,this.sp_word.active=!1,n.common.webframe.trigger(a.CConst.ADD_COIN),n.common.webframe.trigger(a.CConst.WORD_SPRITE_CLICK,o))},__decorate([p(sp.Skeleton)],t.prototype,"m_spine",void 0),__decorate([p(cc.Node)],t.prototype,"sp_word",void 0),__decorate([p({type:[cc.Node],displayName:"\u53ef\u70b9\u51fb\u52a8\u753b"})],t.prototype,"touchNodes",void 0),__decorate([p(cc.Prefab)],t.prototype,"tipNode",void 0),__decorate([p({type:cc.AudioClip})],t.prototype,"huazi",void 0),__decorate([p],t.prototype,"pageNum",void 0),__decorate([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../common/AudioManager":"AudioManager","../common/common":"common","../config/CConst":"CConst","../pageData":"pageData"}],page_9:[function(e,t,o){"use strict";cc._RF.push(t,"81497dOP21N8I0MoUXFelOg","page_9"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../common/AudioManager"),n=e("../common/common"),a=e("../config/CConst"),s=e("../pageData"),r=cc._decorator,c=r.ccclass,p=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_spine=[],t.sp_word=null,t.touchNodes=[],t.tipNode=null,t.pageNum=1,t.canOrder=!1,t.nowStep=0,t.spineClips=[],t.nodeClicked=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.spineClips=s.default.getSpineData(this.pageNum),this.canOrder=s.default.getSpineOrder(this.pageNum),this.initPage(),this.schedule(this.showTips,5),cc.log(this.spineClips)},t.prototype.start=function(){},t.prototype.initPage=function(){for(var e=0;e<this.touchNodes.length;e++){var t=cc.instantiate(this.tipNode);this.touchNodes[e].addChild(t,0,"tip"),t.active=!1}},t.prototype.showTips=function(){cc.log("show");for(var e=function(e){if(t.touchNodes[e].getChildByName("tip")){var o=t.touchNodes[e].getChildByName("tip");o.active=!0,o.getComponent(cc.Animation).on("finished",function(){o.active=!1}),o.getComponent(cc.Animation).play()}},t=this,o=0;o<this.touchNodes.length;o++)e(o)},t.prototype.touchButtonCall=function(e,t){var o=this;if(cc.log("this page num ====> "+this.pageNum),1!=this.nodeClicked){var n=e.target;n.getChildByName("tip")&&n.removeAllChildren(),this.nodeClicked=!0,cc.log("touch id ==== "+t);var a=Number(t),s=this.spineClips[a].actionName,r=this.spineClips[a].effectName;if(""!=r){var c="P"+this.pageNum+"/"+r;cc.log("sound url ====> "+c),i.default.playMusic(c,function(){o.m_spine[a].clearTracks(),o.m_spine[a].setToSetupPose(),o.m_spine[a].setAnimation(0,"linyu_still",!1),o.nodeClicked=!1})}this.m_spine[a].clearTracks(),this.m_spine[a].setToSetupPose(),this.m_spine[a].setAnimation(0,s,!0)}},t.prototype.wordClick=function(e,t){var o=Number(t);this.sp_word&&(this.sp_word.getComponent(cc.Animation).play(),n.common.webframe.trigger(a.CConst.WORD_SPRITE_CLICK,o),n.common.webframe.trigger(a.CConst.ADD_COIN))},__decorate([p({type:[sp.Skeleton]})],t.prototype,"m_spine",void 0),__decorate([p(cc.Node)],t.prototype,"sp_word",void 0),__decorate([p({type:[cc.Node],displayName:"\u53ef\u70b9\u51fb\u52a8\u753b"})],t.prototype,"touchNodes",void 0),__decorate([p(cc.Prefab)],t.prototype,"tipNode",void 0),__decorate([p],t.prototype,"pageNum",void 0),__decorate([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../common/AudioManager":"AudioManager","../common/common":"common","../config/CConst":"CConst","../pageData":"pageData"}],page:[function(e,t,o){"use strict";cc._RF.push(t,"8f20ffFFn1GyZqIezO01S4H","page"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./config/CConst"),n=e("./common/common"),a=e("./verlet-render"),s=e("./common/AudioManager"),r=e("./common/Tigo"),c=e("./pageData"),p=cc._decorator,l=p.ccclass,d=p.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.verletRender=null,t.buttons=[],t._angle=0,t._rightToLeft=-1,t._waitTime=0,t._canTrun=!1,t._pageNum=n.common.getCurPageNum(),t._canChangePage=!1,t._isChangging=!1,t.startPos=cc.v2(0,0),t}return __extends(t,e),t.prototype.start=function(){this._angle=0,this.verletRender.updateAngle(this._angle)},t.prototype.turnLeft=function(){for(var e=this,t=0;t<2;t++)this.buttons[t].active=!1;if(setTimeout(function(){for(var t=0;t<2;t++)e.buttons[t].active=!0},4e3),!this._isChangging){if(this._pageNum>=n.common.getMaxPageNum()){var o=0,a=c.default.getFindIdArr();cc.log("pageData arr ===>",a);for(var p=0;p<a.length;p++)1==a[p]&&(o+=3);var l={userId:r.default.userId,lessonId:r.default.classId,redVal:o,openVal:0,subType:5};return r.default.callAppToHttp("api/reward/info","POST",l),void r.default.callAppToClose("replayOrNext",!0)}this._isChangging=!0,this._angle=0,this._rightToLeft=1,this.verletRender._changePage(this._pageNum,1),this.verletRender.updateAngle(this._angle),setTimeout(function(){n.common.webframe.trigger(i.CConst.PAGE_TURN),e._canTrun=!0,s.default.playMusic(s.default.CHANGE_PAGE)},500)}},t.prototype.turnRight=function(){for(var e=this,t=0;t<2;t++)this.buttons[t].active=!1;setTimeout(function(){for(var t=0;t<2;t++)e.buttons[t].active=!0},4e3),this._isChangging||this._pageNum<=1||(this._isChangging=!0,this._angle=180,this._rightToLeft=0,this.verletRender._changePage(this._pageNum,2),this.verletRender.updateAngle(this._angle),n.common.webframe.trigger(i.CConst.PAGE_TURN),setTimeout(function(){n.common.webframe.trigger(i.CConst.PAGE_TURN),e._canTrun=!0,s.default.playMusic(s.default.CHANGE_PAGE)},500))},t.prototype.touchStart=function(e){this.startPos=e.getLocation()},t.prototype.touchMove=function(e){var t=-(e.getLocation().x-this.startPos.x),o=Math.abs(t);if(o<30){if(t>0){if(this._pageNum>=n.common.getMaxPageNum())return}else if(t<0){if(this._pageNum<=1)return;this._angle=180,this._rightToLeft=0,this.verletRender._changePage(this._pageNum,2)}o>=20&&(this._canChangePage=!0,n.common.webframe.trigger(i.CConst.PAGE_TURN))}this.verletRender.updateAngle(this._angle)},t.prototype.touchEnd=function(e){this._canTrun=!0;var t=-(e.getLocation().x-this.startPos.x),o=Math.abs(t);cc.log(o),o>40&&this._canChangePage&&(s.default.playMusic(s.default.CHANGE_PAGE),cc.log("10101010110"))},t.prototype.update=function(e){0!=this._canTrun&&(1==this._rightToLeft?(this._angle+=180*e,this._angle>180&&(this._angle=180,this._canTrun=!1,this._canChangePage=!1,this._pageNum+=1,this._pageNum>n.common.getMaxPageNum()&&(this._pageNum=n.common.getMaxPageNum()),cc.log("page ==== "+this._pageNum),this._rightToLeft=-1,n.common.setCurPageNum(this._pageNum),n.common.webframe.trigger(i.CConst.PAGE_CHANGE),this._isChangging=!1)):0==this._rightToLeft&&(this._angle-=180*e,this._angle<0&&(this._angle=0,this._canTrun=!1,this._canChangePage=!1,this._pageNum-=1,this._pageNum<1&&(this._pageNum=1),this._rightToLeft=-1,cc.log("page ==== "+this._pageNum),n.common.setCurPageNum(this._pageNum),n.common.webframe.trigger(i.CConst.PAGE_CHANGE),this._isChangging=!1)),this.verletRender.updateAngle(this._angle))},__decorate([d({type:a.default,displayName:"Verlet\u79ef\u5206\u7b97\u6cd5"})],t.prototype,"verletRender",void 0),__decorate([d({type:[cc.Node],displayName:"\u7ffb\u9875\u6309\u94ae"})],t.prototype,"buttons",void 0),__decorate([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./common/AudioManager":"AudioManager","./common/Tigo":"Tigo","./common/common":"common","./config/CConst":"CConst","./pageData":"pageData","./verlet-render":"verlet-render"}],sentence:[function(e,t,o){"use strict";cc._RF.push(t,"795178QRD9CjK/47O7vmCj9","sentence"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./common/AudioManager"),n=e("./config/CConst"),a=e("./common/common"),s=e("./pageData"),r=e("./common/Tigo"),c=cc._decorator,p=c.ccclass,l=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wordLayout=null,t.wordFont=null,t.btnPlay=null,t.mask=null,t.arr_word_Nodes=[],t.is_touch=!0,t.is_first=1,t}return __extends(t,e),t.prototype.onLoad=function(){this.init(),this.addEventListener()},t.prototype.init=function(){this.refreshWordNode(a.common.getCurPageNum());var e=s.default.getFirst();cc.log("first ===>"+e),1==e||this.playEffectSentences()},t.prototype.refreshWordNode=function(e){var t=this,o=s.default.getSentenceData(e);if(cc.log(" n ==== "+o),o){this.removeFromParent();for(var i=function(e){var i=n.arr_word_Nodes[e];i||(i=new cc.Node,n.arr_word_Nodes.push(i)),i.color=cc.Color.BLACK;var a=i.addComponent(cc.Label);a.string=o[e],a.fontSize=60,a.lineHeight=60,a.font=n.wordFont,n.wordLayout.addChild(i),i.addComponent(cc.Button).node.on("click",function(){console.log("\u70b9\u51fb\u56de\u8c03"),t.playEffect(e)},n)},n=this,a=0;a<o.length;a++)i(a)}},t.prototype.voicesEffect=function(){for(var e=this,t=s.default.getVoiceTotalTime(a.common.getCurPageNum()),o=this.arr_word_Nodes.length,i=t/o,n=function(t){var o=t*i;r.scheduleOnce(function(){for(var o=0;o<e.arr_word_Nodes.length;o++)e.arr_word_Nodes[o].color=t===o?new cc.Color(33,193,124,255):cc.Color.BLACK},o)},r=this,c=0;c<o+1;c++)n(c)},t.prototype.voiceSingleEffect=function(e){var t=this,o=s.default.getVoiceTimes(a.common.getCurPageNum())[e];if(o){this.unscheduleAllCallbacks();for(var i=function(i){var a=i*o;n.scheduleOnce(function(){for(var o=0;o<t.arr_word_Nodes.length;o++)t.arr_word_Nodes[o].color=cc.Color.BLACK;t.arr_word_Nodes[e].color=0===i?new cc.Color(33,193,124,255):cc.Color.BLACK},a)},n=this,r=0;r<2;r++)i(r)}else console.log("\u58f0\u97f3\u65f6\u957f\u83b7\u53d6\u5931\u8d25--")},t.prototype.playEffect=function(e){var t="P"+a.common.getCurPageNum()+"/word_"+e;i.default.playMusic(t,function(){}),this.voiceSingleEffect(e)},t.prototype.playEffectSentences=function(){var e=this;this.is_touch&&(this.mask.active=!0),console.log("\uff5e\uff5e\uff5e\uff5e\uff5e\uff5e\uff5e\uff5e\uff5e\uff5e\uff5e\u5f00\u59cb\u64ad\u653e\u53e5\u5b50"),this.btnPlay.getComponent(cc.Animation).play(),this.btnPlay.getComponent(cc.Button).interactable=!1;var t="P"+a.common.getCurPageNum()+"/sentences";i.default.playMusic(t,function(){console.log("\uff5e\uff5e\uff5e\uff5e\uff5e\uff5e\uff5e\u53e5\u5b50\u64ad\u653e\u5b8c\u6bd5----"),e.is_touch=!1,e.mask.active=!1,e.btnPlay.getComponent(cc.Button).interactable=!0,e.btnPlay.getComponent(cc.Animation).play("voice",0),e.btnPlay.getComponent(cc.Animation).sample("voice"),e.btnPlay.getComponent(cc.Animation).stop()}),this.voicesEffect()},t.prototype.bookHideCall=function(){var e=a.common.getCurPageNum(),t=s.default.getFirst(),o=r.default.userId+r.default.lessonModuleId;if(1==e&&1==t){this.playEffectSentences(),t=0,s.default.setFirst(0);var i=o+"first";r.default.callAppToStorage("PUT",i,0)}},t.prototype.onPlayClick=function(){this.is_touch=!1,this.playEffectSentences()},t.prototype.removeFromParent=function(){for(var e=0;e<this.arr_word_Nodes.length;e++)this.arr_word_Nodes[e].removeFromParent();this.arr_word_Nodes.length=0},t.prototype.changePageHandle=function(){var e=a.common.getCurPageNum();this.refreshWordNode(e),i.default.stopMusic(),this.unscheduleAllCallbacks(),this.is_touch=!0,this.scheduleOnce(this.playEffectSentences,1)},t.prototype.addEventListener=function(){a.common.webframe.listen(n.CConst.PAGE_CHANGE,this.changePageHandle,this),a.common.webframe.listen(n.CConst.WORD_BOOK_HIDE,this.bookHideCall,this)},t.prototype.removeEventListener=function(){a.common.webframe.ignore(n.CConst.PAGE_CHANGE,this.changePageHandle,this),a.common.webframe.ignore(n.CConst.WORD_BOOK_HIDE,this.bookHideCall,this)},t.prototype.onDisable=function(){this.removeFromParent(),this.removeEventListener(),this.unscheduleAllCallbacks()},__decorate([l({type:cc.Node,displayName:"\u53e5\u5b50\u5e03\u5c40"})],t.prototype,"wordLayout",void 0),__decorate([l({type:cc.Font,displayName:"\u53e5\u5b50\u5b57\u4f53"})],t.prototype,"wordFont",void 0),__decorate([l(cc.Node)],t.prototype,"btnPlay",void 0),__decorate([l(cc.Node)],t.prototype,"mask",void 0),__decorate([p],t)}(cc.Component);o.default=d,cc._RF.pop()},{"./common/AudioManager":"AudioManager","./common/Tigo":"Tigo","./common/common":"common","./config/CConst":"CConst","./pageData":"pageData"}],use_reversed_rotateBy:[function(e,t){"use strict";cc._RF.push(t,"69985OjG21FDb6JjF24FtU4","use_reversed_rotateBy"),cc.RotateBy._reverse=!0,cc._RF.pop()},{}],"verlet-assembler":[function(e,t,o){"use strict";cc._RF.push(t,"1836aBqBwNJS4Bqqs+WHwuq","verlet-assembler"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./page-effect-assembler-base"),n=cc.gfx,a=new n.VertexFormat([{name:n.ATTR_POSITION,type:n.ATTR_TYPE_FLOAT32,num:2},{name:n.ATTR_UV0,type:n.ATTR_TYPE_FLOAT32,num:2},{name:n.ATTR_COLOR,type:n.ATTR_TYPE_UINT8,num:4,normalize:!0},{name:"a_isFront",type:n.ATTR_TYPE_FLOAT32,num:1}]),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t);var o=t.pointsCount-1;this.verticesCount=4*o,this.indicesCount=6*o,this.floatsPerVert=6,this.initData()},t.prototype.getVfmt=function(){return a},t.prototype.updateRenderData=function(e){if(e){var t=e.getPointList(),o=t.length;if(o<2)return;for(var i=e.node,n=i.height,a=-i.width*i.anchorX,s=-n*i.anchorY,r=1/(o-1),c=0,p=0,l=this.floatsPerVert,d=this.renderData.vDatas[0],u=0,h=1;h<o;h++){var g=t[h-1],f=t[h];p=c+r,d[u=l*(h-1)*4]=a+g.x,d[u+1]=s+g.y,d[u+2]=c,d[u+3]=1,d[u+=l]=a+f.x,d[u+1]=s+f.y,d[u+2]=p,d[u+3]=1,d[u+=l]=a+g.x,d[u+1]=s+n+g.y,d[u+2]=c,d[u+3]=0,d[u+=l]=a+f.x,d[u+1]=s+n+f.y,d[u+2]=p,d[u+3]=0,c=p}this.updateColor(e,null),this.updateIsFront(e,5)}},t}(i.default);o.default=s,cc._RF.pop()},{"./page-effect-assembler-base":"page-effect-assembler-base"}],"verlet-render":[function(e,t,o){"use strict";cc._RF.push(t,"50dbcjXYhpDxpAmkQwp0/H6","verlet-render"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./verlet-assembler"),n=cc._decorator,a=n.ccclass,s=n.property,r=function(e,t){this.oldPos=this.newPos=cc.v2(e,t)},c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textureList=[],t.PagetextureList=[],t.defualtPages=[],t.pointsCount=30,t.constraintTimes=100,t.damping=.1,t.gravity=0,t._initedMaterial=!1,t._pointList=[],t._angle=0,t.pageNow=0,t}return __extends(t,e),t.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.initPointList(),this.draw()},t.prototype._resetAssembler=function(){(this._assembler=new i.default).init(this)},t.prototype._changePage=function(e,t){if(this.pageNow!=e)if(this.pageNow=e,1==t){cc.log("type1 pagenow ====="+e);var o=2*e;this.textureList[0]=this.PagetextureList[o-1]._texture,this.textureList[1]=this.PagetextureList[o]._texture,this.defualtPages[0].spriteFrame=this.PagetextureList[o-2],this.defualtPages[1].spriteFrame=this.PagetextureList[o+1],this._updateMaterial(),this.updateAngle(0)}else o=2*e,cc.log("type2 pagenow ====="+e),this.textureList[0]=this.PagetextureList[o-3]._texture,this.textureList[1]=this.PagetextureList[o-2]._texture,this.defualtPages[0].spriteFrame=this.PagetextureList[o-4],this.defualtPages[1].spriteFrame=this.PagetextureList[o-1],this._updateMaterial(),this.updateAngle(180)},t.prototype._updateMaterial=function(){var e=this.getMaterial(0);e&&(e.define("CC_USE_MODEL",1),2===this.textureList.length&&(e.setProperty("texture0",this.textureList[0]),e.setProperty("texture1",this.textureList[1])))},t.prototype.updateMaterial=function(){if(2===this.textureList.length)return this._updateMaterial(),void(this._initedMaterial=!0)},t.prototype.updateAngle=function(e){this._angle=e},t.prototype.getPointList=function(){for(var e=[],t=0,o=this._pointList;t<o.length;t++){var i=o[t];e.push(new cc.Vec2(i.newPos.x,i.newPos.y))}return e},t.prototype.initPointList=function(){for(var e=0;e<this.pointsCount;++e){var t=e/(this.pointsCount-1)*this.node.width;this._pointList.push(new r(t,0))}},t.prototype.update=function(){this.simulate(),this.applyConstraint(),this.draw()},t.prototype.simulate=function(){for(var e=cc.v2(0,this.gravity),t=this.pointsCount-1;t>=1;t--){var o=this._pointList[t],i=o.newPos.sub(o.oldPos).mul(this.damping);o.newPos.y<=0&&(e.y=Math.max(0,e.y)),o.oldPos=o.newPos,o.newPos=o.newPos.add(i),o.newPos=o.newPos.add(e)}},t.prototype._updateEndPos=function(e){this._pointList[this.pointsCount-1].newPos=new cc.Vec2(e.x,e.y)},t.prototype._getEndPos=function(){var e=new cc.Vec2(0,0),t=this.node.width,o=this._angle*Math.PI/180*2/Math.PI;if(this._angle<=90){var i=t*(1-Math.pow(o,3)),n=1*t/4*(1-Math.pow(1-o,4));e=new cc.Vec2(i,n)}else o-=1,i=-t*(1-Math.pow(1-o,3)),n=1*t/4*(1-Math.pow(o,4)),e=new cc.Vec2(i,n);return e},t.prototype.applyConstraint=function(){for(var e=this.node.width/(this.pointsCount-1),t=this._getEndPos(),o=0;o<this.constraintTimes;o++){this._updateEndPos(t);for(var i=this.pointsCount-1;i>=1;i--){var n=this._pointList[i-1],a=this._pointList[i],s=a.newPos.sub(n.newPos),r=s.mag(),c=null;if(r<e)c=s.normalize().negate();else{if(!(r>e))continue;c=s.normalize()}var p=Math.abs(r-e);if(1==i){var l=c.mul(p);a.newPos.subSelf(l)}else{var d=c.mul(.5*p);n.newPos.addSelf(d),a.newPos.subSelf(d)}}}},t.prototype.draw=function(){this._initedMaterial||this.updateMaterial(),this.setVertsDirty()},__decorate([s({type:[cc.Texture2D],displayName:"\u7eb9\u7406"})],t.prototype,"textureList",void 0),__decorate([s({type:[cc.SpriteFrame],displayName:"\u7ed8\u672c\u7eb9\u7406"})],t.prototype,"PagetextureList",void 0),__decorate([s({type:[cc.Sprite],displayName:"\u5de6\u53f3\u5e95\u56fe"})],t.prototype,"defualtPages",void 0),__decorate([s({displayName:"\u6bcf\u6761\u8fb9\u4e0a\u7684\u9876\u70b9\u6570\u91cf"})],t.prototype,"pointsCount",void 0),__decorate([s({displayName:"\u7ea0\u6b63\u6b21\u6570"})],t.prototype,"constraintTimes",void 0),__decorate([s({displayName:"\u901f\u5ea6\u8870\u51cf\u7cfb\u6570"})],t.prototype,"damping",void 0),__decorate([s({displayName:"\u91cd\u529b"})],t.prototype,"gravity",void 0),__decorate([a],t)}(cc.RenderComponent);o.default=c,cc._RF.pop()},{"./verlet-assembler":"verlet-assembler"}],wordBook:[function(e,t,o){"use strict";cc._RF.push(t,"66cd9+O02NAD6Lv2No6d7Pl","wordBook"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./common/common"),n=e("./config/CConst"),a=e("./pageData"),s=cc._decorator,r=s.ccclass,c=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wordNodes=[],t.borderColor=[],t.borderFrame=[],t.sp_words=[],t.findId=[0,0,0,0],t._isTouch=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.addEventListener(),this.initData()},t.prototype.initData=function(){this.findId=a.default.getFindIdArr();for(var e=0;e<this.sp_words.length;e++)this.wordNodes[e].active=!0,this.wordNodes[e].getChildByName("word").getComponent(cc.Label).string=this.sp_words[e],1==this.findId[e]&&(this.wordNodes[e].getComponent(cc.Sprite).spriteFrame=this.borderFrame[1],this.wordNodes[e].getChildByName("word").color=this.borderColor[1])},t.prototype.refreshData=function(){},t.prototype.showSelf=function(e){-1!=e&&(this.findId[e]=1,a.default.setFindId(e)),this.initData(),this.node.getComponent(cc.Animation).play("bookShow")},t.prototype.hideSlef=function(){this._isTouch||(this._isTouch=!0,this.node.getComponent(cc.Animation).on("finished",this.animationFinish,this),this.node.getComponent(cc.Animation).play("bookHide"),i.common.webframe.trigger(n.CConst.WORD_BOOK_HIDE))},t.prototype.animationFinish=function(){this._isTouch=!1,this.node.getComponent(cc.Animation).off("finished",this.animationFinish,this),this.node.active=!1,cc.log("hide")},t.prototype.showWordBoard=function(){},t.prototype.addEventListener=function(){},t.prototype.removeEventListener=function(){},__decorate([c({type:[cc.Node],displayName:"\u5355\u8bcd\u6846"})],t.prototype,"wordNodes",void 0),__decorate([c({type:[cc.Color],displayName:"\u5355\u8bcd\u989c\u8272"})],t.prototype,"borderColor",void 0),__decorate([c({type:[cc.SpriteFrame],displayName:"\u5355\u8bcd\u5e95\u8272"})],t.prototype,"borderFrame",void 0),__decorate([c({type:[cc.String],displayName:"\u7279\u6b8a\u8bcd"})],t.prototype,"sp_words",void 0),__decorate([r],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./common/common":"common","./config/CConst":"CConst","./pageData":"pageData"}]},{},["use_reversed_rotateBy","UILayer","bezier-assembler","bezier-render","AudioManager","Tigo","Tools","common","notifier_center","CConst","node_config","main","page-effect-assembler-base","page","pageData","pageNode","sentence","page_13","page_4","page_5","page_9","verlet-assembler","verlet-render","wordBook"]);